% arara: xelatex
% arara: xelatex if missing("toc")
% arara: bib2gls: {group: on}
% arara: xelatex
% arara: xelatex if found ("log", "Rerun")
\documentclass[titlepage=false,index=totoc,12pt,captions=tableheading]{scrreprt}

% Need support for extended characters
% and need a mono font that supports hyphenation
\usepackage[no-math]{fontspec}
%\setmainfont{DejaVu Serif Condensed}
\setmainfont{Linux Libertine O}

\newfontface\devangari{FreeSerif}
\newcommand{\devone}{{\devangari\char"0967}}
\newcommand{\devtwo}{{\devangari\char"0968}}
\newcommand{\devsix}{{\devangari\char"096C}}

\usepackage[x11names]{xcolor}
\usepackage{alltt}
\usepackage{array}
\usepackage{upquote}
\usepackage{etoolbox}

\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{accents}
\usepackage{tikz}
\usepackage{datetime2}
\usepackage[hidelinks]{hyperref}
\usepackage[% v1.21+
   record,% use bib2gls
   index,% create index glossary
   entrycounter,% enable entry counting
   %debug=showtargets,% debugging information
   stylemods=bookindex,% adjust predefined styles and load glossary-bookindex.sty
   style=bookindex
 ]
 {glossaries-extra}

\renewcommand*{\glsshowtarget}[1]{\texttt{\small [#1]}}
\renewcommand{\glsentrycounterlabel}{}
\renewcommand\glstreeitem{\par\hangindent10pt}
\renewcommand\glstreesubitem{\par\hangindent30pt\hspace*{15pt}}
\renewcommand*{\glsxtrbookindexprelocation}{}

% put break before dash to avoid confusion with a hyphen
\newcommand{\dhyphen}{%
 \texorpdfstring
 {\discretionary{}{}{}\texttt{-}}%
 {-}%
}

\newcommand{\bibglsseealsosep}{\subitem}
\newcommand{\bibglsusesee}[1]{, \glsxtrusesee{#1}}

\newcommand{\glsxtrpostnameabbreviation}{%
 \space(\glsentrylong{\glscurrententrylabel})%
}

\GlsXtrLoadResources[
  label-prefix={idx.},
  sort={letter-nocase},
  type={index},
  loc-prefix={comma},
  match-action={and},
  match={{category}={.*field}},
  %max-loc-diff=3,
  dual-prefix={},
  dual-type={main},
  combine-dual-locations={primary}
]

\DTMsavetimestamp{creation}{2017-01-20T15:39:00Z}

\IfFileExists{../java/Bib2Gls.java}
{
  \DTMsavefilemoddate{moddate}{../java/Bib2Gls.java}
}
{
  \DTMsavenow{moddate}
}

\newif\ifmainmatter

% ignore locations outside of main matter
\GlsXtrSetDefaultNumberFormat{glsignore}

\GlsXtrSetAltModifier{!}{format=glsignore}

\newcommand{\frontmatter}{%
 \clearpage\pagenumbering{roman}%
 \mainmatterfalse
}
\newcommand{\mainmatter}{%
 \clearpage\pagenumbering{arabic}%
 \GlsXtrSetDefaultNumberFormat{glsnumberformat}%
 \mainmattertrue
}

\newcommand{\bibgls}{\appfmt{bib2gls}}

\newcommand*{\sectionref}[1]{\hyperref[#1]{section~\ref*{#1}}}
\newcommand*{\Sectionref}[1]{\hyperref[#1]{Section~\ref*{#1}}}
\newcommand*{\figureref}[1]{\hyperref[#1]{figure~\ref*{#1}}}
\newcommand*{\Figureref}[1]{\hyperref[#1]{Figure~\ref*{#1}}}
\newcommand*{\tableref}[1]{\hyperref[#1]{table~\ref*{#1}}}
\newcommand*{\Tableref}[1]{\hyperref[#1]{Table~\ref*{#1}}}

\newcommand{\langxml}{\hyperref[sec:lang.xml]{language resource file}}

\newcommand{\hex}[1]{0x#1}
\newcommand{\hexsb}[1]{\textsubscript{\scriptsize\rmfamily#1}}
\newcommand{\subfigfmt}[1]{(\emph{#1})}

\newcommand{\qt}[1]{``#1''}

\newcommand{\qtt}[1]{\qt{\,\texttt{#1}\,}}

\newcommand{\code}[1]{\texorpdfstring{{\ttfamily\obeyspaces #1}}{#1}}

\newcommand{\era}[1]{\texorpdfstring{\textsc{\MakeLowercase{#1}}}{#1}}

\newcommand{\dequals}{%
 \texorpdfstring
 {\discretionary{}{}{}\texttt{=}\discretionary{}{}{}}%
 {=}%
}

\newcommand{\dcomma}{%
 \texorpdfstring
 {\texttt{,}\discretionary{}{}{}}%
 {,}%
}

\newcommand{\dcolon}{%
 \texorpdfstring
 {\texttt{:}\discretionary{}{}{}}%
 {:}%
}

\pdfstringdefDisableCommands{%
  \def\dhyphen{-}%
  \def\dcolon{:}%
  \def\dcomma{,}%
  \def\dequals{,}%
}

\newcommand*{\csfmt}[1]{%
 \texorpdfstring
 {\texttt{\char`\\ #1}}%
 {\string\\#1}%
}

\newcommand{\primary}[1]{\hyperbf{#1}}

% Provide commands that work like \gls[#1]{idx.#2}[#3]

\glsxtrnewglslike{idx.}{\idx}{\idxpl}{\Idx}{\Idxpl}

\newcommand{\stringu}{\idx{cs.string}\idx{u}}

\newcommand*{\filefmt}[1]{\texorpdfstring{\texttt{#1}}{#1}}
\newcommand*{\metafilefmt}[3]{%
  \filefmt{#1}\discretionary{}{}{}\meta{#2}\discretionary{}{}{}\filefmt{#3}%
}

\newcommand*{\primaryresourcefmt}{%
 \texorpdfstring
  {\texttt{\char`\\ jobname.glstex}}%
  {\string\\jobname.glstex}%
}

\newcommand*{\suppresourcefmt}[1]{%
 \texorpdfstring
  {\texttt{\char`\\ jobname-#1.glstex}}%
  {\string\\jobname-#1.glstex}%
}


\newcommand*{\appfmt}[1]{\texorpdfstring{\texttt{#1}}{#1}}
\newcommand*{\styfmt}[1]{\texorpdfstring{\textsf{#1}}{#1}}
\newcommand*{\envfmt}[1]{\texorpdfstring{\textsf{#1}}{#1}}
\newcommand*{\optfmt}[1]{\texorpdfstring{\texttt{#1}}{#1}}
\newcommand*{\csoptfmt}[1]{\texorpdfstring{\textcolor{DarkSeaGreen4}{\optfmt{#1}}}{#1}}
\newcommand*{\styoptfmt}[1]{\texorpdfstring{\textcolor{DarkOrchid4}{\optfmt{#1}}}{#1}}
\newcommand*{\fieldfmt}[1]{\texorpdfstring{\texttt{\color{DarkSlateGray4}#1}}{#1}}
\newcommand*{\entryfmt}[1]{\texorpdfstring{\texttt{\color{SteelBlue4}#1}}{#1}}
\newcommand*{\atentryfmt}[1]{\entryfmt{@#1}}
\newcommand*{\abbrstylefmt}[1]{\texorpdfstring{\textsf{#1}}{#1}}
\newcommand*{\glostylefmt}[1]{\texorpdfstring{\textsf{#1}}{#1}}
\newcommand*{\catattrfmt}[1]{\texorpdfstring{\textsf{#1}}{#1}}
\newcommand*{\counterfmt}[1]{\texorpdfstring{\textsf{#1}}{#1}}
\newcommand*{\idprefixfmt}[1]{%
 \texorpdfstring{\texttt{#1\spacefactor999 .}}{#1.}}

\newcommand*{\argor}{\texorpdfstring{\protect\textbar}{\string\|}}

\newrobustcmd*{\texmeta}[1]{{\normalfont\normalcolor$\langle$\emph{#1}$\rangle$}}

\newcommand*{\meta}[1]{%
 \texorpdfstring{\texmeta{#1}}{#1}%
}

\newcommand*{\oarg}[1]{\discretionary{}{}{}[#1]}
\newcommand*{\oargm}[1]{\oarg{\meta{#1}}}

\newcommand*{\marg}[1]{\texorpdfstring
 {\discretionary{}{}{}\char`\{#1\char`\} }%
 {\{#1\}}%
}

\newcommand*{\margm}[1]{\marg{\meta{#1}}}

\newcommand*{\file}[1]{%
 \texorpdfstring
 {\idx{file.#1}}%
 {#1}%
}

\newcommand{\texmfcnffmt}[1]{\texttt{#1}}

\newcommand{\texmfcnf}[1]{\idx{texmfcnf.#1}}

\newcommand*{\extfmt}[1]{\filefmt{.#1}}%

\newcommand*{\ext}[1]{%
 \texorpdfstring{\idx{#1}}{.#1}%
}

\newcommand*{\sty}[1]{%
  \texorpdfstring{\idx{#1}}{#1}%
}

\newcommand*{\env}[1]{%
  \texorpdfstring{\idx{#1}}{#1}%
}

\newcommand{\glsxtrpostdescenvironment}{environment}

\newcommand*{\abbrstyle}[1]{%
  \texorpdfstring{\idx{#1}}{#1}%
}

\newcommand*{\glostyle}[1]{%
  \texorpdfstring{\idx{#1}}{#1}%
}

\newcommand*{\catattr}[1]{%
  \texorpdfstring{\idx{#1}}{#1}%
}

\newcommand*{\counter}[1]{%
  \texorpdfstring{\idx{#1}}{#1}%
}

\newcommand{\glsxtrpostdesccounter}{counter}

\newcommand*{\idprefix}[1]{%
 \texorpdfstring{\idx{idprefix.#1}}{#1}%
}


\newcommand*{\styopt}[2][]{%
  \texorpdfstring%
  {%
    \idx{styopt.#2}\styoptfmt{\ifblank{#1}{}{\dequals\marg{#1}}}%
  }%
  {#2\ifblank{#1}{}{=#1}}%
}

\newcommand*{\keyvallist}{%
 \texorpdfstring
 {key\dequals value list}%
 {key=value list}%
}

\newcommand{\cssection}[2][\subsection]{%
 #1{\texorpdfstring{\glsxtrglossentry{#2}}{\string\\#2}}%
}

\newcommand{\format}[1]{%
  \gls{#1}\glsentryuseri{#1}%
}

\newcommand{\formatdef}[1]{%
  \begin{definition}%
  \gls[format=primary,hyper=false]{#1}\glsentryuseri{#1}%
  \end{definition}\ignorespaces
}

\newcommand{\nosecformatdef}[1]{%
  \begin{definition}
   \glsadd[format=primary]{#1}\glsxtrglossentry{#1}%
   \glsentryuseri{#1}%
  \end{definition}\ignorespaces
}

\newcommand{\nosecdef}[1]{%
  \begin{flushleft}\ttfamily
   \glsadd[format=primary]{#1}\glsxtrglossentry{#1}%
   \glsentryuseri{#1}%
  \end{flushleft}\ignorespaces
}

\newcommand*{\csref}[1]{\gls{#1}}

\newcommand{\optsection}[2][\subsection]{%
 \glsxtrifhasfield*{useri}{opt.#2}%
 {%
   #1[\texorpdfstring
       {\glsxtrheadname{opt.#2}\csoptfmt{=\glscurrentfieldvalue}}%
       {\glsentryname{opt.#2}=\glscurrentfieldvalue}]
     {\glsadd[format=primary]{opt.#2}\glsxtrglossentry{opt.#2}%
       \csoptfmt{=\glscurrentfieldvalue}% 
     }%
 }%
 {%
   #1[\texorpdfstring{\glsxtrheadname{opt.#2}}{\glsentryname{opt.#2}}]
     {\glsadd[format=primary]{opt.#2}\glsxtrglossentry{opt.#2}}%
 }%
}

\newcommand*{\csopt}[2][]{\gencsopt{#1}{opt}{#2}}%
\newcommand*{\glsopt}[2][]{\gencsopt{#1}{idx.gls}{#2}}%
\newcommand*{\glsaddopt}[2][]{\gencsopt{#1}{idx.glsadd}{#2}}%

\newcommand*{\gencsopt}[3]{%
  \texorpdfstring%
  {%
    \gls{#2.#3}%
    \csoptfmt{\ifblank{#1}{}{\dequals\marg{#1}}}%
  }%
  {#3\ifblank{#1}{}{=#1}}%
}

\newcommand*{\field}[1]{%
 \texorpdfstring
 {\gls{field.#1}}%
 {#1}%
}

\newcommand*{\fielddef}[1]{%
 \glsadd[format=primary]{field.#1}%
 \glsxtrglossentry{field.#1}{}%
}

\newglossarystyle{fieldstyle}{%
  \renewenvironment{theglossary}%
   {%
     \setlength{\glsdescwidth}{\dimexpr\linewidth-\maxnamewidth-4\tabcolsep}%
     \begin{tabular}{l>{\raggedright}p{\glsdescwidth}}%
   }%
   {\end{tabular}}%
  \renewcommand*{\glossaryheader}{%
    \bfseries Field & \bfseries Description\tabularnewline}%
  \renewcommand*{\glsgroupheading}[1]{}%
  \renewcommand{\glossentry}[2]{%
    \glsadd[format=primary]{##1}%
    \glsentryitem{##1}\glstarget{##1}{\glossentryname{##1}} &
    \glossentrydesc{##1}\tabularnewline
  }%
  \renewcommand{\subglossentry}[3]{\glossentry{##2}{##3}}%
  \renewcommand*{\glsgroupskip}{}%
}

\newcommand*{\fieldhook}[1]{%
  \edef\currentcategory{\glscategory{#1}}%
  \glsxtriflabelinlist{\currentcategory}{\fieldcategories}%
  {%
     \settowidth{\dimen0}{\glsentryname{#1}}%
     \ifdim\dimen0>\maxnamewidth \setlength{\maxnamewidth}{\dimen0}\fi
  }%
  {\printunsrtglossaryskipentry}%
}

\newlength\maxnamewidth

\newcommand*{\printfields}[1]{%
 \printunsrtglossary*[style=fieldstyle]{%
   \renewcommand*\glossarysection[2][]{}%
   \setlength{\maxnamewidth}{0pt}%
   \def\fieldcategories{#1}%
   \let\printunsrtglossaryentryprocesshook\fieldhook
 }%
}

\newcommand{\entrysection}[2][\subsection]{%
 #1[\texorpdfstring{\glsxtrheadname{entry.#2}}{\glsentryname{entry.#2}}]
   {\glsadd[format=primary]{entry.#2}\glsxtrglossentry{entry.#2}}%
}

\newcommand*{\atentry}[2][]{%
 \texorpdfstring
 {\gls[#1]{entry.#2}}%
 {#2}%
}

\newcommand{\argsection}[2][\section]{%
 \def\switcharg{}%
 \def\switchalt{}%
 \glsxtrifhasfield{useri}{switch.#2}%
 {%
   \edef\switcharg{ \expandonce\glscurrentfieldvalue}%
 }%
 {}%
 \glsxtrifhasfield{symbol}{switch.#2}%
 {%
   \edef\switchalt{ (or \expandonce\glscurrentfieldvalue\noexpand\switcharg)}%
 }%
 {}%
 #1[\texorpdfstring{\glsxtrheadname{switch.#2}}{\glsentryname{switch.#2}}\switcharg\switchalt]
   {\glsadd[format=primary]{switch.#2}%
    \glsxtrglossentry{switch.#2}\switcharg\switchalt}%
}

\newrobustcmd{\longswitch}{\string-{}\string-}

\newcommand*{\longargfmt}[1]{%
 \texorpdfstring{\texttt{\longswitch #1}}%
 {\string-\string-#1}%
}

\newcommand*{\shortargfmt}[1]{%
 \texorpdfstring{\texttt{\string-#1}}%
 {\string-#1}%
}

\newcommand*{\longarg}[1]{%
  \texorpdfstring
  {\gls{switch.#1}}%
  {\string-\string-#1}%
}

\newcommand*{\longargorshort}[1]{%
  \texorpdfstring
  {\gls{switch.#1}\ifglshassymbol{switch.#1}{ or \glssymbol{switch.#1}}{}}%
  {\string-\string-#1}%
}

\newcommand*{\unicodecategoryfmt}[1]{\textsf{#1}}

\definecolor{defbackground}{rgb}{1,1,0.75}
\newsavebox\defsbox
\newlength\defwidth

\newenvironment{definition}%
{%
  \setlength{\fboxsep}{4pt}\setlength{\fboxrule}{1.25pt}%
  \begin{lrbox}{\defsbox}%
   \setlength\defwidth\linewidth
   \addtolength\defwidth{-2\fboxrule}%
   \addtolength\defwidth{-2\fboxsep}%
   \begin{minipage}{\defwidth}
   \flushleft\ttfamily\ignorespaces
}%
{%
   \end{minipage}%
  \end{lrbox}\par\medskip\noindent
  \fcolorbox{black}{defbackground}{\usebox\defsbox}%
  \medskip\par\noindent
  \ignorespacesafterend
}

\setcounter{tocdepth}{4}

% This is a bit fiddly. Need to represent \vec{v} in typewriter
% font for the interpreter examples. ($\mathtt{\vec{v}}$ doesn't
% work)
\newsavebox\varrow
\sbox\varrow{$\mathtt{\accentset{\to}{v}}$}

\newcommand*{\mtx}[1]{\boldsymbol{#1}}
\newcommand*{\set}[1]{\mathcal{#1}}
\newcommand*{\card}[1]{|\set{#1}|}
\newcommand*{\imaginary}{i}

\newcommand{\addr}[1]{\\\url{#1}}
\title{\appfmt{bib2gls}: a command line Java application to convert
\filefmt{.bib} files to \filefmt{glossaries-extra.sty} resource
files}
\author{Nicola Talbot\addr{http://www.dickimaw-books.com/}}
\date{\DTMusedate{moddate}}

\makeatletter
\begingroup
 \renewcommand{\addr}[1]{}
 \let\texorpdfstring\@secondoftwo
 \DTMsetstyle{pdf}
 \protected@edef\x{\endgroup
   \noexpand\hypersetup{%
   pdfinfo={
     Title={\@title},
     Author={\@author},
     CreationDate={\DTMuse{creation}},
     ModDate={\DTMuse{moddate}},
   }%
   %\noexpand\pdfinfo{/CreationDate (\DTMuse{creation})
   %/ModDate (\DTMuse{moddate})}
   }%
 }\x

\makeatother

\begin{document}
\maketitle
\pagenumbering{alph}
\thispagestyle{empty}

\begin{abstract}
The \bibgls\ command line application can be used to extract
glossary information stored in a \ext{bib} file and convert it
into glossary entry definition commands that can be read using
\styfmt{glossaries-extra}'s \idx{GlsXtrLoadResources} command. When used
in combination with the \styoptfmt{record} package option, \bibgls\
can select only those entries that have been used in the document,
as well as any dependent entries, which reduces the \TeX\ resources
required by not defining unnecessary commands.

Since \bibgls\ can also sort and collate the recorded locations
present in the \ext{aux} file, it can simultaneously by-pass the
need to use \idx{makeindex} or \idx{xindy}, although \bibgls\ 
can be used together with an external indexing application if required. (For
example, if a custom \idx{xindy} rule is needed.)

An additional build may be required to ensure the locations are
up-to-date as the page-breaking may be slightly different on the
first \LaTeX\ run due to the unknown references being replaced with
?? which can be significantly shorter than the actual text produced
when the reference is known. 

Note that \bibgls\ is a Java application, and requires Java~7
(although the latest version is recommended).  Additionally,
\sty{glossaries-extra} must be at least version 1.12.
(Although again the latest version is recommended.)
This application was developed in response to the question
\qt{\href{http://tex.stackexchange.com/q/342544}{Is there a program for
managing glossary tags?}} on \TeX\ on StackExchange. The \ext{bib}
file can be managed in an application such as JabRef.

If you already have a \filefmt{.tex} file containing 
entry definitions using commands like \gls{newglossaryentry}
then you can use the supplementary tool \idx{convertgls2bib}
to convert the entries to the \filefmt{.bib} format required by
\bibgls. See \sectionref{sec:gls2bib} for further details.
\end{abstract}

\frontmatter

\tableofcontents
\listoftables

\mainmatter
\chapter{Introduction}

If you have extensively used the \styfmt{glossaries} or
\styfmt{glossaries-extra} package, you may have found yourself
creating a large \ext{tex} file containing many definitions that
you frequently use in documents. This file can then simply be
loaded using \idx{input} or \idx{loadglsentries}, but a large file
like this can be difficult to maintain and if the document only
actually uses a small proportion of those entries, the document
build is unnecessarily slow due to the time and resources taken on
defining the unwanted entries.

The aim of \bibgls\ is to allow the entries to be stored in a
\ext{bib} file, which can be maintained using a reference system
such as JabRef. The document build process
can now be analogous to that used with \idx{bibtex} (or
\appfmt{biber}), where only those entries that have been recorded in the
document (and possibly their dependent entries) will be extracted
from the \ext{bib} file. Since \bibgls\ can also perform
hierarchical sorting and can collate location lists, it doubles as
an indexing application, which means that the \idx{makeglossaries}
step can be skipped.

You can't use \idx{glsaddall} with this method as that command works
by iterating over all defined entries and calling
\idx{glsadd}\margm{label}. On the first \LaTeX\ run there are no
entries defined, so \idx{glsaddall} does nothing. If you want to
select all entries, just use \csopt[all]{selection} instead (which
has the advantage over \idx{glsaddall} in that it doesn't create a
redundant location for each entry).

Note that \bibgls\ requires the extension package
\sty{glossaries-extra} and can't be used with just the base
\sty{glossaries} package, since it requires some of the extension
commands. See the \styfmt{glossaries-extra} user manual for information
on the differences between the basic package and the extended
package, as some of the default settings are different.

Since the information used by \bibgls\ is
written to the \ext{aux} file, it's not possible to run \bibgls\
through \TeX's shell escape while the \ext{aux} file is open for
write access. (The \ext{aux} file is closed \emph{after} the end
document hook, so it can't be deferred with \idx{AtEndDocument}.) 
This means that if you really want to run \bibgls\
through \idx{write18} it must be done in the preamble with
\idx{immediate}. For example:
\begin{verbatim}
\immediate\write18{bib2gls \jobname}
\end{verbatim}
As from version 1.14 of \styfmt{glossaries-extra}, this can be done
automatically with the \styopt{automake} option if the \ext{aux}
file exists. (Remember that this will require the shell escape to be
enabled.)

\section{Example Use}
The glossary entries are stored in a \ext{bib} file. For
example, the file \filefmt{entries.bib} might contain:
\begin{verbatim}
@entry{bird,
  name={bird},
  description = {feathered animal}
}

@abbreviation{html,
  short="html",
  long={hypertext markup language}
}

@symbol{v,
  name={$\vec{v}$},
  text={\vec{v}},
  description={a vector}
}

@index{goose,plural="geese"}
\end{verbatim}
Here's an example document that uses this data:
\begin{verbatim}
\documentclass{article}

\usepackage[record]{glossaries-extra}

\GlsXtrLoadResources[
  src={entries},% data in entries.bib
  sort={en-GB}% sort according to 'en-GB' locale
]

\begin{document}
\Gls{bird} and \gls{goose}.
Symbol: $\gls{v}$.
Abbreviation: \gls{html}.

\printunsrtglossaries
\end{document}
\end{verbatim}
If this document is called \filefmt{myDoc.tex}, the build 
process is:
\begin{verbatim}
pdflatex myDoc
bib2gls myDoc
pdflatex myDoc
\end{verbatim}
(This manual assumes \appfmt{pdflatex} for simplicity. Replace
with \appfmt{latex}, \appfmt{xelatex} or \appfmt{lualatex} as
appropriate.)

You can have multiple instances of \gls{GlsXtrLoadResources}. For
example:
\begin{verbatim}
\documentclass{article}

\usepackage[record,index,abbreviations,symbols]{glossaries-extra}

\GlsXtrLoadResources[
  src={entries},% data in entries.bib
  sort={en-GB},% sort according to 'en-GB' locale
  match={entrytype={entry}},% only select @entry
  type={main}% put these entries in the 'main' glossary
]

\GlsXtrLoadResources[
  src={entries},% data in entries.bib
  sort={en-GB},% sort according to 'en-GB' locale
  match={entrytype={abbreviation}},% only select @abbreviation
  type={abbreviations}% put these entries in the 'abbreviations' glossary
]

\GlsXtrLoadResources[
  src={entries},% data in entries.bib
  sort={letter-case},% case-sensitive letter sort
  match={entrytype={symbol}},% only select @symbol
  type={symbols}% put these entries in the 'symbols' glossary
]

\GlsXtrLoadResources[
  src={entries},% data in entries.bib
  sort={en-GB},% sort according to 'en-GB' locale
  match={entrytype={index}},% only select @index
  type={index}% put these entries in the 'index' glossary
]

\begin{document}
\Gls{bird} and \gls{goose}.
Symbol: $\gls{v}$.
Abbreviation: \gls{html}.

\printunsrtglossaries
\end{document}
\end{verbatim}

Note that there's no need to called \idx!{xindy} or \idx!{makeindex}
since \bibgls\ automatically sorts the entries and collates the locations
after selecting the required entries from the \ext{bib} file and
before writing the temporary file that's input with \gls{glsxtrresourcefile}
(or the more convenient shortcut
\gls{GlsXtrLoadResources}).\footnote{This document will mostly use
the more convenient \gls{GlsXtrLoadResources}.}  This
means the entries are already defined in the correct order, and only
those entries that are required in the document are defined, so
\idx{printunsrtglossary} (or \idx{printunsrtglossaries}) may be used.
(The \qtt{unsrt} part of the command name indicates that all
defined entries should be listed in the order of definition from
\styfmt{glossaries-extra}'s point of view.)

If you additionally want to use an indexing application, such
as \idx{xindy}, you need the package option
\styopt[alsoindex]{record} and use \idx{cs.makeglossaries}
and \idx{printglossary} (or the iterative \idx{printglossaries}) as usual.
This requires a more complicated build process:
\begin{verbatim}
pdflatex myDoc
bib2gls myDoc
pdflatex myDoc
makeglossaries myDoc
pdflatex myDoc
\end{verbatim}
(The entries aren't defined until the second \LaTeX\ run, so the
indexing files required by \idx!{makeindex} or \idx!{xindy} can't be
created until then.)

\section{Security}

\TeX\ Live come with security settings
\texmfcnf{openinany} and \texmfcnf{openoutany} that, respectively,
govern read and write file access (in addition to the operating
system's file permissions). \bibgls\ uses \idx{kpsewhich} to
determine these values and honours them. MikTeX doesn't use these
settings, so if these values are unset, \bibgls\ will default to
\code{a} (any) for \texmfcnf{openinany} and \code{p} (paranoid) for
\texmfcnf{openoutany}.

\section{Localisation}
\label{sec:lang.xml}

The messages produced by \bibgls\ are fetched from a resource file
called \metafilefmt{bib2gls-}{lang}{.xml}, where \meta{lang} is a
valid \idx{IETF} language tag.

The appropriate file is searched for in the following order, where
\meta{locale} is the operating system's locale or the value supplied
by the \longarg{locale} switch:
\begin{enumerate}
\item \meta{lang} exactly matches \meta{locale}.
For example, my locale is \code{en-GB}, so \bibgls\ will first search
for \filefmt{bib2gls-en-GB.xml}. This file doesn't exist, so it will
try again.

\item If \meta{locale} has an associated script, the
next try is with \meta{lang} set to \meta{lang
code}\code{-}\meta{script} where \meta{lang code} is the two
letter ISO language code and \meta{script} is the script code.
For example, if \meta{locale} is \code{sr-RS-Latn}
then \bibgls\ will search for \filefmt{bib2gls-sr-Latn.xml} if
\filefmt{bib2gls-sr-RS-Latn.xml} doesn't exist.

\item The final attempt is with \meta{lang} set to just the two
letter ISO language code. For example, \filefmt{bib2gls-sr.xml}.
\end{enumerate}

If there is no match, \bibgls\ will fallback on the English resource file
\file{bib2gls-en.xml}.
(Currently only \file{bib2gls-en.xml} exists as my language skills aren't up
to translating it. Any volunteers who want to provide other language
resource files would be much appreciated.)

Note that if you use the \csopt[true]{loc-prefix} option, the
textual labels (\qt{Page} and \qt{Pages} in English) will be taken
from the resource file. In the event that the loaded resource file
doesn't match the document language, you will have to manually set
the correct translation (in English, this would be
\csopt[Page\dcomma Pages]{loc-prefix}). The default definition of
\csref{bibglspassim} is also obtained from the resource file.

\section{Manual Installation}

If you are unable to install \bibgls\ through your \TeX\ package
manager, you can install manually using the instructions below.
Replace \meta{TEXMF} with the path to your local or home TEXMF tree 
(for example, \filefmt{~/texmf}).

Copy the files provided to the following locations:
\begin{itemize}
\item \meta{TEXMF}\filefmt{/scripts/bib2gls/bib2gls.jar}
(Java application.)
\item \meta{TEXMF}\filefmt{/scripts/bib2gls/convertgls2bib.jar}
(Java application.)
\item \meta{TEXMF}\filefmt{/scripts/bib2gls/texparserlib.jar}
(Java library.)
\item \meta{TEXMF}\filefmt{/scripts/bib2gls/resources/bib2gls-en.xml}
(English resource file.)
\item \meta{TEXMF}\filefmt{/doc/support/bib2gls/bib2gls.pdf}
(This document.)
\end{itemize}

If you are using a Unix-like system, there are also bash scripts
provided called \file{bib2gls.sh} and \file{convertgls2bib.sh}. 
Either copy then directly to somewhere on your path without the \ext{sh} 
extension, for example:
\begin{verbatim}
cp bib2gls.sh ~/bin/bib2gls
cp convertgls2bib.sh ~/bin/convertgls2bib
\end{verbatim}
or copy the files to
\meta{TEXMF}\filefmt{/scripts/bib2gls/} and create a
symbolic link to them called just \filefmt{bib2gls} and
\filefmt{convertgls2bib} from somewhere on
your path, for example:
\begin{verbatim}
cp bib2gls.sh ~/texmf/scripts/bib2gls/
cp convertgls2bib.sh ~/texmf/scripts/bib2gls/
cd ~/bin
ln -s ~/texmf/scripts/bib2gls/bib2gls.sh bib2gls
ln -s ~/texmf/scripts/bib2gls/convertgls2bib.sh convertgls2bib
\end{verbatim}
The \file{texparserlib.jar} file isn't an application but is a
library used by both \file{bib2gls.jar} and
\file{convertgls2bib.jar}, and so needs to be in the same class path. 
(The library is in a separate
\href{https://github.com/nlct/texparser}{GitHub repository} as it's
also used by some of my other applications.)

Windows users can create a \ext{bat} file that works in a
similar way to the bash scripts. To do this, create a file called
\file{bib2gls.bat} that contains the following:
\begin{verbatim}
@ECHO OFF
FOR /F "tokens=*" %%I IN ('kpsewhich --progname=bib2gls --format=texmfscripts
bib2gls.jar') DO SET JARPATH=%%I
java -Djava.locale.providers=CLDR,JRE -jar "%JARPATH%" %*
\end{verbatim}
Save this file to somewhere on your system's path.
(Similarly for \filefmt{convertgls2bib}.) Note that \TeX\
distributions for Windows usually convert \ext{jar} files to
executables.

You may need to refresh \TeX's database to ensure that
\idx{kpsewhich} can find the \ext{jar} files.

To test that the application has been successfully installed, open a
command prompt or terminal and run the following command:
\begin{verbatim}
bib2gls --version
convertgls2bib --version
\end{verbatim}
This should display the version information for both applications.

\chapter{\texorpdfstring{\TeX}{TeX}\ Parser Library}
\label{sec:texparserlib}

The \bibgls\ application requires the \TeX\ Parser Library
\file{texparserlib.jar}\footnote{\url{https://github.com/nlct/texparser}} which is used to parse the \ext{aux}
and \ext{bib} files.

With the \longarg{interpret} switch on (default), this library is
also used to interpret the sort value when it contains
a backslash \verb|\| or a dollar symbol \verb|$| or braces \verb|{|
\verb|}| (and when the \csopt{sort} option is not \optfmt{unsrt} or
\optfmt{none} or \optfmt{use}). The other case is with
\csopt{set-widest} when determining the width of the \field{name}
field. The \longarg{no-interpret} switch will turn off this function,
but the library will still be used to parse the \ext{aux} and
\ext{bib} files.

The \file{texparserlib.jar} library is not a
\TeX\ engine and there are plenty of situations where it doesn't
work. In particular, in this case it's being used in a fragmented
context without knowing most of the packages used by the
document\footnote{\bibgls\ can detect from the log file a small
number of packages that the parser can support, such as
\sty{pifonts}, \sty{wasysym}, \sty{amssymb}, \sty{stix}, \sty{mhchem}
and \sty{bpchem}. There's also partial support for \sty{siunitx}'s
\idx{si} command.}\ or any custom
commands or environments provided within the document.

\TeX\ syntax can be quite complicated and, in some cases, far too
complicated for simple regular expressions. The library performs
better than a simple pattern match, and that's the purpose of
\file{texparserlib.jar} and why it's used by \bibgls\ (and by
\idx{convertgls2bib}). When
the \longarg{debug} mode is on, any warnings or errors triggered by
the \longarg{interpret} mode will be written to the transcript
prefixed with \code{texparserlib:} (the results of the conversions
will be included in the transcript as informational messages
prefixed with \code{texparserlib:} even with \longarg{no-debug}).

For example, suppose the \ext{bib} file includes:
\begin{verbatim}
@preamble{
"\providecommand{\mtx}[1]{\boldsymbol{#1}}
\providecommand{\set}[1]{\mathcal{#1}}
\providecommand{\card}[1]{|\set{#1}|}
\providecommand{\imaginary}{i}"}

@entry{M,
  name={{}$\mtx{M}$},
  text={\mtx{M}},
  description={a matrix}
}

@entry{v,
  name={{}$\vec{v}$},
  text={\vec{v}},
  description={a vector}
}

@entry{S,
  name={{}$\set{S}$},
  text={\set{S}},
  description={a set}
}

@entry{card,
  name={{}$\card{S}$},
  text={\card{S}},
  description={the cardinality of the set $\set{S}$}
}

@entry{i,
  name={{}$\imaginary$},
  text={\imaginary},
  description={square root of minus one ($\sqrt{-1}$)}
}
\end{verbatim}
(The empty group at the start of the \field{name} fields
protects against the possibility that the \catattr{glossname}
category attribute might be set to \optfmt{firstuc}, which
automatically converts the first letter of the name to 
upper case when displaying the glossary. See also
\longarg{mfirstuc-protection} and
\longarg{mfirstuc-math-protection}.)

None of these entries have a \field{sort} field so the \field{name}
is used. If the entry type had been \atentry{symbol} instead,
the fallback would be the entry's label.
This means that with \atentry{symbol} instead of \atentry{entry}, and the default
\csopt[sort]{sort-field}, and with
\csopt[letter-case]{sort}, these entries will be defined in
the order: \code{M}, \code{S}, \code{card}, \code{i}, \code{v} (since
this is the case-sensitive letter order of the labels) whereas
with \csopt[letter-nocase]{sort-field}, the order will be:
\code{card}, \code{i}, \code{M}, \code{S}, \code{v} (since this
is the case-insensitive letter order of the labels).

However, with \atentry{entry}, the fallback field will
be taken from the \field{name} which in the above example contains \TeX\ code, so
\bibgls\ will use \file{texparserlib.jar} to interpret this code.
The library has several different ways of writing the processed
code. For simplicity, \bibgls\ uses the library's HTML output and then 
strips the HTML markup and trims any leading or trailing
spaces. The library method that writes non-ASCII
characters using \qtt{\&x\meta{hex};} markup is overridden
by \bibgls\ to just write the Unicode character, which means
that the letter-based sorting options will sort according
to the integer value \meta{hex} rather than the string
\qtt{\&x\meta{hex};}.

The interpreter is first passed the code provided with
\atentry{preamble}:
\begin{verbatim}
\providecommand{\mtx}[1]{\boldsymbol{#1}}
\providecommand{\set}[1]{\mathcal{#1}}
\providecommand{\card}[1]{|\set{#1}|}
\providecommand{\imaginary}{i}
\end{verbatim}
(unless \csopt[false]{interpret-preamble}).
This means that the provided commands are now recognised by the
interpreter when it has to parse the fields later.

In the case of the \code{M} entry in the example above, the 
code that's passed to the interpreter is:
\begin{verbatim}
{}$\mtx{M}$
\end{verbatim}
The transcript (\ext{glg}) file will show the results of the
conversion:\footnote{The \longarg{debug} mode will show additional
information.}
\begin{verbatim}
texparserlib: {}$\mtx{M}$ -> M
\end{verbatim}
So the \field{sort} value for this entry is set to \qtt{M}. The font
change (caused by math-mode and \idx{boldsymbol}) has been 
ignored. The sort value therefore consists of a single Unicode
character 0x4D (Latin upper case letter \qtt{M}, decimal value 77).

For the \code{v} entry, the code is:
\begin{verbatim}
{}$\vec{v}$
\end{verbatim}
The transcript shows:
\begin{alltt}
texparserlib: \marg{}\$\csfmt{vec}\marg{v}\$ -> \usebox\varrow
\end{alltt}
So the \field{sort} value for this entry is set to \qtt{\usebox\varrow},
which consists of two Unicode characters 0x76
(Latin lower case letter \qtt{v}, decimal value 118) and 
0x20D7 (combining right arrow above, decimal value 8407).

For the \code{set} entry, the code is:
\begin{verbatim}
{}$\set{S}$
\end{verbatim}
The transcript shows:
\begin{verbatim}
texparserlib: {}$\set{S}$ -> S
\end{verbatim}
So the \field{sort} value for this entry is set to \qtt{S} (again
ignoring the font change). This consists of a single Unicode
character 0x53 (Latin upper case letter \qtt{S}, decimal value~83).

For the \code{card} entry, the code is:
\begin{verbatim}
{}$\card{S}$
\end{verbatim}
The transcript shows:
\begin{verbatim}
texparserlib: {}$\card{S}$ -> |S|
\end{verbatim}
So the \field{sort} value for this entry is set to \qtt{|S|}
(the \textbar\ characters from the definition of \csfmt{card} provided
in \atentry{preamble} have been included, but the
font change has been discarded). In this case the sort value
consists of three Unicode characters 0x7C (vertical line, decimal
value 124),
0x53 (Latin upper case letter \qtt{S}, decimal value 83) and 0x7C again.
If \csopt[false]{interpret-preamble} had been used, \csfmt{card}
wouldn't be recognised and would be discarded leaving just \qtt{S}
as the sort value.

For the \code{i} entry, the code is:
\begin{verbatim}
{}$\imaginary$
\end{verbatim}
The transcript shows:
\begin{verbatim}
texparserlib: {}$\imaginary$ -> i
\end{verbatim}
So the \field{sort} value for this entry is set to \qtt{i}.

This means that in the case of the default \csopt[sort]{sort-field} with
\csopt[letter-case]{sort}, these entries will be defined in
the order: \code{M} ($\mtx{M}$), \code{S} ($\set{S}$),
\code{i} ($\imaginary$), \code{v} ($\vec{v}$) and
\code{card} ($\card{S}$).
In this case, the entries have been sorted according to
the character codes. If you run \bibgls\ with \longarg{verbose}
the decimal character codes will be included in the transcript.
For this example:
\begin{alltt}
i -> 'i' [105]
card -> '|S|' [124 83 124]
M -> 'M' [77]
S -> 'S' [83]
v -> '\usebox\varrow' [118 8407]
\end{alltt}

The \longarg{group} option (in addition to \longarg{verbose}) 
will place the letter group in 
parentheses before the character code list:
\begin{alltt}
i -> 'i' (i) [105]
card -> '|S|' [124 83 124]
M -> 'M' (M) [77]
S -> 'S' (S) [83]
v -> '\usebox\varrow' (v) [118 8407]
\end{alltt}
(Note that the \code{card} entry doesn't have a letter
group since the vertical bar character isn't considered a 
letter.)

If \csopt[letter-nocase]{sort} is used instead then, after conversion
by the interpreter, the sort values will all be changed to
lower case. The order is now: \code{i} ($\imaginary$), 
\code{M} ($\mtx{M}$), \code{S} ($\set{S}$),
\code{v} ($\vec{v}$) and \code{card} ($\card{S}$).
The transcript (with \longarg{verbose}) now shows
\begin{alltt}
i -> 'i' [105]
card -> '|s|' [124 115 124]
M -> 'm' [109]
S -> 's' [115]
v -> '\usebox\varrow' [118 8407]
\end{alltt}
With \longarg{group} (in addition to \longarg{verbose}) 
the letter groups are again included:
\begin{alltt}
i -> 'i' (I) [105]
card -> '|s|' [124 115 124]
M -> 'm' (M) [109]
S -> 's' (S) [115]
v -> '\usebox\varrow' (V) [118 8407]
\end{alltt}
Note that the letter groups are upper case not lower case.
Again the \code{card} entry doesn't have an associated
letter group.

If a locale-based sort is used, the ordering will follow the
locale's alphabet rules. For example, with \csopt[en]{sort}
(English, no region or variant), the order becomes:
\code{card} ($\card{S}$), \code{i} ($\imaginary$), 
\code{M} ($\mtx{M}$), \code{S} ($\set{S}$) and
\code{v} ($\vec{v}$). The transcript (with \longarg{verbose}) 
shows the collation keys instead:
\begin{alltt}
i -> 'i' [0 92 0 0 0 0]
card -> '|S|' [0 66 0 102 0 66 0 0 0 0]
M -> 'M' [0 96 0 0 0 0]
S -> 'S' [0 102 0 0 0 0]
v -> '\usebox\varrow' [0 105 0 0 0 0]
\end{alltt}
Again the addition of the \longarg{group} switch will show
the letter groups.\footnote{For more information on collation keys see the
\href{http://docs.oracle.com/javase/8/docs/api/java/text/CollationKey.html}{CollationKey}
class in Java's API.}

Suppose I add a new symbol to my \ext{bib} file:
\begin{verbatim}
@symbol{angstrom,
  name={\AA},
  description={\AA ngstr\"om}
}
\end{verbatim}
and I also use this entry in the document. Then with
\csopt[en]{sort}, the order is: \code{card} ($\card{S}$),
\code{angstrom} (\AA), \code{i} ($\imaginary$), \code{M}
($\mtx{M}$), \code{S} ($\set{S}$), and \code{v} ($\vec{v}$).
The \longarg{group} switch shows that the \code{angstrom} entry
(\AA) has been placed in the \qt{A} letter group.

However, if I change the locale to \csopt[sv]{sort}, the
\code{angstrom} entry is moved to the end of the list and the
\longarg{group} switch shows that it's been placed in the \qt{\AA}
letter group.

If you are using Java~8, you can set the
\code{java.locale.providers} property to \code{CLDR,JRE} to use
the Common Locale Data Repository, which has more extensive
support for locales than the native \idx{JRE}.
This isn't available for Java~7, and should be enabled by default
for the proposed Java~9.

\chapter{Command Line Options}
\label{sec:switches}

\edef\resetsecnumdepth{\noexpand\setcounter{secnumdepth}{\arabic{secnumdepth}}}
\setcounter{secnumdepth}{0}

The syntax of \bibgls\ is:
\begin{alltt}
bib2gls \oargm{options} \meta{filename}
\end{alltt}
where \meta{filename} is the name of the \ext{aux} file. (The
extension may be omitted.) Only one \meta{filename} is permitted.

Available options are listed below.

\argsection{help}

Display the help message and quit.

\argsection{version}

Display the version information and quit.

\argsection{debug}

Switch on debugging mode. If \meta{n} is present, it must be a
non-negative integer indicating the debugging level. If omitted 1 is
assumed. This option also switches on the verbose mode. A value of 0
is equivalent to \longargfmt{no-debug}.

\argsection{no-debug}

Switches off the debugging mode.

\argsection{verbose}

Switches on the verbose mode. This writes extra information to the
terminal and transcript file.

\argsection{no-verbose}

Switches off the verbose mode. This is the default behaviour.
Some messages are written to the terminal. To completely suppress
all messages (except errors), switch on the silent mode.
For additional information messages, switch on the verbose mode.

\argsection{silent}

Suppresses all messages except for errors that would normally be
written to the terminal. Warnings and informational messages are
written to the transcript file, which can be inspected afterwards.

\argsection{locale}

Specify the preferred \langxml, where \meta{lang} is a valid \idx{IETF} language tag.
This option requires an appropriate \metafilefmt{bib2gls-}{lang}{.xml}
resource file otherwise \bibgls\ will fallback on English.

\argsection{log-file}

Sets the name of the transcript file. By default, the name is the
same as the \ext{aux} file but with a \ext{glg} extension. Note that
if you use \bibgls\ in combination with \idx{xindy} or
\idx{makeindex}, you will need to change the transcript file name to
prevent interference.

\argsection{dir}

By default \bibgls\ assumes that the output files should be written
in the current working directory. The input \ext{bib} files are assumed to be
either in the current working directory or on \TeX's path (in which
case \idx{kpsewhich} will be used to find them).

If your \ext{aux} file isn't in the current working directory (for
example, you have run \TeX\ with \shortargfmt{output-directory})
then you need to take care how you invoke \bibgls.

Suppose I have a file called \filefmt{test-entries.bib} that
contains my entry definitions and a document called
\filefmt{mydoc.tex} that selects the \ext{bib} file using:
\begin{verbatim}
\GlsXtrLoadResources[src={test-entries}]
\end{verbatim}
(\filefmt{test-entries.bib} is in the same directory as
\filefmt{mydoc.tex}).
If I compile this document using
\begin{verbatim}
pdflatex -output-directory tmp mydoc
\end{verbatim}
then the auxiliary file \filefmt{mydoc.aux} will be written to the
\filefmt{tmp} sub-directory. The resource information is listed in
the \ext{aux} file as
\begin{verbatim}
\glsxtr@resource{src={test-entries}}{mydoc}
\end{verbatim}
If I run \bibgls\ from the \filefmt{tmp} directory, then it won't
be able to find the \filefmt{test-entries.bib} file (since it's in
the parent directory).

If I run \bibgls\ from the same directory as \filefmt{mydoc.tex}
using
\begin{verbatim}
bib2gls tmp/mydoc
\end{verbatim}
then the \ext{aux} file is found and the transcript file is
\filefmt{tmp/mydoc.glg} (since the default is the same as the
\ext{aux} file but with the extension changed to \ext{glg}) but the
output file \filefmt{mydoc.glstex} will be written to the current
directory.

This works fine from \TeX's point of view as it can find the
\ext{glstex} file, but it may be that you'd rather the \ext{glstex}
file was tidied away into the \filefmt{tmp} directory along with all
the other files.  In this case you need to invoke \bibgls\ with the
\longargorshort{dir} option:
\begin{verbatim}
bib2gls -d tmp mydoc
\end{verbatim}

\argsection{interpret}

Switch on the interpreter mode (default). See \sectionref{sec:texparserlib}
for more details.

\argsection{no-interpret}

Switch off the interpreter mode. See \sectionref{sec:texparserlib}
for more details.

\argsection{packages}

Instruct the interpreter to pretend the packages listed 
in \meta{list} have been used by the document.
This option has a cumulative action so \code{\longarg{packages}
"wasysym,pifont"} is the same as \code{\longarg{packages} wasysym 
\longarg{packages} pifont}.

Note that there's only a limited number of packages supported by the
\TeX\ parser library. This option is provided for cases where you're
using a command from a package that the interpreter doesn't support
but it happens to have the same name and meaning as a command from
a package that the interpreter does support.

\argsection{mfirstuc-protection}

Commands like \idx{Gls} use \idx{makefirstuc} provided by the
\sty{mfirstuc} package. This command has limitations and one of the
things that can break it is the use of a referencing command 
at the start of its argument. The \sty{glossaries-extra} package has
more detail about the problem in the \qt{Nested Links} section of
the user manual. If a glossary field starts with one of these
problematic commands, the recommended method (if the command can't
be replaced) is to insert an empty group in front of it.

For example, the following definition
\begin{verbatim}
\newabbreviation{shtml}{shtml}{\glsps{ssi} enabled \glsps{short}{html}}
\end{verbatim}
will cause a problem for \verb|\Gls{shtml}| on first use.

The above example, would be written in a \ext{bib} file as:
\begin{verbatim}
@abbreviation{shtml,
  short={shtml},
  long={\glsps{ssi} enabled \glsps{html}}
}
\end{verbatim}

With the \longarg{mfirstuc-protection} switch on (the default
behaviour), \bibgls\ will automatically insert an empty group at the
start of the \field{long} field to guard against this problem. A
warning will be written to the transcript.

\argsection{no-mfirstuc-protection}

Switches off the \sty{mfirstuc} protection mechanism described
above.

\argsection{mfirstuc-math-protection}

This works in the same way as \longarg{mfirstuc-protection} but
guards against fields starting with inline maths
(\verb|$|\ldots\verb|$|). For example, if the \field{name} field
starts with \verb|$x$| and the glossary style automatically tries to
convert the first letter of the name to upper case, then this will
cause a problem.

With \longarg{mfirstuc-math-protection} set, \bibgls\ will
automatically insert an empty group at the start of the field and
write a warning in the transcript. This setting is on by default.

\argsection{no-mfirstuc-math-protection}

Switches off the above.

\argsection{nested-link-check}

By default, \bibgls\ will parse certain fields for potential nested links.
(See the section \qt{Nested Links} in the \sty{glossaries-extra}
user manual.)

The default set of fields to check are: \field{name}, \field{text},
\field{plural}, \field{first}, \field{firstplural}, \field{long},
\field{longplural}, \field{short}, \field{shortplural} and
\field{symbol}.

You can change this set of fields using
\longarg{nested-link-check} \meta{value} where \meta{value} may be
\optfmt{none} (don't parse any of the fields) or a comma-separated
list of fields to be checked.

\argsection{no-nested-link-check}

Equivalent to \longarg{nested-link-check} \optfmt{none}.

\argsection{shortcuts}

Some entries may reference another entry within a field, using
commands like \idx{gls}, so \bibgls\ parses the fields for these
commands to determine dependent entries to allow them to be selected
even if they haven't been used within the document.
The \styopt{shortcuts} package option provided by
\styfmt{glossaries-extra} defines various synonyms, such as \idx{ac}
which is equivalent to \idx{gls}. By default the value of the
\styopt{shortcuts} option will be picked up by \bibgls\ when parsing the
\ext{aux} file. This then allows \bibgls\ to additionally search for
those shortcut commands while parsing the fields.

You can override the \styopt{shortcuts} setting using
\longarg{shortcuts} \meta{value} (where \meta{value} may take
any of the allowed values for the \styopt{shortcuts} package option), 
but in general there is little need to use this switch.

\argsection{map-format}

This sets up the rule of precedence for partial location
matches (see \sectionref{sec:locationopts}). For example, 
\begin{verbatim}
bib2gls --map-format "emph:hyperbf" mydoc
\end{verbatim}
This essentially means that if there's a record conflict
involving \code{emph}, try replacing \code{emph} with
\code{hyperbf} and see if that resolves the conflict.

Note that if the conflict includes a range formation, the
range takes precedence.

If you have multiple mappings, you can either use a single
\longarg{map-format} with a comma separated list of
\meta{format1}\dcolon\meta{format2} or you can have multiple instances of 
\longarg{map-format} \meta{format1}\dcolon\meta{format2}.

Note that the mapping tests are applied as the records are
read. For example, suppose the records are listed in the \ext{aux}
file as:
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{emph}{3}
\glsxtr@record{gls.sample}{}{page}{hypersf}{3}
\glsxtr@record{gls.sample}{}{page}{hyperbf}{3}
\end{verbatim}
and \bibgls\ is invoked with
\begin{verbatim}
bib2gls --map-format "emph:hyperbf,hypersf:hyperit" mydoc
\end{verbatim}
or
\begin{verbatim}
bib2gls --map-format emph:hyperbf --map-format hypersf:hyperit mydoc
\end{verbatim}
then \bibgls\ will process these records as follows:
\begin{enumerate}
\item Accept the first record (\code{emph}) since there's
currently no conflict. (This is the first record for page~3 for the
entry given by \code{gls.sample}.)
\item The second record (\code{hypersf}) conflicts 
with the existing record (\code{emph}). Neither has
the format \code{glsnumberformat} or \code{glsignore} so \bibgls\ consults
the mappings provided by \longargfmt{map-format}.
\begin{itemize}
\item The \code{hypersf} format (from the new record) is mapped to \code{hyperit},
so \bibgls\ checks if the existing record
has this format. In this case it doesn't (the format is
\code{emph}). So \bibgls\ moves on to the next test:

\item The \code{emph} format (from the existing record) is mapped to \code{hyperbf},
so \bibgls\ checks if the new record has this format.
In this case it doesn't (the format is \code{hypersf}).

Since the provided mappings haven't resolved this conflict,
the new record is discarded with a warning. Note that there's 
no look ahead to the next record. (There may be other 
records for other entries also used on page~3 interspersed between these records.)
\end{itemize}
\item The third record (\code{hyperbf}) conflicts 
with the existing record (\code{emph}). Neither has
the format \code{glsnumberformat} or \code{glsignore} so \bibgls\ again consults
the mappings provided by \longargfmt{map-format}.
\begin{itemize}
\item  The new record's \code{hyperbf} format has no mapping provided,
so \bibgls\ moves on to the next test:

\item The existing record's \code{emph} format has a mapping
provided (\code{hyperbf}). This matches the new record's format,
so the new record takes precedence.

This means that the location list ends up with the \code{hyperbf}
location for page~3.
\end{itemize}
\end{enumerate}

If, on the other hand, the mappings are given as
\begin{verbatim}
--map-format "emph:hyperit,hypersf:hyperit,hyperbf:hyperit"
\end{verbatim}
then all the three conflicting records (\code{emph},
\code{hypersf} and \code{hyperbf}) will end up being replaced
by a single record with \code{hyperit} as the format.

Multiple conflicts will typically be rare as there's usually little
reason for more than two or three different location formats within
the same list. (For example, \code{glsnumberformat} as the default
and \code{hyperbf} or \code{hyperit} for a primary reference.)

\argsection{group}

The \styfmt{glossaries-extra} \styopt{record} package option automatically creates a new field
called \field{group}. If the \longarg{group} switch is used then, when
sorting, \bibgls\ will try to determine the letter group for each
entry and add it to the \field{group} field.  (Some \csopt{sort}
options ignore this setting.) This value will be picked up by
\idx{printunsrtglossary} if group headings are required (for
example with the \glostyle{indexgroup} style). If you're not using
a glossary style that displays the group headings, there's no need
to use this switch. Note that this switch doesn't automatically
select an appropriate glossary style.

There are four basic types of groups:
\begin{itemize}
\item \idxpl{lettergroup} where the group title indicates the
first letter of all the sort values within that group.
The group title is set with \csref{bibglslettergroup}.
If the sort value is empty then no group is assigned to that entry.

\item \idxpl{nonlettergroup} (or \idxpl{symbolgroup})
where the first characters of all the sort values within that group
are non-alphabetical. The group title is set with \csref{bibglsothergroup}.

\item \idxpl{numbergroup} for all entries sorted by a numeric
comparison (such as \csopt[integer]{sort}). 
The group title is set with \csref{bibglsnumbergroup}.

\item \idxpl{customgroup} for all entries that have had the
group title explicitly set using the \csopt[\meta{title}]{group} 
resource option.
\end{itemize}

The letter group titles will typically have the first character
converted to upper case for the alphabet sort methods
(\tableref{tab:sortoptionsrule}). A \qt{letter} may not necessarily
be a single character (depending on the sort rule), but may be
composed of multiple characters, such as a \idx{digraph} (two
characters) or \idx{trigraph} (three characters).

For example, if the sort rule recognises the digraph \qt{dz} as a
letter, then it will be converted to \qt{Dz} for the group title. 
There are some exceptions to this. For example, the Dutch digraph 
\qt{ij} should be \qt{IJ} rather than \qt{Ij}. This is indicated 
by the following line in the \langxml:
\begin{verbatim}
<entry key="grouptitle.case.ij">IJ</entry>
\end{verbatim}
If there isn't a \code{grouptitle.case.\meta{lc}} key (where 
\meta{lc} is the lower case version), then only the first character
will be converted to upper case otherwise the value supplied by the
resource file is used. This resource key is only checked for
the locale and custom rule comparisons. If the initial part of
the sort value isn't recognised as a letter according to the sort rule, 
then the entry will be in a non-letter group (even if the character
is alphabetical).

The locale-independent character code comparisons (such as
\csopt[letter-nocase]{sort}) only select the first character of the
sort value for the group. If the character is
alphabetical\footnote{according to Java's
\code{Character.isAlphabetic(int)} method} then it will be a
letter group otherwise it's a non-letter group.  The
case-insensitive ordering (such as \csopt[letter-nocase]{sort})
will convert the letter group character to upper case. The
case-sensitive ordering (such as \csopt[letter-case]{sort}) won't
change the case.

Glossary styles with navigational links to groups (such as
\glostyle{indexhypergroup}) require an extra run for the ordinary
\csfmt{makeglossaries} and \csfmt{makenoidxglossaries} methods. For
example, for the document \filefmt{myDoc.tex}:
\begin{verbatim}
pdflatex myDoc
makeglossaries myDoc
pdflatex myDoc
pdflatex myDoc
\end{verbatim}
On the first \appfmt{pdflatex} call, there's no glossary. On the second
\appfmt{pdflatex}, there's a glossary but the glossary must be
processed to find the group information, which is written to the
\ext{aux} file as
\nosecformatdef{@gls@hypergroup}
The third \appfmt{pdflatex} reads this information and is then able
to create the navigation links.

With \bibgls, if the \optfmt{type} is provided (through the
\field{type} field or via options such as \csopt{type} and
\csopt{dual-type}) then this information can be determined when
\bibgls\ is ready to write the \ext{glstex} file, which means that
the extra \LaTeX\ run isn't necessary.

For example:
\begin{verbatim}
\documentclass{article}
\usepackage[colorlinks]{hyperref}
\usepackage[record,abbreviations,style=indexhypergroup]{glossaries-extra}

\GlsXtrLoadResources[src={entries},% data in entries.bib
  type={main}% put these entries in the 'main' glossary
]

\GlsXtrLoadResources[src={abbrvs},% data in abbrvs.bib
  type={abbreviations}% put these entries in the 'abbreviations' glossary
]
\end{verbatim}
Here the \csopt{type} is set and \bibgls\ can detect that
\sty{hyperref} has been loaded, so if the \longargfmt{group} switch
is used, then the group hyperlinks can be set (using
\csref{bibglshypergroup}). This means that the build process is
just:
\begin{verbatim}
pdflatex myDoc
bibtex --group myDoc
pdflatex myDoc
\end{verbatim}
Note that this requires \sty{glossaries} v4.32+. If your version of
\sty{glossaries} is too old then \bibgls\ can't override
the default behaviour of \sty{glossary-hypernav}'s
\idx{glsnavhypertarget}.

If \sty{hyperref} isn't loaded or the \longargfmt{group} switch
isn't used or the \field{type} isn't set or your version of
\sty{glossaries} is too old, then the information isn't saved.

For example:
\begin{verbatim}
\documentclass{article}
\usepackage[colorlinks]{hyperref}
\usepackage[record,abbreviations,style=indexhypergroup]{glossaries-extra}

\GlsXtrLoadResources[src={entries}]% data in entries.bib

\GlsXtrLoadResources[src={abbrvs}]% data in abbrvs.bib
\end{verbatim}
This requires the build process:
\begin{verbatim}
pdflatex myDoc
bibtex --group myDoc
pdflatex myDoc
pdflatex myDoc
\end{verbatim}
because the group hyperlink information can't be determined by
\bibgls, so it's best to always set the \optfmt{type} if you want
hyper-group styles, and make sure you have an up-to-date version of 
\styfmt{glossaries} (and \styfmt{glossaries-extra}).

\argsection{no-group}

Don't use the \field{group} field. (Default.)
The glossary won't have groups even if a group style, such as
\glostyle{indexgroup}, is used.

\argsection{tex-encoding}

\bibgls\ tries to determine the character encoding to use for the
output files. If the document has loaded the \sty{inputenc} package then
\bibgls\ can obtain the value of the encoding from the
\ext{aux} file. This then needs to be converted to a name
recognised by Java. For example, \code{utf8} will be mapped to
\code{UTF-8}. If the \sty{fontspec} package has been loaded,
\styfmt{glossaries-extra} will assume the encoding is \code{utf8} and
write that value to the \ext{aux} file.

If neither package has been loaded, \bibgls\ will assume the
operating system's default encoding. If this is incorrect or if
\bibgls\ can't work out the appropriate mapping then you can specify
the correct encoding using \longargfmt{tex-encoding} \meta{name}
where \meta{name} is the encoding name.

\argsection{no-expand-fields}

By default, \gls{newglossaryentry} expands field values
(except for \field{name}, \field{symbol} and \field{description}).
This is useful if constructing field values programmatically
(for example in a loop) but can cause a problem if certain fragile
commands are included in the field. 

The switch \longarg{no-expand-fields} makes \bibgls\ write
\idx{glsnoexpandfields} to the \ext{glstex} file, which
switches off the expansion.  Since \bibgls\ is simply
fetching the data from \ext{bib} files, it's unlikely 
that this automatic expansion is required and since it can
also be problematic this option is on by default. You can
switch it off with \longarg{expand-fields}.

\argsection{expand-fields}

Don't write \idx{glsnoexpandfields} to the \ext{glstex} file,
allowing fields to expand when the entries are defined.
Remember that this doesn't include the \field{name}, \field{symbol}
or \field{description} fields, which need to have their
expansion switched on with
\nosecformatdef{glssetexpandfield}\margm{field}

\argsection{trim-fields}

Trim leading and trailing spaces from field values. For example,
if the \ext{bib} file contains:
\begin{verbatim}
@entry{sample,
  name = { sample },
  description = {
    an example
  }
}
\end{verbatim}
This will cause spurious spaces. Using \longarg{trim-fields} will
automatically trim the values before writing the \ext{glstex} file.

\argsection{no-trim-fields}

Don't trim any leading or trailing spaces from field values. 
This is the default setting.

\argsection{record-count}

Switch on record counting. This will ensure that when each entry
is written to the \ext{glstex} file, \gls{bib2gls} will additionally
set the following fields
\begin{itemize}
\item \field{recordcount}: set to the total
number of records found for the entry;
\item \field{recordcount.counter}: set to the total
number of records found for the entry for the given counter.
\end{itemize}
These fields can then be used with the \idx{rgls}-like
commands provided by \sty{glossaries-extra} v1.21+.
The default behaviour of \idx{rgls}\margm{label}\oarg{insert} is to check
the \field{recordcount} field against the \catattr{recordcount}
attribute value. This attribute can be set with
\nosecdef{GlsXtrSetRecordCountAttribute}
where \meta{category list} is a comma-separated list
of category labels and \meta{value} is a positive integer.
If the value of the \field{recordcount} field is greater than
\meta{value} then \idx{rgls} behaves like \idx{gls}, otherwise
it does \idx{rglsformat}\marg{label}\marg{insert} instead.
If the use of \idx{rglsformat} is triggered in this way,
then \idx{rgls} writes a record to the \ext{aux} file
with the \glsopt{format} set to \idx{glstriggerrecordformat}.
This ensures that the record count is correct on the next run,
but the record isn't added to the location list as
\bibgls\ recognises it as a special ignored location.
Note that the entry will still appear in the usual glossary unless
you assign it to a different one with \csopt{trigger-type}.

If the \catattr{recordcount} attribute hasn't been set
\idx{rgls} behaves like \idx{gls}. (That is, \idx{rgls}
uses the same internal command used by \idx{gls}.) You can use
\idx{glsxtrenablerecordcount} to redefine \idx{gls}
to \idx{rgls}, so that you can continue to use \idx{gls}
without having to switch command name.

For example:
\begin{verbatim}
\newignoredglossary{ignored}

\GlsXtrLoadResources[
 src=abbrevs,% entries defined in abbrevs.bib
 trigger-type=ignored,
 category=abbreviation
]

\glsxtrenablerecordcount
\GlsXtrSetRecordCountAttribute{abbreviation}{1}
\end{verbatim}
See the \sty{glossaries-extra} user manual for further details.

\argsection{no-record-count}

Switch off record counting. (Default.)

\argsection{record-count-unit}

Automatically implements \gls{record-count} and additionally
sets the \field{recordcount.counter.location} fields.
These fields can then be used with the \idx{rgls}-like
commands provided by \sty{glossaries-extra} v1.21+.

\argsection{no-record-count-unit}

Switches off unit record counting. (Default.)
Note that you need \gls{no-record-count} to completely
switch off record counting.

\chapter{\ext{bib} Format}
\label{sec:bib}
\setcounter{secnumdepth}{1}

\bibgls\ recognises certain entry types. Any unrecognised types will
be ignored and a warning will be written to the transcript file.
Entries are defined in the usual \ext{bib} format:
\begin{alltt}
@\meta{entry-type}\marg{\meta{id},
  \meta{field-name-1} = \margm{text},
  ...
  \meta{field-name-n} = \margm{text}
}
\end{alltt}
where \meta{entry-type} is the entry type (listed below),
\meta{field-name-1}, \ldots, \meta{field-name-n} are the field names and
\meta{id} is a unique label. The label can't contain any spaces or
commas. In general it's best to stick with alpha-numeric labels.
The field values may be delimited by braces \margm{text} or
double-quotes \code{"\meta{text}"}.

The \csopt{label-prefix} option can be used to instruct \bibgls\ to
insert prefixes to the labels (\meta{id}) when the data is read.
Remember to use these prefixes when you reference the entries in the
document, but don't include them when you reference them in the
\ext{bib} file.  There are some special prefixes that have a
particular meaning to \bibgls: \qt{\idprefix{dual}} and
\qt{\idprefix{extn}} where \meta{n} is a positive integer.
In the first case, \idprefix{dual} references the dual element of a
dual entry (see \atentry{dualentry}). This prefix will be
replaced by the value of the \csopt{dual-prefix} option. The
\idprefix{extn} prefix is used to reference an entry from a
different set of resources (loaded by another
\gls{GlsXtrLoadResources} command). This prefix is replaced by the
corresponding element of the list supplied by \csopt{ext-prefixes}.

In the event that the \field{sort} value falls back on the label,
the original label supplied in the \ext{bib} file is used, not the
prefixed label.

Avoid non-ASCII characters in the \meta{id} if your document uses the 
\sty{inputenc} package.
You can set the character encoding in the \ext{bib} file using:
\begin{alltt}
\% Encoding: \meta{encoding-name}
\end{alltt}
where \meta{encoding-name} is the name of the character encoding.
For example:
\begin{verbatim}
% Encoding: UTF-8
\end{verbatim}
You can also set the encoding using the \csopt{charset} option,
but it's simpler to include the above comment on the first line of
the \ext{bib} file. (This comment is also searched for by JabRef
to determine the encoding, so it works for both applications.) 
If you don't use either method \bibgls\ will
have to search the entire \ext{bib} file, which is inefficient and
you may end up with a mismatched encoding.

\section{Fields}
\label{sec:fields}

Each entry type may have required fields, optional fields and
ignored fields. These are set using a \keyvallist\ within
\code{@\meta{entry-type}\marg{\meta{id},\meta{fields}}} in the
\ext{bib} file. Most keys recognised by
\gls{newglossaryentry} may be used as a field.

Predefined fields for use in \ext{bib} files are listed in
Tables~\ref{tab:fields}, \ref{tab:bib2glsfields},
\ref{tab:prefixfields} and~\ref{tab:accsuppfields}.  If you add any
custom keys in your document using \idx{glsaddkey} or
\idx{glsaddstoragekey}, those commands must be placed before the
first use of \gls{GlsXtrLoadResources} to ensure that \bibgls\
recognises them as a field name. 

Fields that may be set by \bibgls\ when it creates the \ext{glstex}
files are listed in Table~\ref{tab:internalfields}. These typically
shouldn't be set in the \ext{bib} file (although you may need
\field{sort} for cases where \bibgls\ doesn't recognise any of the
commands in the \field{name} field). Some of these fields can be set
for a particular document using a resource option, such as
\csopt{type} or \csopt{category}.

There are also some fields that are set and used by 
\styfmt{glossaries} or \styfmt{glossaries-extra} listed in
Table~\ref{tab:baseinternalfields} that are unrecognised by \bibgls.
In most cases these fields don't have a designated key and are only
intended for internal use by the \styfmt{glossaries} or
\styfmt{glossaries-extra} package.

Any unrecognised fields will be ignored by \bibgls. This is more convenient
than using \idx{input} or \idx{loadglsentries}, which requires all the
keys used in the file to be defined, regardless of whether or not
you actually need them in the document.

If an optional field is missing and \bibgls\ needs to access it for
some reason (for example, for sorting), \bibgls\ will try to
fallback on another value. The actual fallback value depends on the
entry type.

Other entries can be cross-referenced using the \field{see},
\field{seealso} or \field{alias} fields or
by using commands like \idx{gls} or \idx{glsxtrp} in any of the
recognised fields. These will automatically be selected if the
\csopt{selection} setting includes dependencies, but you may need to
rebuild the document to ensure the location lists are correct.  Use
of the \idx{glssee} command will create an ignored location and the
\field{see} field will be set to the relevant information.  If an
entry has the \field{see} field already set, any instance of
\idx{glssee} in the document for that entry will be appended to the
\field{see} field (provided you have at least v1.14 of
\sty{glossaries-extra}). In general, it's best just to use the
\field{see} field and not use \idx{glssee}.

The \field{seealso} key was only added to \sty{glossaries-extra}
v1.16, but this field may be used with \bibgls\ even if you only
have version 1.14 or 1.15. If the key isn't available,
\code{seealso=\margm{xr-list}} will be treated as
\code{see=\marg{[\idx{seealsoname}]\meta{xr-list}}} (the resource
option \csopt{seealso} won't have an effect).  You can't use both
\field{see} and \field{seealso} for the same entry with \bibgls.
Note that the \field{seealso} field doesn't allow for the optional
\oargm{tag} part. If you need a different tag, either use \field{see}
or change the definition of \idx{seealsoname} or
\idx{glsxtruseseealsoformat}.  Note that, unless you are using
\idx{xindy}, \idx{glsxtrindexseealso} just does
\idx{glssee}\oarg{\idx{seealsoname}}, and so will be treated as \field{see}
rather than \field{seealso} by \bibgls. Again, it's better to just
use the \field{seealso} field directly.

\begin{table}[hbtp]
\caption{Fields Provided by \styfmt{glossaries-extra}}\label{tab:fields}
\medskip
\centering
\printfields{basefield,extrafield}%
\end{table}

\begin{table}[hbtp]
\caption{Fields Provided by \bibgls}\label{tab:bib2glsfields}
\medskip
\centering
\printfields{bib2glsfield}%
\end{table}

\begin{table}[hbtp]
\caption[Fields Provided by \styfmt{glossaries-prefix}]{Fields Provided by \sty{glossaries-prefix}}\label{tab:prefixfields}
\medskip
\centering
\printfields{prefixfield}%
\end{table}

\begin{table}[hbtp]
\caption[Fields Provided by \styfmt{glossaries-accsupp}]{Fields Provided by \sty{glossaries-accsupp}}
\label{tab:accsuppfields}
\medskip
{\centering
\printfields{accessfield}%
\par}
\medskip
Don't load \sty{glossaries-accsupp} directly (with \csfmt{usepackage}) when using
\styfmt{glossaries-extra}. Load using the \styopt{accsupp} package
option instead.
\begin{verbatim}
\usepackage[record,accsupp]{glossaries-extra}
\end{verbatim}
\end{table}

\begin{table}[hbtp]
\caption[Fields Set by \bibgls]{Fields Sometimes Set by \bibgls\ in the \ext{glstex} File}
\label{tab:internalfields}
\centering
\medskip
\begin{tabular}{l>{\raggedright}p{.75\linewidth}}
\bfseries Field & \bfseries Description\tabularnewline
\fielddef{childcount} & Stores the number of children this entry has
had selected.\tabularnewline
\fielddef{counter} & The default counter used for indexing (assigned by
the \csopt{counter} option).\tabularnewline
\fielddef{group} & The letter group determined by the comparator
(or assigned by the \csopt{group} option).\tabularnewline
\fielddef{location} & The typeset location list. \tabularnewline
\fielddef{loclist} & The internal list of locations.\tabularnewline
\fielddef{recordcount} & Used with record counting to store the 
total record count.\tabularnewline
\fielddef{recordcount.counter} & Used with record counting to store the 
total number of records for a given counter.\tabularnewline
\fielddef{recordcount.counter.location} & Used with record counting to store the 
total number of records for a given location.\tabularnewline
\fielddef{secondarygroup} & The letter group determined by the
comparator used with the \csopt{secondary} sort.\tabularnewline
\fielddef{secondarysort} & The sort value determined by the
comparator used with the \csopt{secondary} sort.\tabularnewline
\fielddef{sort} & The sort value obtained by the
comparator.\tabularnewline
\fielddef{type} & The glossary this entry belongs to (assigned by
the \csopt{type} option).
\end{tabular}
\end{table}

\begin{table}[hbtp]
\caption[Internal Fields Set by \styfmt{glossaries} or \styfmt{glossaries-extra}]{Internal Fields Set by \styfmt{glossaries} or \styfmt{glossaries-extra}
(don't use in \ext{bib} files)}\label{tab:baseinternalfields}
\centering
\medskip
\begin{tabular}{ll}
\bfseries Field & \bfseries Description\\
\fielddef{currcount} & Used with entry counting to store the current
total\\
\fielddef{currcountunit} & Used with unit entry counting
(\styfmt{glossaries-extra}).\\
\fielddef{desc} & Corresponds to \fieldfmt{description} key.\\
\fielddef{descplural} & Corresponds to \fieldfmt{descriptionplural} key.\\
\fielddef{firstpl} & Corresponds to \fieldfmt{firstplural} key.\\
\fielddef{flag} & Boolean that determines if an entry has been
used.\\
\fielddef{index} & The main part of the indexing code
(\idx!{makeindex} or \idx!{xindy}).\\
\fielddef{level} & Hierarchical level.\\
\fielddef{longpl} & Corresponds to \fieldfmt{longplural} key.\\
\fielddef{nonumberlist} & Used to suppress the location list for a
specific entry.\\
\fielddef{prevcount} & Used with entry counting to store the 
total from the previous run.\\
\fielddef{prevcountunit} & Used with unit entry counting
(\styfmt{glossaries-extra}).\\
\fielddef{prevunitmax} & Used with unit entry counting
(\styfmt{glossaries-extra}).\\
\fielddef{prevunittotal} & Used with unit entry counting
(\styfmt{glossaries-extra}).\\
\fielddef{shortpl} & Corresponds to \fieldfmt{shortplural} key.\\
\fielddef{sortvalue} & Original \fieldfmt{sort} value (before sanitizing and
escaping special characters).\\
\fielddef{unitlist} & Used with unit entry counting
(\styfmt{glossaries-extra}).\\
\fielddef{useri} & Corresponds to \fieldfmt{user1} key.\\
\fielddef{userii} & Corresponds to \fieldfmt{user2} key.\\
\fielddef{useriii} & Corresponds to \fieldfmt{user3} key.\\
\fielddef{useriv} & Corresponds to \fieldfmt{user4} key.\\
\fielddef{userv} & Corresponds to \fieldfmt{user5} key.\\
\fielddef{uservi} & Corresponds to \fieldfmt{user6} key.
\end{tabular}
\end{table}

\clearpage

\section{Standard Entry Types}
\label{sec:standardentry}

\entrysection{string}

The standard \atentry{string} is available and can be used to define
variables that may be used in field values.
For example:
\begin{verbatim}
@string{ssi={server-side includes}}
@string{html={hypertext markup language}}

@abbreviation{shtml,
  short="shtml",
  long= ssi # " enabled " # html,
  see={ssi,html}
}

@abbreviation{html,
  short ="html",
  long  = html
}

@abbreviation{ssi,
  short="ssi",
  long = ssi
}
\end{verbatim}

\entrysection{preamble}

The standard \atentry{preamble} is available and can be used to
provide command definitions used within field values.
For example:
\begin{verbatim}
@preamble{"\providecommand{\mtx}[1]{\boldsymbol{#1}}"}

@entry{matrix,
  name={matrix},
  plural={matrices},
  description={rectangular array of values, denoted $\mtx{M}$}
}
\end{verbatim}

The \TeX\ parser library used by \bibgls\ will parse the contents of
\atentry{preamble} before trying to interpret the field value used
as a fallback when \field{sort} is omitted (unless
\csopt[false]{interpret-preamble} is set in the resource options).
For example:
\begin{verbatim}
@preamble{"\providecommand{\set}[1]{\mathcal{#1}}
\providecommand{\card}[1]{|\set{#1}|}"}

@entry{S,
  name={{}$\set{S}$},
  text={\set{S}},
  description={a set}
}
@entry{card,
  name={{}$\card{S}$},
  text={\card{S}},
  description={the cardinality of \gls{S}}
}
\end{verbatim}
Neither entry has the \field{sort} field, so \bibgls\ has to fall
back on the \field{name} field and, since this contains the special
characters \verb|\| \verb|$| \verb|{| and \verb|}|, the \TeX\ parser
library is used to interpret it. The definitions provided by
\atentry{preamble} allow \bibgls\ to deduce that the \field{sort}
value of the \code{S} entry is just \code{S} and the \field{sort}
value of the \code{card} entry is \verb"|S|" (see
\sectionref{sec:texparserlib}).

What happens if you also need to use these commands in the document?
The definitions provided in \atentry{preamble} won't be available
until the \ext{glstex} file has been created, which means the
commands won't be defined on the first \LaTeX\ run.

There are several approaches:
\begin{enumerate}
\item Just define the commands in the document. This means the
commands are available, but \bibgls\ won't be able to correctly
interpret the \field{name} fields.

\item Define the commands in both the document and in
\atentry{preamble}. For example:
\begin{verbatim}
\newcommand{\set}[1]{\mathcal{#1}}
\newcommand{\card}[1]{|\set{#1}|}
\GlsXtrLoadResources[src={my-data}]
\end{verbatim}
Alternatively:
\begin{verbatim}
\GlsXtrLoadResources[src={my-data}]
\providecommand{\set}[1]{\mathcal{#1}}
\providecommand{\card}[1]{|\set{#1}|}
\end{verbatim}
If the provided definitions match those given in the \ext{bib} file,
there's no difference. If they don't match then in the first example 
the document definitions will take precedence (but the interpreter
will use the \atentry{preamble} definitions) and in the second
example the \atentry{preamble} definitions will take precedence.

\item Make use of \gls{glsxtrfmt} provided by
\styfmt{glossaries-extra}\footnote{Introduced in version 1.12.}\ which
allows you to store the name of the formatting command in a field.
The default is the \field{user1} field, but this can be changed to 
another field by redefining \idx{GlsXtrFmtField}.

The \ext{bib} file can now look like this:
\begin{verbatim}
@preamble{"\providecommand{\set}[1]{\mathcal{#1}}
\providecommand{\card}[1]{|\set{#1}|}"}

@symbol{S,
  name={{}$\set{S}$},
  text={\set{S}},
  user1={set},
  description={a set}
}
@symbol{cardS,
  name={{}$\card{S}$},
  text={\card{S}},
  user1={card},
  description={the cardinality of \gls{S}}
}
\end{verbatim}
Within the document, you can format \meta{text} using the formatting
command provided in the \field{user1} field with:
\nosecformatdef{glsxtrfmt}
(which internally uses \idx{glslink}) or
\nosecformatdef{glsxtrentryfmt}
which just applies the appropriate formatting command to
\meta{text}. If the entry given by \meta{label} hasn't been defined,
then this just does \meta{text} and a warning is issued. (It 
just does \meta{text} without a warning if the field hasn't been set.)
The \meta{options} are as for \idx{glslink} but \idx{glslink} will
actually be using
\begin{alltt}
\idx{glslink}\oarg{\meta{def-options},\meta{options}}\margm{label}\marg{\csfmt{}\meta{csname}\margm{text}}
\end{alltt}
where the default options \meta{def-options} are given by
\idx{GlsXtrFmtDefaultOptions}. The default definition of this is
just \code{noindex} which suppresses the automatic indexing or
recording action. (See the \sty{glossaries-extra} manual
for further details.)

This means that the document doesn't need to actually provide
\verb|\set| or \verb|\card| but can instead use, for example,
\begin{alltt}
\gls{glsxtrfmt}\marg{S}\marg{A}
\gls{glsxtrentryfmt}\marg{cardS}\marg{B}
\end{alltt}
instead of
\begin{verbatim}
\set{A}
\card{B}
\end{verbatim}
The first \LaTeX\ run will simply ignore the formatting and produce
a warning.

Since this is a bit cumbersome to write, you can provide shortcut
commands. For example:
\begin{verbatim}
\GlsXtrLoadResources[src={my-data}]
\newcommand{\gset}[2][]{\glsxtrfmt[#1]{S}{#2}}
\newcommand{\gcard}[2][]{\glsxtrfmt[#1]{cardS}{#2}}
\end{verbatim}
Whilst this doesn't seem a great deal different from simply
providing the definitions of \csfmt{set} and \csfmt{card} in the
document, this means you don't have to worry about remembering 
the names of the actual commands provided in the \ext{bib} file
(just the entry labels) and the use of \gls{glsxtrfmt} will
automatically produce a hyperlink to the glossary entry if the
\sty{hyperref} package has been loaded.
\end{enumerate}

Here's an alternative \ext{bib} that defines entries with a term, a
description and a symbol:
\begin{verbatim}
@preamble{"\providecommand{\setfmt}[1]{\mathcal{#1}}
\providecommand{\cardfmt}[1]{|\setfmt{#1}|}"}

@entry{set,
  name={set},
  symbol={\setfmt{S}},
  user1={setfmt},
  description={collection of values}
}
@entry{cardinality,
  name={cardinality},
  symbol={\cardfmt{S}},
  user1={cardfmt},
  description={the number of elements in the \gls{set} $\glssymbol{set}$}
}
\end{verbatim}
I've changed the entry labels and the names of the formatting commands.
The definitions in the document need to reflect the change in label
but not the change in the formatting commands:
\begin{verbatim}
\newcommand{\gset}[2][]{\glsxtrfmt[#1]{set}{#2}}
\newcommand{\gcard}[2][]{\glsxtrfmt[#1]{cardinality}{#2}}
\end{verbatim}

Here's another approach that allows for a more complicated argument
for the cardinality. (For example, if the argument is an expression
involving set unions or intersections.)
The \ext{bib} file is now:
\begin{verbatim}
@preamble{"\providecommand{\setfmt}[1]{\mathcal{#1}}
\providecommand{\cardfmt}[1]{|#1|}"}

@entry{set,
  name={set},
  symbol={\setfmt{S}},
  user1={setfmt},
  description={collection of values}
}
@entry{cardinality,
  name={cardinality},
  symbol={\cardfmt{\setfmt{S}}},
  user1={cardfmt},
  description={the number of elements in the \gls{set} $\glssymbol{set}$}
}
\end{verbatim}
This has removed the \csfmt{setfmt} command from the definition of
\csfmt{cardfmt}. Now the definitions in the document:
\begin{verbatim}
\newcommand{\gset}[1]{\glsxtrentryfmt{set}{#1}}
\newcommand{\gcard}[2][]{\glsxtrfmt[#1]{cardinality}{#2}}
\end{verbatim}
This allows for code such as:
\begin{verbatim}
\[ \gcard{\gset{A} \cap \gset{B}} \]
\end{verbatim}
which will link back to the \code{cardinality} entry in the
glossary and avoids any hyperlinking with \csfmt{gset}.
Alternatively to avoid links with \csfmt{gcard} as well:
\begin{verbatim}
\newcommand{\gset}[1]{\glsxtrentryfmt{set}{#1}}
\newcommand{\gcard}[1]{\glsxtrentryfmt{cardinality}{#1}}
\end{verbatim}
Now \csfmt{gset} and \csfmt{gcard} are simply formatting commands,
but their actual definitions are determined in the \ext{bib} file.

\section{Single Entry Types}
\label{sec:singleentry}

The entry types described in this section create a single glossary
definition per entry (from \styfmt{glossaries-extra}'s point of view). 
For example
\begin{verbatim}
@entry{matrix,
  name={matrix},
  plural={matrices},
  description={rectangular array of values}
}
\end{verbatim}
is analogous to
\begin{verbatim}
\newglossaryentry{matrix}% label
{% fields
  name={matrix},
  plural={matrices},
  description={rectangular array of values}
}
\end{verbatim}
The \csopt{secondary} option allows the creation of a fake glossary
with the entry labels in its internal list in a different order.
This means that the same data can be displayed in two separate lists
without duplicating the resources required by each glossary entry.

\Sectionref{sec:dualentry} describes \bibgls\ entry types
that create two separate (but related) \styfmt{glossaries-extra}
definitions per \ext{bib} entry.

\entrysection{entry}

Regular terms are defined by the \atentry{entry} field. This requires the
\field{description} field and either \field{name} or \field{parent}.

For example:
\begin{verbatim}
@preamble{"\providecommand{\mtx}[1]{\boldsymbol{#1}}"}

@entry{matrix,
  name={matrix},
  plural={matrices},
  description={rectangular array of values, denoted \gls{M}},
  seealso={vector}
}

@entry{M,
  name={\ensuremath{M}},
  description={a \gls{matrix}}
}

@entry{vector,
  name = "vector",
  description = {column or row of values, denoted \gls{v}},
  seealso={matrix}
}

@entry{v,
  name={\ensuremath{\vec{v}}},
  description={a \gls{vector}}
}
\end{verbatim}
If the \field{name} field is omitted it will be set from the
parent's \field{name}. If the \field{sort} field is missing the
default is obtained from the \field{name} field.
(This can be overridden with \csopt{sort-field}.)

Terms defined using \atentry{entry} will be written to the output
(\ext{glstex}) file using the command \csref{bibglsnewentry}.

\entrysection{symbol}

The \atentry{symbol} entry type is much like \atentry{entry}, but it's
designed specifically for symbols, so in the previous example, the
\code{M} and \code{v} terms would be better defined using the
\atentry{symbol} entry type instead. For example:
\begin{verbatim}
@symbol{M,
  name={\ensuremath{M}},
  description={a \gls{matrix}}
}
\end{verbatim}

The required fields are \field{name} or \field{parent}. The
\field{description} field is required if the \field{name} field is
missing. If the \field{sort} field is omitted, the default sort is
given by the entry label. Note that this is different from
\atentry{entry} where the sort defaults to \field{name} if omitted.

Terms that are defined using \atentry{symbol} will be written to
the output file using the command \csref{bibglsnewsymbol}.

\entrysection{number}

The \atentry{number} entry type is like \atentry{symbol}, but it's for
numbers. The numbers don't have to be explicit digits and may have a
symbolic representation. There's no real difference between the
behaviour of \atentry{number} and \atentry{symbol} except that terms
defined using \atentry{number} will be written to the output file
using the command \csref{bibglsnewnumber}.

For example, the file \filefmt{constants.bib} might define
mathematical constants like this:
\begin{verbatim}
@number{pi,
   name={\ensuremath{\pi}},
   description={the ratio of the length of the circumference
    of a circle to its diameter},
   user1={3.14159}
}

@number{e,
  name={\ensuremath{e}},
  description={base of natural logarithms},
  user1={2.71828}
}
\end{verbatim}
This stores the approximate value in the \field{user1} field. This
can be used to sort the entries in numerical order according to the
values rather than the symbols:
\begin{verbatim}
\GlsXtrLoadResources[
  src={constants},% constants.bib
  category={number},% set the category for all selected entries
  sort={double},% numerical double-precision sort
  sort-field={user1}% sort according to 'user1' field
]
\end{verbatim}
The \csopt[number]{category} option makes it easy to adjust the
glossary format to include the \field{user1} field:
\begin{verbatim}
\renewcommand{\glsxtrpostdescnumber}{%
  \ifglshasfield{useri}{\glscurrententrylabel}
  { (approximate value: \glscurrentfieldvalue)}%
  {}%
}
\end{verbatim}

\entrysection{index}

The \atentry{index} entry type is designed for entries that don't
have a description. Only the label is required. If \field{name} is
omitted, it's assumed to be the same as the label, even if
\field{parent} is present. (Note this is different to the fallback
behaviour of \atentry{entry}, which fetches the name from the parent
entry.) However, this means that if the name contains any characters
that can't be used in the label, you will need the \field{name}
field. If the \field{sort} field is missing the
default is obtained from the \field{name} field.

Example:
\begin{verbatim}
@index{duck}

@index{goose,plural={geese}}

@index{sealion,name={sea lion}}

@index{facade,name={fa\c{c}ade}}
\end{verbatim}

Terms that are defined using \atentry{index} will be written to the output
file using the command \csref{bibglsnewindex}.

\entrysection{abbreviation}

The \atentry{abbreviation} entry type is designed for abbreviations.
The required fields are \field{short} and \field{long}. If the
\field{sort} key is missing, \bibgls\ will use the field given by
\csopt{abbreviation-sort-fallback}, which defaults to the \field{short} field.
You can also use \csopt{short-case-change} to convert the case of
the \field{short} field.

If you use \csopt[name]{sort-field}, then the fallback for the
\field{name} field is always the \field{short} field, regardless of
the \csopt{abbreviation-sort-fallback} setting.

Note that you must set the abbreviation style before loading the
resource file to ensure that the abbreviations are defined
correctly, however \bibgls\ has no knowledge of the abbreviation
style so it doesn't know if the \field{description} field must be
included or if the default \field{sort} value isn't simply the value
of the \field{short} field.

You can instruct \bibgls\ to sort by the \field{long} field instead
using \csopt[long]{abbreviation-sort-fallback}. You can also tell \bibgls\ to
ignore certain fields using \csopt{ignore-fields}, so you can
include a \field{description} field in the \ext{bib} file if
you sometimes need it, and then instruct \bibgls\ to ignore it when
you don't want it.

For example:
\begin{verbatim}
@abbreviation{html,
  short ="html",
  long  = {hypertext markup language},
  description={a markup language for creating web pages}
}
\end{verbatim}
If you want the \abbrstyle{long-noshort-desc} style, then you can put
the following in your document (where the \ext{bib} file is called
\filefmt{entries-abbrv.bib}):
\begin{verbatim}
\setabbreviationstyle{long-noshort-desc}
\GlsXtrLoadResources[src={entries-abbrv.bib},
 abbreviation-sort-fallback={long}]
\end{verbatim}
Whereas, if you want the \abbrstyle{long-short-sc} style, then you can
instead do:
\begin{verbatim}
\setabbreviationstyle{long-short-sc}
\GlsXtrLoadResources[src={entries-abbrv.bib},ignore-fields={description}]
\end{verbatim}
or to convert the short value to upper case and use the
\abbrstyle{long-short-sm} style instead:
\begin{verbatim}
\setabbreviationstyle{long-short-sm}
\GlsXtrLoadResources[src={entries-abbrv.bib},
 short-case-change={uc},% convert short value to upper case
 ignore-fields={description}]
\end{verbatim}
(If you want an equivalent of \csfmt{newdualentry}, use
\atentry{dualabbreviationentry} instead.)

Terms defined using \atentry{abbreviation} will be written to the output
file using the command \csref{bibglsnewabbreviation}.

\entrysection{acronym}

The \atentry{acronym} entry type is like \atentry{abbreviation} except that
the term is written to the output file using the command
\csref{bibglsnewacronym}.

\section{Dual Entry Types}
\label{sec:dualentry}

The entry types described in this section create two separate (but
related) \styfmt{glossaries-extra} entry definitions per \ext{bib}
entry. The first of these entries is considered the
\idx{primary} entry, and the second is the \idx{dual} entry
(also referred to as the \idx{secondary} entry, but is not
related to the \csopt{secondary} option). The naming scheme is
\code{@dual}\meta{entry-type} where both the primary and dual are
considered to have the same type of entry (such as
\atentry{dualsymbol} where both the primary and dual are
functionally like \atentry{symbol}) or
\code{@dual}\meta{primary}\meta{dual} where the primary
is functionally like \code{@}\meta{primary} and the dual is
functionally like \code{@}\meta{dual}.

For example
\begin{verbatim}
@dualabbreviationentry{svm,
  short = {SVM},
  long = {support vector machine},
  description = {statistical pattern recognition technique}
}
\end{verbatim}
is like
\begin{verbatim}
@abbreviation{svm,
  short = {SVM},
  long = {support vector machine},
}
@entry{dual.svm,
  text = {SVM},
  name = {support vector machine},
  description = {statistical pattern recognition technique}
}
\end{verbatim}
and is analogous to
\begin{verbatim}
\newabbreviation{svm}{SVM}{support vector machine}
\newglossaryentry{dual.svm}{name={support vector machine},text={SVM},
 description={statistical pattern recognition technique}}
\end{verbatim}
but both entries are considered dependent on each other. This means
that if you only reference the primary entry (using \idx{gls} etc)
then the dual entry will still be selected if the \csopt{selection}
setting includes dependencies.

The creation of the dual entry involves mapping or copying fields
from the primary entry. Each dual entry type has a set of mappings.
If a field in the set of mappings is missing, its fallback value is
used.  Any fields that aren't listed in the mappings are simply copied,
except for the \field{alias} field, which will never be copied to
the dual entry, nor can it be mapped. The alias will only apply to
the primary entry.  The dual entry is given the label
\meta{prefix}\meta{id} where \meta{prefix} is set by the
\csopt{dual-prefix} option and \meta{id} is the label supplied in
the \ext{bib} file.

If \csopt[combine]{dual-sort} then the dual entries will be sorted
along with the primary entries, otherwise the \csopt{dual-sort}
indicates how to sort the dual entries and the dual entries will be
appended to the end of the \ext{glstex} file. The
\csopt{dual-sort-field} determines what field to use for the sort
value if the dual entries should be sorted separately.

Take care if you have a mixture of entry types (such as 
\atentry{dualindexentry}, \atentry{dualindexsymbol} 
and \atentry{index}) and you're not
using the default \csopt[combine]{dual-sort}. Remember that the
primary entries are all sorted together along with the single
entries types described in \sectionref{sec:dualentry} (but they may
be assigned to different glossary types), and then the dual entries
are sorted together (but may be assigned to different glossary
types). This may result in an odd ordering if some of the primaries
and some of the duals are assigned to the same glossary. For
example, don't mix \atentry{dualindexabbreviation} (duals are
abbreviations) with \atentry{dualabbreviationentry} (primaries
are abbreviations) when you aren't using \csopt[combine]{dual-sort}
(unless you have two different glossaries for the primary vs dual
abbreviations).

Remember that \bibgls\ is designed to take advantage of
\idx{printunsrtglossary}, which simply iterates over all defined
entries in the order in which they were defined (or, more precisely,
the order of the internal list of entry labels associated with that
glossary). The aim of \bibgls\ is to write the entry definitions to
the \ext{glstex} file so that the internal list of labels is in the
appropriate order.

For example, suppose the file \filefmt{entries.bib} contains:
\begin{verbatim}
@index{aardvark}
@index{mouse}
@index{zebra}
@dualindexabbreviation{xml,
 short={XML},
 long={extensible markup language}
}
@dualabbreviationentry{ssi,
  short={SSI},
  long={server-side includes},
  description={directives placed in \gls{html} pages
   evaluated by the server}
}
@dualindexabbreviation{html,
 short={HTML},
 long={hypertext markup language}
}
@dualabbreviationentry{css,
 short={CSS},
 long={cascading stylesheets},
 description={a language that describes the style of an
  \gls{html} document}
}
\end{verbatim}
This contains a mixture of entry types, including
\atentry{dualindexabbreviation} (where the dual is the
abbreviation) and \atentry{dualabbreviationentry} (where the
primary is the abbreviation).

Now consider the following document:
\begin{verbatim}
\documentclass{article}

\usepackage[record,abbreviations]{glossaries-extra}

\GlsXtrLoadResources[selection=all,src=entries]

\begin{document}
\printunsrtglossaries
\end{document}
\end{verbatim}
This uses the default \csopt[combine]{sort}, so all the entries are
sorted together, resulting in the order: 
\code{aardvark},
\code{dual.css},
\code{css},
\code{html},
\code{dual.html},
\code{mouse},
\code{dual.ssi},
\code{ssi},
\code{xml},
\code{dual.xml},
\code{zebra}.

The \LaTeX\ code written to the \ext{glstex} file is essentially
(but not exactly):
\begin{verbatim}
% from @index{aardvark}:
\newglossaryentry{aardvark}{name={aardvark},description={}}

% dual of @dualabbreviationentry{css,...}:
\newglossaryentry{dual.css}{name={cascading stylesheets},text={CSS},
 description={a language that describes the style of an
  \glsxtrshort{html} document}}

% primary of @dualabbreviationentry{css,...}:
\newabbreviation{css}{CSS}{cascading stylesheets}

% primary of @dualindexabbreviation{html,...}:
\newglossaryentry{html}{name={HTML},description={}}

% dual of @dualindexabbreviation{html,...}:
\newabbreviation{dual.html}{HTML}{hypertext markup language}

% from @index{mouse}:
\newglossaryentry{mouse}{name={mouse},description={}}

% dual of @dualabbreviationentry{ssi,...}:
\newglossaryentry{dual.ssi}{name={server-side includes},text={SSI},
 description={directives placed in \glsxtrshort{html} pages
 evaluated by the server}}

% primary of @dualabbreviationentry{ssi,...}:
\newabbreviation{ssi}{SSI}{server-side includes}

% primary of @dualindexabbreviation{xml,...}:
\newglossaryentry{xml}{name={XML},description={}}

% dual of @dualindexabbreviation{xml,...}:
\newabbreviation{dual.xml}{XML}{extensible markup language}

% from @index{zebra}:
\newglossaryentry{zebra}{name={zebra},description={}}
\end{verbatim}
Since the document uses the \styopt{abbreviations} package option,
\gls{newabbreviation} automatically assigns the abbreviation 
to the \code{abbreviations} glossary (created through that package
option). This means that the \code{main} (default) glossary
contains the entries (in order): 
\begin{itemize}
\item \code{aardvark} (name: aardvark),
\item \code{dual.css} (name: cascading stylesheets), 
\item \code{html} (name: HTML),
\item \code{mouse} (name: mouse), 
\item \code{dual.ssi} (name: server-side includes), 
\item \code{xml} (name: XML),
\item \code{zebra} (name: zebra).
\end{itemize}
The \code{abbreviations} glossary contains:
\begin{itemize}
\item \code{css} (short: CSS), 
\item \code{dual.html} (short: HTML),
\item \code{ssi} (short: SSI), 
\item \code{dual.xml} (short: XML).
\end{itemize}

Since all the entries were combined and sorted together, the
resulting glossaries are both ordered alphabetically (using
\field{short} for the abbreviations and \field{name} for the rest),
but note that you need to take care when referencing the
abbreviations if you want to make use of the abbreviation style. You
need \verb|\gls{css}| and \verb|\gls{ssi}| for the primary
abbreviations created with \atentry{dualabbreviationentry} and
\verb|\gls{dual.html}| and \verb|\gls{dual.xml}| for the dual
abbreviations created with \atentry{dualindexabbreviation}. Also
the \field{name} of the primary\slash dual alternative of the
abbreviations is also inconsistent (short form for \code{html} and
\code{xml} and long form for \code{dual.css} and \code{dual.ssi}), 
as different field mappings are used.

If the document is changed so that the dual entries are now
sorted and written after all the primary entries have been dealt
with:
\begin{verbatim}
\GlsXtrLoadResources[
 src=entries,
 dual-sort={letter-nocase},
 selection=all
]
\end{verbatim}
then \bibgls\ first orders the primaries:
\begin{itemize}
\item \code{aardvark} (name: aardvark),
\item \code{css} (short: CSS),
\item \code{html} (name: HTML),
\item \code{mouse} (name: mouse),
\item \code{ssi} (short: SSI),
\item \code{xml} (name: XML),
\item \code{zebra} (name: zebra)
\end{itemize}
and writes them to the \ext{glstex} file
(functionally like):
\begin{verbatim}
% from @index{aardvark}:
\newglossaryentry{aardvark}{name={aardvark},description={}}

% primary of @dualabbreviationentry{css,...}:
\newabbreviation{css}{CSS}{cascading stylesheets}

% primary of @dualindexabbreviation{html,...}:
\newglossaryentry{html}{name={HTML},description={}}

% from @index{mouse}:
\newglossaryentry{mouse}{name={mouse},description={}}

% primary of @dualabbreviationentry{ssi,...}:
\newabbreviation{ssi}{SSI}{server-side includes}

% primary of @dualindexabbreviation{xml,...}:
\newglossaryentry{xml}{name={XML},description={}}

% from @index{zebra}:
\newglossaryentry{zebra}{name={zebra},description={}}
\end{verbatim}
Then \bibgls\ orders the duals:
\begin{itemize}
\item \code{dual.css} (name: cascading stylesheets),
\item \code{dual.html} (short: HTML),
\item \code{dual.ssi} (name: server-side includes),
\item \code{dual.xml} (short: XML)
\end{itemize}
and writes them to the \ext{glstex} file
(functionally like):
\begin{verbatim}
% dual of @dualabbreviationentry{css,...}:
\newglossaryentry{dual.css}{name={cascading stylesheets},text={CSS},
 description={a language that describes the style of an
  \glsxtrshort{html} document}}

% dual of @dualindexabbreviation{html,...}:
\newabbreviation{dual.html}{HTML}{hypertext markup language}

% dual of @dualabbreviationentry{ssi,...}:
\newglossaryentry{dual.ssi}{name={server-side includes},text={SSI},
 description={directives placed in \glsxtrshort{html} pages
 evaluated by the server}}

% dual of @dualindexabbreviation{xml,...}:
\newabbreviation{dual.xml}{XML}{extensible markup language}
\end{verbatim}
When the \ext{glstex} file is input (during the next \LaTeX\ run) 
the entries are defined in the order:
\begin{enumerate}
\item \code{aardvark} (type: \code{main}),
\item \code{css} (type: \code{abbreviations}),
\item \code{html} (type: \code{main}),
\item \code{mouse} (type: \code{main}),
\item \code{ssi} (type: \code{abbreviations}),
\item \code{xml} (type: \code{main}),
\item \code{zebra} (type: \code{main}),
\item \code{dual.css} (type: \code{main}),
\item \code{dual.html} (type: \code{abbreviations}),
\item \code{dual.ssi} (type: \code{main}),
\item \code{dual.xml} (type: \code{abbreviations}).
\end{enumerate}
This means that the \code{main} glossary's internal list is in the
order:
\begin{itemize}
\item \code{aardvark} (aardvark),
\item \code{html} (HTML),
\item \code{mouse} (mouse),
\item \code{xml} (XML),
\item \code{zebra} (zebra), 
\item \code{dual.css} (cascading stylesheets), 
\item \code{dual.ssi} (server-side includes)
\end{itemize}
and the \code{abbreviations} glossary's internal list is in the order:
\begin{itemize}
\item \code{css} (CSS),
\item \code{ssi} (SSI),
\item \code{dual.html} (HTML), 
\item \code{dual.xml} (XML).
\end{itemize}
The lists are no longer in alphabetical order as they have a mixture
of primary and dual entries that were separated before sorting.

The above is a fairly contrived example as it wouldn't make sense
in a real document to have glossary terms (that include a
description) mixed with index terms (that don't include a
description). 
A better solution would be to use 
\atentry{tertiaryindexabbreviationentry} instead of
\atentry{dualabbreviationentry}.

\entrysection{dualentry}

The \atentry{dualentry} entry type is similar to \atentry{entry} but
actually defines two entries.
The dual entry contains the same information as the primary entry
but some of the fields are swapped around.
The default mappings are:
\begin{itemize}
\item \field{name} $\mapsto$ \field{description}
\item \field{plural} $\mapsto$ \field{descriptionplural}
\item \field{description} $\mapsto$ \field{name}
\item \field{descriptionplural} $\mapsto$ \field{plural}
\end{itemize}
The required fields are as for \atentry{entry}.

For example:
\begin{verbatim}
@dualentry{child,
  name={child},
  plural={children},
  description={enfant}
}
\end{verbatim}
Is like
\begin{verbatim}
@entry{child,
  name={child},
  plural={children},
  description={enfant}
  descriptionplural={enfants}
}

@entry{dual.child,
  description={child},
  descriptionplural={children},
  name={enfant}
  plural={enfants}
}
\end{verbatim}
where \idprefix{dual} is replaced by the value of the
\csopt{dual-prefix} option. However, instead of defining the entries
with \csfmt{bibglsnewentry} both the primary and dual entries are
defined using \csref{bibglsnewdualentry}. The \field{category} 
and \field{type} fields can be set for the dual entry using the
\csopt{dual-category} and \csopt{dual-type} options.

For example:
\begin{verbatim}
\newglossary*{english}{English}
\newglossary*{french}{French}

\GlsXtrLoadResources[
 src           = {entries-dual},% data in entries-dual.bib
 type          = {english},% put primary entries in glossary 'english'
 dual-type     = {french},% put dual entries in glossary 'french'
 category      = {dictionary},% set the primary category to 'dictionary'
 dual-category = {dictionary},% set the dual category to 'dictionary'
 sort          = {en},% sort primary entries according to language 'en'
 dual-sort     = {fr}% sort dual entries according to language 'fr'
]
\end{verbatim}

\entrysection{dualindexentry}

There are no required fields.  The primary
entry behaves like \atentry{index} and the dual entry behaves
like \atentry{entry}.  The default field mapping is:
\begin{itemize}
\item \field{name} $\mapsto$ \field{name}
\end{itemize}
This doesn't actually perform any swapping of fields, but it
provides the field used for backlinks (if
\csopt{dual-indexentry-backlink} is set). The reason that the primary
(rather than the dual) is like \atentry{index} is to allow the
primaries to merge with any \atentry{index} entries found in the
resource set, since glossary entries with descriptions are likely to 
be a subset of all indexed entries.

If no \field{name} is given, the dual entry is assigned the
(unprefixed) entry label. For example:
\begin{verbatim}
@dualindexentry{array,
  description={ordered list of values}
}
\end{verbatim}
This is effectively like
\begin{verbatim}
@index{array}

@entry{dual.array,
  name={array},
  description={ordered list of values}
}
\end{verbatim}
The primary entries are defined using
\csref{bibglsnewdualindexentry},
which by default sets the \field{category} to \optfmt{index}
(although this may be overridden, for example, by the \csopt{category} option).
The dual entries are defined with
\csref{bibglsnewdualindexentrysecondary}.

This is the most convenient way of having an entry that's also
automatically indexed. For example, suppose the file
\filefmt{terms.bib} contains:
\begin{verbatim}
@index{duck}
@index{zebra}
@index{aardvark}
\end{verbatim}
and suppose the file \filefmt{entries.bib} contains:
\begin{verbatim}
@dualindexentry{array,
  description={ordered list of values}
}

@dualindexentry{vector,
  name={vector},
  description={column or row of values}
}

@dualindexentry{set,
  description={collection of values}
}

@dualindexentry{matrix,
  plural={matrices},
  description={rectangular array of values}
}
\end{verbatim}
These entries can be used in an example document that has an 
index and a glossary:
\begin{verbatim}
\documentclass{article}

\usepackage[colorlinks]{hyperref}
\usepackage[record,index,stylemods=mcols]{glossaries-extra}

\GlsXtrLoadResources[
 src={terms,entries},
 type=index,
 label-prefix={idx.},
 dual-prefix={gls.},
 combine-dual-locations={primary},
 dual-type=main
]

\begin{document}
\gls{gls.array}, \gls{gls.vector}, \gls{gls.set}, \gls{gls.matrix}.

\gls{idx.duck}, \gls{idx.aardvark}, \gls{idx.zebra}.

\renewcommand{\glstreenamefmt}[1]{\textsc{#1}}
\printunsrtglossary[type=main,style=index,nogroupskip]

\renewcommand{\glstreenamefmt}[1]{#1}
\renewcommand{\glstreegroupheaderfmt}[1]{\textbf{#1}}
\printunsrtglossary[type=index,style=mcolindexgroup]
\end{document}
\end{verbatim}
This uses \csopt{combine-dual-locations} to combine the locations
for the primary and dual entries so that they only appear in the
index.

\entrysection{dualindexabbreviation}

The \atentry{dualindexabbreviation} entry type is similar to 
\atentry{dualindexentry} and again, by default, the
field mapping is:
\begin{itemize}
\item \field{name} $\mapsto$ \field{name}
\end{itemize}
However in this case the required fields are \field{short} and
\field{long}. The \field{name} for the primary entry defaults to
\field{short} if omitted. The fallback for the \field{sort} field is
given by \csopt{abbreviation-sort-fallback}, which defaults to the
\field{short} field.

For example:
\begin{verbatim}
@dualindexabbreviation{html,
  short={html},
  long = {hypertext markup language}
}
\end{verbatim}
is like
\begin{verbatim}
@index{html}

@abbreviation{dual.html,
  short={html},
  long = {hypertext markup language}
}
\end{verbatim}
The primary term is defined using
\csref{bibglsnewdualindexabbreviation}, which encapsulates the
\field{name} in \csref{bibglsuseabbrvfont} to match the font used by
the dual abbreviation. It also
by default sets the \field{category} to \optfmt{index} (although
this again may be overridden).
The dual term is defined using
\csref{bibglsnewdualindexabbreviationsecondary}.

\entrysection{dualindexsymbol}

The \atentry{dualindexsymbol} entry type is similar to 
\atentry{dualindexentry}, but by default the
field mappings are:
\begin{itemize}
\item \field{symbol} $\mapsto$ \field{name}
\item \field{name} $\mapsto$ \field{symbol}
\item \field{symbolplural} $\mapsto$ \field{plural}
\item \field{plural} $\mapsto$ \field{symbolplural}
\end{itemize}
The required field is: \field{symbol}.
If the \field{name} field is omitted, the dual entry is assigned a
symbol from the original (unprefixed) label.
The primary entries are defined using
\csref{bibglsnewdualindexsymbol},
which by default sets the \field{category} to \optfmt{index},
and the dual entries are defined using
\csref{bibglsnewdualindexsymbolsecondary},
which by default sets the \field{category} to \optfmt{symbol}.
For example:
\begin{verbatim}
@dualindexsymbol{pi,
  symbol={\ensuremath{\pi}},
  description={ratio of a circle's circumference to its diameter}
}
\end{verbatim}
is like
\begin{verbatim}
@index{pi,symbol={\ensuremath{\pi}}}

@symbol{dual.pi,
  name={\ensuremath{\pi}},
  symbol={pi},
  description={ratio of a circle's circumference to its diameter}
}
\end{verbatim}

For example, suppose I have a file called \filefmt{symbols.bib} that
contains:
\begin{verbatim}
@dualindexsymbol{pi,
  symbol={\ensuremath{\pi}},
  description={ratio of a circle's circumference to its diameter}
}

@dualindexsymbol{e,
  name={Euler's number},
  symbol={\ensuremath{e}},
  description={base of the natural logarithm}
}
\end{verbatim}
Then the previous example document can be modified to have an index,
a glossary and a list of symbols:
\begin{verbatim}
\documentclass{report}

\usepackage[colorlinks]{hyperref}
\usepackage[record,symbols,index,stylemods=mcols]{glossaries-extra}

\newcommand{\bibglsnewdualindexsymbolsecondary}[5]{%
  \longnewglossaryentry*{#1}{name={#3},category=symbol,%
    symbol={#4},#2,type={symbols}}{#5}%
}

\newcommand{\indexprimary}[1]{\glsadd[format=hyperbf]{idx.#1}}

\renewcommand{\glsxtrpostdescsymbol}{%
  \indexprimary{\glscurrententrylabel}%
}

\renewcommand{\glsxtrpostdescgeneral}{%
  \indexprimary{\glscurrententrylabel}%
}

\GlsXtrLoadResources[
 src={entries,terms,symbols},
 type=index,
 set-widest,
 label-prefix={idx.},
 dual-prefix={},
 combine-dual-locations={primary},
 dual-sort={letter-case},
 dual-type=main
]

\glsxtrnewglslike[hyper=false]{idx.}{\idx}{\idxpl}{\Idx}{\Idxpl}

\begin{document}
\gls{array}, \gls{vector}, \gls{set}, \glspl{matrix}.

\idx{duck}, \idx{aardvark}, \idx{zebra}.

\gls{e} and \gls{pi}.

\newpage
\gls{array}, \idx{vector}, \idx{set}, \gls{matrix}.

\newpage
\gls{array}, \gls{vector}, \gls{set}, \gls{matrix}.


\renewcommand{\glstreenamefmt}[1]{\textsc{#1}}
\printunsrtglossary[type=main,nogroupskip,style=alttree]

\renewcommand{\glstreenamefmt}[1]{#1}
\printunsrtglossary[type=symbols,nogroupskip,style=index]

\renewcommand{\glstreenamefmt}[1]{#1}
\renewcommand{\glstreegroupheaderfmt}[1]{\textbf{#1}}
\printunsrtglossary[type=index,style=mcolindexgroup]

\end{document}
\end{verbatim}
Here I've provided some convenient commands for referencing the
primary (index) terms (\csfmt{idx}, \csfmt{idxpl}, \csfmt{Idx}
and \csfmt{Idxpl}). This means I don't need to worry about the
label prefix and it also switches off the hyperlinks. This uses
\nosecdef{glsxtrnewglslike}
which was introduced to \sty{glossaries-extra} v1.21. It
essentially does
\begin{verbatim}
\newcommand{\idx}[2][]{\gls[hyper=false,#1]{idx.#2}}
\newcommand{\Idx}[2][]{\Gls[hyper=false,#1]{idx.#2}}
\newcommand{\idxpl}[2][]{\glspl[hyper=false,#1]{idx.#2}}
\newcommand{\Idxpl}[2][]{\Glspl[hyper=false,#1]{idx.#2}}
\end{verbatim}
but the new commands will also recognise the \idx{gls} modifiers, so
\verb|\idx+| will behave like \verb|\gls+| which wouldn't be
possible if \csfmt{idx} was defined using \idx{newcommand} in the
above manner.

I've also redefined \csref{bibglsnewdualindexsymbolsecondary} to put
the dual entries created with \atentry{dualindexsymbol} into
the \code{symbols} glossary (which is created with the
\styopt{symbols} package option), so it overrides the
\csopt[main]{dual-type} setting.

This command also sets the \field{category}
to \code{symbol}, so I can redefine the post-description hook
for symbols (\idx{glsxtrpostdescsymbol}) to automatically index 
the symbol definition. Similarly for the \code{general}
post-description hook \idx{glsxtrpostdescgeneral}. 

Since the post-description hook isn't done until the glossary has
been created, this requires a slightly longer build process. If the
document file is called \filefmt{myDoc.tex}, then the complete
document build is:
\begin{verbatim}
pdflatex myDoc
bib2gls -g myDoc
pdflatex myDoc
bib2gls -g myDoc
pdflatex myDoc
\end{verbatim}

\entrysection{dualindexnumber}

The \atentry{dualindexnumber} entry type is almost identical to
\atentry{dualindexsymbol}, but the primary entries are defined using
\csref{bibglsnewdualindexnumber},
which by default sets the \field{category} to \optfmt{index},
and the dual entries are defined using
\csref{bibglsnewdualindexnumbersecondary},
which by default sets the \field{category} to \optfmt{number}.

\entrysection{dualabbreviationentry}

The \atentry{dualabbreviationentry} entry type is similar to 
\atentry{dualentry}, but by default the
field mappings are:
\begin{itemize}
\item \field{long} $\mapsto$ \field{name}
\item \field{longplural} $\mapsto$ \field{plural}
\item \field{short} $\mapsto$ \field{text}
\end{itemize}
You may need to add a mapping from \field{shortplural} to
\field{plural} if the default is inappropriate.
(In \bibgls\ version 1.0 this entry type was originally called
\atentry{dualentryabbreviation}. In version 1.1, it was renamed
\atentry{dualabbreviationentry} which makes for a more consistent naming scheme
\code{@dual}\meta{primary}\meta{dual}.)

The required fields are: \field{short}, \field{long} and
\field{description}. This entry type is designed to emulate the
example \gls{newdualentry} command given in the \sty{glossaries}
user manual. The primary entry is an abbreviation with the given
\field{short} and \field{long} fields (but not the 
\field{description}) and the secondary entry is a regular entry with
the \field{name} copied from the \field{long} field.
The fallback for the \field{sort} is given by
\csopt{abbreviation-sort-fallback}, which defaults to the
\field{short} field.

For example:
\begin{verbatim}
@dualabbreviationentry{svm,
   long = {support vector machine},
   short = {SVM},
   description = {statistical pattern recognition technique}
}
\end{verbatim}
is rather like doing
\begin{verbatim}
@abbreviation{svm,
   long = {support vector machine},
   short = {SVM}
}

@entry{dual.svm,
   name = {support vector machine},
   description = {statistical pattern recognition technique}
}
\end{verbatim}
but \code{dual.svm} will automatically be selected if \code{svm}
is indexed in the document. If \code{dual.svm} isn't explicitly
indexed, it won't have a location list.

If the \field{sort} field is missing \bibgls\ by default falls back
on the \field{name} field. If this is missing, this sort value will
fallback on the \field{short} field. This means that if \field{name}
isn't explicitly given in \atentry{dualabbreviationentry}, then the 
primary entry will be sorted according to \field{short} but the dual
will be sorted according its \field{name} (which has been copied
from the primary \field{long}).

Entries provided using \atentry{dualabbreviationentry} will be defined
with
\begin{alltt}
\csref{bibglsnewdualabbreviationentry}
\end{alltt}
(which uses \gls{newabbreviation}) for the primary entries and with 
\begin{alltt}
\csref{bibglsnewdualabbreviationentrysecondary}
\end{alltt}
(which uses \gls{longnewglossaryentry}) for the secondary entries.
This means that if the \styopt{abbreviations}
package option is used, this will put the primary entry in the
\optfmt{abbreviations} glossary and the secondary entry in the
\optfmt{main} glossary.  Use the \csopt{type} and
\csopt{dual-type} options to override this.

\entrysection{dualentryabbreviation}

This entry type is deprecated as from \bibgls\ version 1.1. It's functionally
equivalent to \atentry{dualabbreviationentry} but its name
doesn't fit the general dual entry naming scheme.

\entrysection{dualsymbol}

This is like \atentry{dualentry} but the default mappings are:
\begin{itemize}
\item \field{name} $\mapsto$ \field{symbol}
\item \field{plural} $\mapsto$ \field{symbolplural}
\item \field{symbol} $\mapsto$ \field{name}
\item \field{symbolplural} $\mapsto$ \field{plural}
\end{itemize}
The \field{name} and \field{symbol} fields are required.
For example:
\begin{verbatim}
@dualsymbol{pi,
   name={pi},
   symbol={\ensuremath{\pi}},
   description={the ratio of the length of the circumference
    of a circle to its diameter}
}
\end{verbatim}

Entries are defined using \csref{bibglsnewdualsymbol}, which by 
default sets the \field{category} to \optfmt{symbol}.

\entrysection{dualnumber}

This is almost identical to \atentry{dualsymbol} but entries are
defined using \csref{bibglsnewdualnumber}, which by default sets
the \field{category} to \optfmt{number}.

The above example could be defined as a number since $\pi$ is a
constant:
\begin{verbatim}
@dualnumber{pi,
   name={pi},
   symbol={\ensuremath{\pi}},
   description={the ratio of the length of the circumference
    of a circle to its diameter},
   user1={3.14159}
}
\end{verbatim}

This has stored the approximate value in the \field{user1} field.
The post-description hook could then be adapted to show this.
\begin{verbatim}
\renewcommand{\glsxtrpostdescnumber}{%
  \ifglshasfield{useri}{\glscurrententrylabel}
  { (approximate value: \glscurrentfieldvalue)}%
  {}%
}
\end{verbatim}

This use of the \field{user1} field means that the dual entries
could be sorted numerically according to the approximate value:
\begin{verbatim}
\usepackage[record,postdot,numbers,style=index]{glossaries-extra}

\GlsXtrLoadResources[
  src={entries},% entries.bib
  dual-type={numbers},
  dual-sort={double},% decimal sort
  dual-sort-field={user1}
]
\end{verbatim}

\entrysection{dualabbreviation}

The \atentry{dualabbreviation} entry type is similar to 
\atentry{dualentry}, but by default the
field mappings are:
\begin{itemize}
\item \field{short} $\mapsto$ \field{dualshort}
\item \field{shortplural} $\mapsto$ \field{dualshortplural}
\item \field{long} $\mapsto$ \field{duallong}
\item \field{longplural} $\mapsto$ \field{duallongplural}
\item \field{dualshort} $\mapsto$ \field{short}
\item \field{dualshortplural} $\mapsto$ \field{shortplural}
\item \field{duallong} $\mapsto$ \field{long}
\item \field{duallongplural} $\mapsto$ \field{longplural}
\end{itemize}
The required fields are: \field{short}, \field{long}, 
\field{dualshort} and \field{duallong}.
This includes some new fields: \field{dualshort},
\field{dualshortplural}, \field{duallong} and
\field{duallongplural}. If these aren't already defined, they
will be provided in the \ext{glstex} file with
\begin{alltt}
\idx{glsxtrprovidestoragekey}\margm{key}\marg{}\marg{}
\end{alltt}
This command is defined by the \styfmt{glossaries-extra} package.
Note that this use with an empty third argument prevents
the creation of a field access command (analogous to
\idx{glsentrytext}). You can fetch the value with
\idx{glsxtrusefield}.  (See the \styfmt{glossaries-extra} manual for
further details.) Remember that the field won't be
available until the \ext{glstex} file has been created.

Note that \bibgls\ doesn't know what abbreviation styles
are in used, so if the \field{sort} field is missing
it will fallback on the \field{short} field. If the abbreviations
need to be sorted according to the \field{long} field instead,
use \csopt[long]{abbreviation-sort-fallback}.

Terms that are defined using \atentry{dualabbreviation} will be
written to the output file using \csref{bibglsnewdualabbreviation}.

If the \csopt{dual-abbrv-backlink} option is on, the default field
used for the backlinks is the \field{dualshort} field, so you'll need
to make sure you adapt the glossary style to show that field. The
simplest way to do this is through the category post description
hook.

For example, if the entries all have the \field{category} set
to \optfmt{abbreviation}, then this requires redefining
\idx{glsxtrpostdescabbreviation}.

Here's an example dual abbreviation for a document where English is
the primary language and German is the secondary language:
\begin{alltt}
@dualabbreviation\marg{rna,
  short=\marg{RNA},
  dualshort=\marg{RNS},
  long=\marg{ribonucleic acid},
  duallong=\marg{Ribonukleins\"aure}
}
\end{alltt}
If the abbreviation is in the file called
\filefmt{entries-dual-abbrv.bib}, then here's an example document:
\begin{verbatim}
\documentclass{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage[ngerman,main=english]{babel}
\usepackage[colorlinks]{hyperref}
\usepackage[record,nomain]{glossaries-extra}

\newglossary*{english}{English}
\newglossary*{german}{German}

\setabbreviationstyle{long-short}

\renewcommand*{\glsxtrpostdescabbreviation}{%
  \ifglshasfield{dualshort}{\glscurrententrylabel}
  {%
    \space(\glscurrentfieldvalue)%
  }%
  {}%
}

\GlsXtrLoadResources[
 src={entries-dual-abbrv},% entries-dual-abbrv.bib
 type=english,% put primary entries in glossary 'english'
 dual-type=german,% put primary entries in glossary 'german'
 label-prefix={en.},% primary label prefix
 dual-prefix={de.},% dual label prefix
 sort=en,% sort primary entries according to language 'en'
 dual-sort=de-1996,% sort dual entries according to 'de-1996'
                   % (German new orthography)
 dual-abbrv-backlink% add links in the glossary to the opposite
                    %entry
]

\begin{document}

English: \gls{en.rna}; \gls{en.rna}.

German: \gls{de.rna}; \gls{de.rna}.

\printunsrtglossaries
\end{document}
\end{verbatim}
If the \csopt{label-prefix} is omitted, then only the dual entries
will have a prefix:
\begin{verbatim}
English: \gls{rna}; \gls{rna}.

German: \gls{de.rna}; \gls{de.rna}.
\end{verbatim}
Another variation is to use the \abbrstyle{long-short-user}
abbreviation style and modify the associated \idx{glsxtruserfield} so that
the \field{duallong} field is selected for the parenthetical
material:
\begin{verbatim}
\renewcommand*{\glsxtruserfield}{duallong}
\end{verbatim}
This means that the first use of the primary entry is displayed as
\begin{quote}
ribonucleic acid (RNA, Ribonukleins\"aure)
\end{quote}
and the first use of the dual entry is displayed as:
\begin{quote}
Ribonukleins\"aure (RNS, ribonucleic acid)
\end{quote}

Here's an example to be used with the \abbrstyle{long-short-desc}
style:
\begin{alltt}
@dualabbreviation\marg{rna,
  short=\marg{RNA},
  dualshort=\marg{RNS},
  long=\marg{ribonucleic acid},
  duallong=\marg{Ribonukleins\"aure}
  description=\marg{a polymeric molecule},
  user1=\marg{Ein polymeres Molek\"ul}
}
\end{alltt}
This stores the dual description in the \field{user1} field,
so this needs a mapping.
The new example document is much the same as the previous one, except
that the \csopt{dual-abbrv-map} option is needed to include the 
mapping between the \field{description} and \field{user1} fields:
\begin{verbatim}
\documentclass{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage[ngerman,main=english]{babel}
\usepackage[colorlinks]{hyperref}
\usepackage[record,nomain]{glossaries-extra}

\newglossary*{english}{English}
\newglossary*{german}{German}

\setabbreviationstyle{long-short-desc}

\renewcommand*{\glsxtrpostdescabbreviation}{%
  \ifglshasfield{dualshort}{\glscurrententrylabel}
  {%
    \space(\glscurrentfieldvalue)%
  }%
  {}%
}

\GlsXtrLoadResources[
 src={entries-dual-abbrv-desc},% entries-dual-abbrv-desc.bib
 type=english,% put primary entries in glossary 'english'
 dual-type=german,% put primary entries in glossary 'german'
 label-prefix={en.},% primary label prefix
 dual-prefix={de.},% dual label prefix
 sort=en,% sort primary entries according to language 'en'
 abbreviation-sort-fallback={long},% fallback on 'long' field
 dual-sort=de-1996,% sort dual entries according to 'de-1996'
                   % (German new orthography)
 dual-abbrv-backlink,% add links in the glossary to the opposite
                     % entry
% dual key mappings:
 dual-abbrv-map={%
   {short,shortplural,long,longplural,dualshort,dualshortplural,
     duallong,duallongplural,description,user1},
   {dualshort,dualshortplural,duallong,duallongplural,short,shortplural,
     long,longplural,user1,description}
 }
]

\begin{document}

English: \gls{en.rna}; \gls{en.rna}.

German: \gls{de.rna}; \gls{de.rna}.

\printunsrtglossaries
\end{document}
\end{verbatim}
Note that since this document uses the \abbrstyle{long-short-desc}
abbreviation style, the \csopt{abbreviation-sort-fallback} needs to be changed
to \optfmt{long}.

If I change the order of the mapping to:
\begin{verbatim}
 dual-abbrv-map={%
   {long,longplural,short,shortplural,dualshort,dualshortplural,
     duallong,duallongplural,description,user1},
   {duallong,duallongplural,dualshort,dualshortplural,short,shortplural,
     long,longplural,user1,description}
\end{verbatim}
Then the back-link field will switch to \field{duallong}. The
post-description hook can be modified to allow for this:
\begin{verbatim}
\renewcommand*{\glsxtrpostdescabbreviation}{%
  \ifglshasfield{duallong}{\glscurrententrylabel}
  {%
    \space(\glscurrentfieldvalue)%
  }%
  {}%
}
\end{verbatim}

An alternative is to use the \abbrstyle{long-short-user-desc} style
without the post-description hook:
\begin{verbatim}
\setabbreviationstyle{long-short-user-desc}

\renewcommand*{\glsxtruserfield}{duallong}
\end{verbatim}
However be careful with this approach as it can cause nested
hyperlinks. In this case it's better to use the
\abbrstyle{long-postshort-user-desc} style which defers the
parenthetical material until after the link-text:
\begin{verbatim}
\setabbreviationstyle{long-postshort-user-desc}

\renewcommand*{\glsxtruserfield}{duallong}
\end{verbatim}
If the back-link field has been switched to \field{duallong} then
the post-description hook is no longer required.

\entrysection{dualacronym}

As \atentry{dualabbreviation} but defines the entries with
\csref{bibglsnewdualacronym}.

\section{Tertiary Entry Types}
\label{sec:tertiaryentry}

A tertiary entry type is essentially a dual entry that creates three
separate (but related) \styfmt{glossaries-extra} entry definitions per 
\ext{bib} entry. As with dual entries, the first and second of these
are the primary and secondary. The third of these is the
\idx{tertiary} which is effectively an appendage of the
secondary, and is defined by the same associated
\csfmt{bibglsnew\ldots secondary} command that defines the secondary
entry. Therefore the secondary and tertiary are both considered the
dual and are treated as a single entry for the purposes of sorting
and collating.

The tertiary entry will never have any locations. Any records found
will be assigned to the secondary (and may then be moved to the
primary with \csopt[primary]{combine-dual-locations}). The tertiary
will always have the same order as the secondary and will have the same
\field{group} value. You can set the \field{type} for the tertiary
with \csopt{tertiary-type} and the \field{category} with
\csopt{tertiary-category}. The label prefix defaults to
\idprefix{tertiary} and can be changed with \csopt{tertiary-prefix}.

\entrysection{tertiaryindexabbreviationentry}

This entry type is very similar to
\atentry{dualindexabbreviation} but creates a tertiary entry as
well.  The required fields are: \field{short} and \field{long} (as for
\atentry{dualindexabbreviation}) and also \field{description}.  The
mappings are shared by both entry types.  For example:
\begin{verbatim}
@tertiaryindexabbreviationentry{html,
  short={HTML},
  long = {hypertext markup language},
  description={a markup language for creating web pages}
}
\end{verbatim}
is analogous to
\begin{verbatim}
\newglossaryentry{html,name={HTML},description={}}

\newabbreviation{dual.html}{HTML}{hypertext markup language}

\newglossaryentry{tertiary.html, 
  name={hypertext markup language},
  description={a markup language for creating web pages}
}
\end{verbatim}
The last two are actually defined using one command:
\begin{verbatim}
\bibglsnewtertiaryindexabbreviationentrysecondary
  {dual.html}% secondary label
  {tertiary.html}% tertiary label
  {...}% secondary fields
  {...}% tertiary fields
  {HTML}% primary name
  {HTML}% short
  {hypertext markup language}% long
  {a markup language for creating web pages}% description
\end{verbatim}
The \csref{bibglsnewtertiaryindexabbreviationentrysecondary}
command is provided in the \ext{glstex} file as:
\begin{verbatim}
\providecommand{\bibglsnewtertiaryindexabbreviationentrysecondary}[8]{%
  \newabbreviation[#3]{#1}{#6}{#7}%
  \longnewglossaryentry*{#2}%
  {name={\protect\bibglsuselongfont{#7}{\glscategory{#1}}},#4}%
  {#8}%
}
\end{verbatim}
which defines the secondary as an abbreviation using
\csfmt{newabbreviation} and the tertiary as a regular entry using
\csfmt{longnewglossaryentry}. This means that the tertiary entry is
always defined immediately after the corresponding secondary entry.
The primary may be defined earlier or later in the file depending on the
way the entries are sorted and on the \csopt{dual-sort} setting.

\chapter{Resource File Options}
\label{sec:resourceopts}

Make sure that you use \sty{glossaries-extra} with the
\styopt{record} package option. This ensures that \bibgls\ can pick
up the required information from the \ext{aux} file. It also
switches on the \styopt[none]{sort} package option (if you have a new
enough version of the base \sty{glossaries} package), which means
that there's no attempt to assign or process the \field{sort} key if
it's omitted from \gls{newglossaryentry} (or similar commands). The
\field{sort} key will be provided by \bibgls\ for informational
purposes, but there's no need for \LaTeX\ to write it to any
external files.

The \ext{glstex} resource files created by \bibgls\ are loaded in
the document using
\nosecformatdef{glsxtrresourcefile}
where \meta{filename} is the name of the resource file without the
\ext{glstex} extension.
You can have multiple \gls{glsxtrresourcefile} commands within your
document, but each \meta{filename} must be unique, otherwise \LaTeX\
would attempt to input the same \ext{glstex} file multiple times.
\bibgls\ checks for non-unique file names.

There's a shortcut command that uses
\idx{jobname} in the \meta{filename}:
\nosecformatdef{GlsXtrLoadResources}
The first instance of this command is equivalent to
\begin{alltt}
\gls{glsxtrresourcefile}\oargm{options}\marg{\idx{jobname}}
\end{alltt}
Any additional use of \gls{GlsXtrLoadResources} is equivalent to
\begin{alltt}
\gls{glsxtrresourcefile}\oargm{options}\marg{\idx{jobname}-\meta{n}}
\end{alltt}
where \meta{n} is number. For example:
\begin{verbatim}
\GlsXtrLoadResources[src=entries-en,sort={en}]
\GlsXtrLoadResources[src=entries-fr,sort={fr}]
\GlsXtrLoadResources[src=entries-de,sort={de-1996}]
\end{verbatim}
This is equivalent to:
\begin{verbatim}
\glsxtrresourcefile[src=entries-en,sort={en}]{\jobname}
\glsxtrresourcefile[src=entries-fr,sort={fr}]{\jobname-1}
\glsxtrresourcefile[src=entries-de,sort={de-1996}]{\jobname-2}
\end{verbatim}
In general, it's simplest just to use \gls{GlsXtrLoadResources}.

The optional argument \meta{options} is a comma-separated \keyvallist. 
Allowed options are listed below.
The option list applies only to that specific
\meta{filename}\ext{glstex} and are not carried over to the next
instance of \gls{glsxtrresourcefile}. The \sty{glossaries-extra}
package doesn't parse the options, but just writes the information to the
\ext{aux} file. This means that any invalid options will be reported
by \bibgls\ not by \sty{glossaries-extra}.

If you have multiple \ext{bib} files you can either select them all
using \csopt[\meta{bib list}]{src} in a single
\gls{glsxtrresourcefile} call, if they all require the same settings,
or you can load them separately with different settings applied.

For example, if the files \filefmt{entries-terms.bib} and
\filefmt{entries-symbols.bib} have the same settings:
\begin{verbatim}
\GlsXtrLoadResources[src={entries-terms,entries-symbols}]
\end{verbatim}
Alternatively, if they have different settings:
\begin{verbatim}
\GlsXtrLoadResources[src={entries-terms},type=main]
\GlsXtrLoadResources[src={entries-symbols},sort=use,type=symbols]
\end{verbatim}

Note that the sorting is applied to each resource call independently
of other resources. This means that if you have multiple instances
of \gls{glsxtrresourcefile} but only one glossary type, the glossary
will effectively contain blocks of sorted entries. For example, if
\filefmt{file1.bib} contains:
\begin{verbatim}
@index{duck}
@index{zebra}
@index{aardvark}
\end{verbatim}
and \filefmt{file2.bib} contains:
\begin{verbatim}
@index{caterpillar}
@index{bee}
@index{wombat}
\end{verbatim}
then
\begin{verbatim}
\GlsXtrLoadResources[src={file1,file2}]
\end{verbatim}
will result in the list: aardvark, bee, caterpillar, duck, wombat,
zebra. These six entries are all defined when
\csfmt{jobname}\filefmt{.glstex} is read.
Whereas
\begin{verbatim}
\GlsXtrLoadResources[src={file1}]
\GlsXtrLoadResources[src={file2}]
\end{verbatim}
will result in the list: aardvark, duck, zebra, bee, caterpillar,
wombat. The first three (aardvark, duck, zebra) are defined when 
\csfmt{jobname}\filefmt{.glstex} is read. The second three (bee,
caterpillar, wombat) are defined when \csfmt{jobname}\filefmt{-1.glstex}
is read. Since \idx{printunsrtglossary} simply iterates over all
defined entries, this is the ordering used.

Note \bibgls\ allows \ext{bib} files that don't provide any entries.
This can be used to provide commands in \atentry{preamble}.
For example, suppose I have \filefmt{defs.bib} that just contains
\begin{verbatim}
@preamble{"\providecommand{\strong}[1]{\textbf{\color{red}#1}}
\providecommand{\test}[2]{#2 (#1)}"}
\end{verbatim}
This provides two commands:
\nosecdef{strong}
(which sets the font weight and colour) and 
\begin{alltt}
\csfmt{test}\margm{first}\margm{second}
\end{alltt}
(which just displays its second
argument followed by the first in parentheses).

Suppose I also have \filefmt{entries.bib} that contains:
\begin{verbatim}
@index{example,
  name={\strong{\test{stuff}{example}}}
}
@index{sample}
@index{test}
@index{foo}
@index{bar}
\end{verbatim}
This contains an entry that requires the commands provided in
\filefmt{defs.bib}, so to ensure those commands are defined, I can
do:
\begin{verbatim}
\GlsXtrLoadResources[src={defs,entries}]
\end{verbatim}
Unfortunately this results in the sort value for \code{example} being
set to \code{redexample (stuff)} because the interpreter has
detected the provided commands and expanded 
\begin{verbatim}
\strong{\test{stuff}{example}}
\end{verbatim}
to
\begin{verbatim}
\textbf{\color{red}example (stuff)}
\end{verbatim}
It discards font changes, so \csfmt{textbf} is ignored, but it doesn't 
recognise \csfmt{color} and so doesn't know that the first argument is
just the colour specifier and therefore doesn't discard it.
This means that \qt{\textbf{\color{red}example (stuff)}} is placed
between \qt{foo} and \qt{sample} instead of between \qt{bar} and
\qt{foo}.

I can prevent the interpreter from parsing \atentry{preamble}:
\begin{verbatim}
\GlsXtrLoadResources[src={defs,entries},interpret-preamble=false]
\end{verbatim}
Now when the sort value for \code{example} is obtained from
\begin{verbatim}
\strong{\test{stuff}{example}}
\end{verbatim}
no expansion occurs (since \csfmt{strong} and \csfmt{test} are
unrecognised) so the sort value ends up as
\code{stuffexample}
which places \qt{\textbf{\color{red}example (stuff)}} between 
\qt{sample} and \qt{test}, which is again incorrect.

The best thing to do in this situation is to split the provided
commands into two \ext{bib} files: one that shouldn't be interpreted
and one that should.

For example, \filefmt{defs-nointerpret.bib}:
\begin{verbatim}
@preamble{"\providecommand{\strong}[1]{\textbf{\color{red}#1}}"}
\end{verbatim}
and \filefmt{defs-interpret.bib}:
\begin{verbatim}
@preamble{"\providecommand{\test}[2]{#2 (#1)}"}
\end{verbatim}
Now the first one can be loaded with \csopt[false]{interpret-preamble}:
\begin{verbatim}
\GlsXtrLoadResources[src={defs-nointerpret},interpret-preamble=false]
\end{verbatim}
This creates a \ext{glstex} file that provides \csfmt{strong} but
doesn't define any entries. The other file \filefmt{defs-interpret.bib} can
then be loaded with the default \csopt[true]{interpret-preamble}:
\begin{verbatim}
\GlsXtrLoadResources[src={defs-interpret,entries}]
\end{verbatim}
The provided commands are remembered by the interpreter, so you can
also do:
\begin{verbatim}
\GlsXtrLoadResources[src={defs-interpret}]
\GlsXtrLoadResources[src={entries}]
\end{verbatim}
The \emph{contents} of \atentry{preamble} are only written to the
associated \ext{glstex} file, but the definitions contained within
the \atentry{preamble} are retained by the interpreter for subsequent
resource sets.

\section{General Options}
\label{sec:generalopts}

\optsection{charset}

If the character encoding hasn't been supplied in the \ext{bib} file
with the encoding comment
\begin{alltt}
\% Encoding: \meta{encoding-name}
\end{alltt}
then you can supply the correct encoding using
\csopt[encoding-name]{charset}. In general, it's better to include
the encoding in the \ext{bib} file where it can also be read by
a \ext{bib} managing systems, such as JabRef.

See \longarg{tex-encoding} for the encoding used to write the \ext{glstex}
file.

\optsection{interpret-preamble}

This is a boolean option that determines whether or not the
interpreter should parse the contents of \atentry{preamble}.
The default is \optfmt{true}. If \optfmt{false}, the preamble
contents will still be written to the \ext{glstex} file, but any
commands provided in the preamble won't be recognised if the
interpreter is needed to determine an entry's sort value.

\optsection{set-widest}

The \glostyle{alttree} glossary style needs to know the widest
\field{name} (for each level, if hierarchical). This can
be set using \idx{glssetwidest} provided by the \styfmt{glossaries}
package, but this requires knowing which name is the widest.

The boolean option \csopt[true]{set-widest} will try to calculate
the widest names for each hierarchical level. Since it doesn't know
the fonts that will be used in the document or if there are any
non-standard commands that aren't provided in the \ext{bib} files
preamble, this option may not work. The transcript file will 
include the message
\begin{alltt}
Calculated width of '\meta{text}': \meta{number}
\end{alltt}
where \meta{text} is \bibgls's interpretation of the contents
of the \field{name} field and \meta{number} is a rough guide
to the width of \meta{text} assuming the operating system's
default serif font. The entry that has the largest \meta{number}
is the one that will be selected. This will then be implemented
using:
\begin{alltt}
\idx{glssetwidest}\oargm{level}\marg{\idx{glsentryname}\margm{id}}
\end{alltt}
where \meta{id} is the entry's label. This leaves \TeX\ to
compute the width according to the document fonts.

If \csopt{type} has been set, the \idx{glssetwidest} command
will be appended to the glossary preamble for that type, otherwise
it's simply set in the \ext{glstex} file and may be overridden
later in the document if required. (Similarly if \csopt{dual-type}
and \csopt{secondary} have been used.)

Rather than directly using \idx{glssetwidest}, \bibgls\ provides
\csref{bibglssetwidest} (where the type isn't known) and 
\gls{bibglssetwidestfortype} (where \idx{glssetwidest} needs to be
appended to the glossary preamble).

Note that if you don't set a separate sort for dual entries with
\csopt{dual-sort} then the widest entry name will be determined
across all the primary and dual entries together. Additionally, if
you have multiple resource sets, they may override previously
calculated widest names.

\optsection{entry-type-aliases}

In the \ext{bib} file, the data is identified by 
\code{@\meta{entry-type}}, such as \code{@abbreviation}.
It may be that you want to replace all instances of
\code{@\meta{entry-type}} with a different 
type of entry. For example, suppose my \ext{bib} file
contains abbreviations defined in the form:
\begin{verbatim}
@abbreviation{html,
  short ={html},
  long  = {hypertext markup language},
  description={a markup language for creating web pages}
}
\end{verbatim}
but suppose in one of my documents I actually want all these
abbreviations defined with \atentry{dualabbreviationentry}
instead of \atentry{abbreviation}. Instead of editing
the \ext{bib} file I can just supply a mapping:
\begin{verbatim}
\GlsXtrLoadResources[
  src=entries,% data in entries.bib
  entry-type-aliases={abbreviation=dualabbreviationentry}
]
\end{verbatim}
This makes all instances of \code{@abbreviation}
behave as \code{@dualabbreviationentry}. You can have more than
one mapping. For example:
\begin{verbatim}
\GlsXtrLoadResources[
  src=entries,% data in entries.bib
  entry-type-aliases={
    % @abbreviation -> @dualabbreviationentry:
    abbreviation=dualabbreviationentry,
    % @entry -> @index:
    entry=index
  }
]
\end{verbatim}
This option isn't cumulative.  Multiple instances of
\csopt{entry-type-aliases} override previous instances.
If \meta{\keyvallist} is empty there will be no mappings.

Here's another example entry in a \ext{bib} file:
\begin{verbatim}
@foo{html,
   name={HTML},
   short={HTML},
   long={hypertext markup language},
   description={hypertext markup language}
}
\end{verbatim}
Ordinarily this entry would be ignored since \code{@foo}
isn't recognised, but it can be mapped like this:
\begin{verbatim}
\GlsXtrLoadResources[
  src=entries,% data in entries.bib
  ignore-fields={short,long},
  entry-type-aliases={foo=entry}
]
\end{verbatim}
This treats the entry as though it had been defined as:
\begin{verbatim}
@entry{html,
   name={HTML},
   description={hypertext markup language}
}
\end{verbatim}
whereas
\begin{verbatim}
\GlsXtrLoadResources[
  src=entries,% data in entries.bib
  ignore-fields={name,description},
  entry-type-aliases={foo=abbreviation}
]
\end{verbatim}
treats the entry as though it had been defined as:
\begin{verbatim}
@abbreviation{html,
   short={HTML},
   long={hypertext markup language}
}
\end{verbatim}

\section{Selection Options}
\label{sec:selectionopts}

\optsection{src}

This identifies the \ext{bib} files containing the entry
definitions.  The value should be a comma-separated list of the
required \ext{bib} files. These may either be in the current working
directory or in the directory given by the \longarg{dir} switch or on
\TeX's path (in which case \idx{kpsewhich} will be used to find
them).  The \ext{bib} extension may be omitted.  Remember that if
\meta{list} contains multiple files it must be grouped to protect
the comma from the \meta{options} list.

For example
\begin{verbatim}
\GlsXtrLoadResources[src={entries-terms,entries-symbols}]
\end{verbatim}
indicates that \bibgls\ must read the files
\filefmt{entries-terms.bib} and \filefmt{entries-symbols.bib} and
create the file given by \idx{jobname}\ext{glstex} on the first
instance or \idx{jobname}\code{-}\meta{n}\ext{glstex} on subsequent
use.

With \csref{glsxtrresourcefile}\oargm{options}\margm{filename}, if 
the \csopt{src} option is omitted, 
the \ext{bib} file is assumed to be \meta{filename}\ext{bib}. For example:
\begin{verbatim}
\glsxtrresourcefile{entries-symbols}
\end{verbatim}
indicates that \bibgls\ needs to read the file
\filefmt{entries-symbols.bib}, which contains the entry data, and create the file
\filefmt{entries-symbols.glstex}. If the \ext{bib} file is
different or if you have multiple \ext{bib} files, you need to use
the \csopt{src} option.

\gls{GlsXtrLoadResources} uses \idx{jobname} as the argument of 
\gls{glsxtrresourcefile} on the first instance, so  
\begin{verbatim}
\GlsXtrLoadResources[]
\end{verbatim}
will assume \optfmt{src=\idx{jobname}}. Remember that subsequent uses
of \gls{GlsXtrLoadResources} append a suffix, so in general it's
best to always supply \csopt{src}.

\optsection{selection}

By default all entries that have records in the \ext{aux} file will
be selected as well as all their dependent entries. The dependent
entries that don't have corresponding records on the first \LaTeX\
run, may need an additional build to ensure their location lists
are updated.

Remember that on the first \LaTeX\ run the \ext{glstex} files don't
exist. This means that the entries can't be defined. The
\styopt{record} package option additionally switches on the
\styopt[warn]{undefaction} option, which means that you'll only get
warnings rather than errors when you reference entries in the
document. This means that you can't use \idx{glsaddall} with
\bibgls\ because the glossary lists are empty on the first run, so
there's nothing for \idx{glsaddall} to iterate over.
Instead, if you want to add all defined entries, you need to
instruct \bibgls\ to do this with the \csopt{selection} option. The
following values are allowed:
\begin{itemize}
\item \optfmt{recorded and deps}: add all recorded entries and
their dependencies (default).
\item \optfmt{recorded and deps and see}: as above but will also
add unrecorded entries whose \field{see} or \field{seealso} field refers to a recorded entry.
\item \optfmt{recorded no deps}: add all recorded entries but not
their dependencies. The dependencies include those referenced in the
\field{see} or \field{seealso} field, \field{parent} entries and those found referenced
with commands like \idx{gls} in the field values that are parsed by
\bibgls. With this setting, parents will be omitted unless they've
been referenced in the document through commands like \idx{gls}.
\item \optfmt{recorded and ancestors}: this is like the previous
setting but parents are added even if they haven't been referenced
in the document. The other dependent entries are omitted if they
haven't been referenced in the document.
\item \optfmt{all}: add all entries found in the \ext{bib} files
supplied in the \csopt{src} option.
\end{itemize}
The \meta{value} must be supplied.

For example, suppose the file \filefmt{entries.bib} contains:
\begin{verbatim}
@index{run}

@index{sprint,see={run}}

@index{dash,see={sprint}}
\end{verbatim}
If the document only references the \qt{run} entry (for example,
using \verb|\gls{run}|) then:
\begin{itemize}
\item If \csopt[recorded and deps]{selection}, only the \qt{run}
entry is selected. The \qt{run} entry has a record, so it's
selected, but it has no dependencies. Neither \qt{sprint} nor 
\qt{dash} have records, so they're not selected.
\item If \csopt[recorded and deps and see]{selection}, the \qt{run}
and \qt{sprint} entries are selected, but not the \qt{dash} entry.
The \qt{run} entry is selected because it has a record. The
\qt{sprint} entry doesn't have a record but its \field{see} field
includes \qt{run}, which does have a record, so \qt{sprint} is also
selected. The \qt{dash} entry doesn't have a record. Its
\field{see} field references \qt{sprint}. Although \qt{sprint} has
been selected, it doesn't have any records, so \qt{dash} isn't
selected.
\end{itemize}
The above is just an example. The circuitous redirection of
\qt{dash} to \qt{sprint} to \qt{run} is unhelpful to the reader and
is best avoided. A better method would be:
\begin{verbatim}
@index{run}

@index{sprint,see={run}}

@index{dash,see={run}}
\end{verbatim}
The \csopt[recorded and deps and see]{selection} in this case will
select all three entries, and the document won't send the reader on a
long-winded detour.

\optsection{match}

It's possible to filter the selection by matching field values.
If \meta{\keyvallist} is empty no filtering will be applied, otherwise
\meta{\keyvallist} should be a \meta{key}=\meta{regexp} list, where
\meta{key} is the name of a field or \optfmt{id} for the entry's
label or \optfmt{entrytype} for the entry's \ext{bib} type (as in
the part after \verb|@| in the \ext{bib} file not the \field{type}
field identifying the glossary label).

The \meta{regex} part should be a regular expression conforming
to
\href{http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html}{Java's
Pattern class}. The pattern is anchored (\code{oo.*} matches
\code{oops} but not \code{loops}) and \meta{regexp} can't be
empty. Remember that \TeX\ will expand the option list as
it writes the information to the \ext{aux} file so take
care with special characters. For example, to match a literal
period use \verb|\string\.| not \verb|\.| (backslash dot).

If the field is missing its value it is assumed to be empty for
the purposes of the pattern match even if it will be assigned a
non-empty default value when the entry is defined. If the field is
unrecognised by \bibgls\ any reference to it in \meta{\keyvallist} will
be ignored.

If a field is listed multiple times, the pattern for that
field is concatenated using
\begin{alltt}
(?:\meta{pattern-1})|(?:\meta{pattern-2})
\end{alltt}
where \meta{pattern-1} is the current pattern for that field
and \meta{pattern-2} is the new pattern. This means it performs a
logical OR\@. For the non-duplicate
fields the logical operator is given by \csopt{match-op}.
For example:
\begin{verbatim}
match-op={and},
match={
  {category=animals},
  {topic=biology},
  {category=vegetables}
}
\end{verbatim}
This will keep all the selected entries that satisfy:
\begin{itemize}
\item \field{category} matches \verb"(?:animals)|(?:vegetables)"

(the \field{category} is either \optfmt{animals} or
\optfmt{vegetables})

\item[AND]

\item \fieldfmt{topic} (custom key provided by user) is \code{biology}.
\end{itemize}
and will discard any entries that don't satisfy this condition.
A message will be written to the log file for each entry
that's discarded.

Patterns for unknown fields will be ignored. If the entire
list consists of patterns for unknown fields it will be
treated as \csopt[\empty]{match}. That is, no filtering will be
applied. In the above example, the custom \fieldfmt{topic} key must
be provided before the first \gls{GlsXtrLoadResources} with
\idx{glsaddkey} or \idx{glsaddstoragekey}.

\optsection{match-op}

If the value of \csopt{match} contains more than one 
\meta{key}=\meta{pattern} element, the \csopt{match-op}
determines whether to apply a logical AND or a logical OR.
The \meta{value} may be either \optfmt{and} or \optfmt{or}.
The default is \csopt[and]{match-op}.

\optsection{not-match}

If \csopt[\meta{\keyvallist}]{match} would cause an entry to be
selected then \csopt[\meta{\keyvallist}]{not-match} would cause
that entry to be ignored. If \meta{\keyvallist} is missing, the
filtering is removed.  If you have both \csopt{match} and
\csopt{not-match} in the same resource set, the last one listed
takes precedence.

\optsection{match-action}

The default behaviour with \csopt{match} or \csopt{not-match}
is to filter the selection. This may be changed to append to the
selection instead. The \meta{value} may be one of:
\begin{itemize}
\item\optfmt{filter}: (default) filter selection;
\item\optfmt{and}: append any matches (with \csopt{match}) or
non-matches (with \csopt{not-match}) to the selection.
\end{itemize}
For example, if I want to select all record entries and their
dependencies, but I also want to make sure that any entries with
the category set to \code{important} are always selected regardless
of whether or not they have any records:
\begin{verbatim}
\GlsXtrLoadResource[
  src=entries,% data in entries.bib
  match-action={and},
  match={category=important}
]
\end{verbatim}

\optsection{flatten}

This is a boolean option. The default value is
\csopt[false]{flatten}. 
If \csopt[true]{flatten}, the sorting will ignore hierarchy and
the \field{parent} field will be omitted when writing
the definitions to the \ext{glstex} file, but the parent entries
will still be considered a dependent ancestor from the 
\csopt{selection} point of view.

Note the difference between this option and using
\csopt[parent]{ignore-fields} which will remove the dependency
(unless a dependency is established through another field).

\optsection{flatten-lonely}

This may take one of three values: \optfmt{false} (default),
\optfmt{presort} and \optfmt{postsort}. The value must be supplied. 

Unlike the \csopt{flatten} option, which completely
removes the hierarchy, the \csopt{flatten-lonely} option can be used
to selectively alter the hierarchy.  In this case only those entries
that have a parent but have no siblings are checked. This option
is affected by the \csopt{flatten-lonely-rule} setting. The conditions for
moving a child up one hierarchical level are as follows:
\begin{itemize}
\item The child must have a parent, and
\item the child can't have any selected siblings, and
\item if \csopt[only unrecorded parents]{flatten-lonely-rule}
      then the parent can't have a location list, where the location list
      includes records and \field{see} or \field{seealso}
      cross-references (for the other rules the parent may have a location
      list as long as it only has the one child selected).
\end{itemize}
If the child is selected for hierarchical adjustment, the parent
will be removed if:
\begin{itemize}
\item The parent has no location list, and
\item \csopt{flatten-lonely-rule} isn't set to \optfmt{no discard}.
\end{itemize}

The value of \csopt{flatten-lonely} determines whether the
adjustment should be made before sorting (\optfmt{presort})
or after sorting (\optfmt{postsort}). To disable this function
use \csopt[false]{flatten-lonely}.

For example, suppose the file \filefmt{entries.bib} contains:
\begin{verbatim}
@index{birds}
@index{duck,parent={birds}}
@index{goose,plural={geese},parent={birds}}
@index{swan,parent={birds}}
@index{chicken,parent={birds}}

@index{vegetable}
@index{cabbage,parent={vegetable}}

@index{minerals}
@index{quartz,parent={minerals}}
@index{corundum,parent={minerals}}
@index{amber,parent={minerals}}
@index{gypsum,parent={minerals}}

@index{aardvark}
@index{bard}
@index{buzz}

@index{item}
@index{subitem,parent={item}}
@index{subsubitem,parent={subitem}}
\end{verbatim}
and suppose the document contains:
\begin{verbatim}
\documentclass{article}

\usepackage[record,style=indexgroup]{glossaries-extra}

\GlsXtrLoadResources[src={entries.bib}]

\begin{document}
\gls{duck}.
\gls{quartz}, \gls{corundum}, \gls{amber}.
\gls{aardvark}, \gls{bard}, \gls{buzz}.
\gls{vegetable}, \gls{cabbage}.
\gls{subsubitem}.

\printunsrtglossaries
\end{document}
\end{verbatim}
Although the \code{duck} entry has siblings in the
\filefmt{entries.bib} file, none of them have been recorded
(indexed) in the document, nor has the parent \code{birds} entry.

This document hasn't used \csopt{flatten-lonely}, so the default
\csopt[false]{flatten-lonely} is assumed. This results in the
hierarchical structure:
\begin{description}\setlength\itemsep{0pt}%
\item[A] \null
\item[aardvark] 1
\item[B] \null
\item[bard] 1
\item[birds] \mbox{}
  \begin{description}\setlength\itemsep{0pt}%
  \item[duck] 1
  \end{description}
\item[buzz] 1
\item[I] \null
\item[item] \mbox{}
  \begin{description}\setlength\itemsep{0pt}%
  \item[subitem] \mbox{}
    \begin{description}\setlength\itemsep{0pt}%
    \item[subsubitem] 1
    \end{description}
  \end{description}
\item[M] \null
\item[minerals] \mbox{}
  \begin{description}\setlength\itemsep{0pt}%
  \item[amber] 1
  \item[corundum] 1
  \item[quartz] 1
  \end{description}
\item[V] \null
\item[vegetable] 1
  \begin{description}\setlength\itemsep{0pt}%
  \item[cabbage] 1
  \end{description}
\end{description}
(The \qt{1} in the above indicates the page number.)
There are some entries here that look a little odd: \code{duck},
\code{cabbage} and \code{subsubitem}. In each case they are a
lone child entry. It would look better if they could be compressed,
but I don't want to use the \csopt{flatten} option, as I still want
to keep the mineral hierarchy.

If I now add \csopt[postsort]{flatten-lonely}:
\begin{verbatim}
\GlsXtrLoadResources[src={entries.bib},flatten-lonely=postsort]
\end{verbatim}
the hierarchy becomes:
\begin{description}\setlength\itemsep{0pt}%
\item[A] \null
\item[aardvark] 1
\item[B] \null
\item[bard] 1
\item[birds, duck] 1
\item[buzz] 1
\item[I] \null
\item[item, subitem, subsubitem] 1
\item[M] \null
\item[minerals] \mbox{}
  \begin{description}\setlength\itemsep{0pt}%
  \item[amber] 1
  \item[corundum] 1
  \item[quartz] 1
  \end{description}
\item[V] \null
\item[vegetable] 1
  \begin{description}\setlength\itemsep{0pt}%
  \item[cabbage] 1
  \end{description}
\end{description}
The \field{name} field of the \code{duck} entry has been
set to
\begin{verbatim}
name={\bibglsflattenedchildpostsort{birds}{duck}}
\end{verbatim}
the \field{text} field has been set to
\begin{verbatim}
text={duck}
\end{verbatim}
the \field{group} field is copied over from the parent entry (\qt{B}),
and the \field{parent} field has been adjusted, moving \code{duck}
up one hierarchical level.
Finally, the former parent \code{birds} entry has been removed (the default
\csopt[only unrecorded parents]{flatten-lonely-rule} is in effect).

The default definition of \csref{bibglsflattenedchildpostsort}
formats its arguments so that they are separated by a comma and
space (\qt{birds, duck}). If the \field{text} field had been set
in the original \atentry{index} definition of \text{duck}, it
wouldn't have been altered. This adjustment ensures that in the
document \verb|\gls{duck}| still produces \qt{duck} rather than
\qt{birds, duck}.
(If the child and parent \field{name} fields are identical,
the terms are considered homographs. See below for further details.)

The \code{subsubitem} entry has also been adjusted. This was done
in a multi-stage process, starting with sub-items and then moving down
the hierarchical levels:
\begin{itemize}
\item The \code{subitem} entry was adjusted, moving it from a
sub-entry to a top-level entry. The \field{name} field was then
modified to
\begin{verbatim}
name={\bibglsflattenedchildpostsort{item}{subitem}}
\end{verbatim}
This now means that the \code{subsubitem} entry is now a sub-entry
(rather than a sub-sub-entry). The \code{subitem} entry now has no
parent, but at this stage the \code{subsubitem} entry still has
\code{subitem} as its parent.
\item The \code{subsubitem} entry is then adjusted moving from a
sub-entry to a top-level entry. The \field{name} field was then
modified to
\begin{verbatim}
name=
{%
 \bibglsflattenedchildpostsort
 {%
   % name from former parent
   \bibglsflattenedchildpostsort{item}{subitem}%
 }%
 {subsubitem}% original name
}
\end{verbatim}
The first argument of \csref{bibglsflattenedchildpostsort} is
obtained from the \field{name} field of the entry's former parent
(which is removed from the child's set of ancestors). This field
value was changed in the previous step, and the change is
reflected here.

This means that the name for \code{subitem} will be displayed as
\qt{item, subitem} and the name for \code{subsubitem} will be
displayed as \qt{item, subitem, subsubitem}.

\item The parent entries \code{item} and \code{subitem}
are removed from the selection as they have no location lists.
\end{itemize}

Note that the \code{cabbage} sub-entry hasn't been adjusted. It
doesn't have any siblings but its parent entry (\code{vegetable})
has a location list so it can't be discarded.
If I change the rule:
\begin{verbatim}
\GlsXtrLoadResources[src={entries.bib},
 flatten-lonely-rule=discard unrecorded,
 flatten-lonely=postsort]
\end{verbatim}
then this will move the \code{cabbage} entry up a level but the
original parent entry \code{vegetable} will remain:
\begin{description}\setlength\itemsep{0pt}%
\item[A] \null
\item[aardvark] 1
\item[B] \null
\item[bard] 1
\item[birds, duck] 1
\item[buzz] 1
\item[I] \null
\item[item, subitem, subsubitem] 1
\item[M] \null
\item[minerals] \mbox{}
  \begin{description}\setlength\itemsep{0pt}%
  \item[amber] 1
  \item[corundum] 1
  \item[quartz] 1
  \end{description}
\item[V] \null
\item[vegetable] 1
\item[vegetable, cabbage] 1
\end{description}

Remember that \csopt[postsort]{flatten-lonely} performs the
adjustment after sorting. This means that the entries are still in
the same relative location that they were in with the original
\csopt[false]{flatten-lonely} setting. For example, \code{duck}
remains in the B letter group before \qt{buzz}.

With \csopt[presort]{flatten-lonely} the adjustments are made before
the sorting is performed. For example, using:
\begin{verbatim}
\GlsXtrLoadResources[src={entries.bib},
 flatten-lonely-rule=discard unrecorded,
 flatten-lonely=presort]
\end{verbatim}
the hierarchical order is now:
\begin{description}\setlength\itemsep{0pt}%
\item[A] \null
\item[aardvark] 1
\item[B] \null
\item[bard] 1
\item[buzz] 1
\item[C] \null
\item[cabbage] 1
\item[D] \null
\item[duck] 1
\item[M] \null
\item[minerals] \mbox{}
  \begin{description}\setlength\itemsep{0pt}%
  \item[amber] 1
  \item[corundum] 1
  \item[quartz] 1
  \end{description}
\item[S] \null
\item[subsubitem] 1
\item[V] \null
\item[vegetable] 1
\end{description}
This method uses a different format for the modified \field{name}
field. For example, the \code{duck} entry now has:
\begin{verbatim}
name={\bibglsflattenedchildpresort{duck}{birds}}
\end{verbatim}
The default definition of \gls{bibglsflattenedchildpresort} simply
does the first argument and ignores the second. The sorting is then
performed, but the interpreter recognises this command and can
deduce that the sort value for this entry should be \code{duck},
so \qt{duck} now ends up in the D letter group.

If you provide a definition of \gls{bibglsflattenedchildpresort} in
the \atentry{preamble}, it will be picked up by the interpreter.
For example:
\begin{verbatim}
@preamble{"\providecommand{\bibglsflattenedchildpresort}[2]{#1 (#2)}"}
\end{verbatim}

Note that the \field{text} field is only changed if not already set.
This option may have unpredictable results for abbreviations as the
\field{name} field (and sometimes the \field{text} field) is
typically set by the abbreviation style.  Remember that
if the parent entry doesn't have a location list and the rule isn't
set to \optfmt{no discard} then the parent entry will be discarded
after all relevant entries and their dependencies have been
selected, so any cross-references within the parent entry (such as
\idx{gls} occurring in the description) may end up being selected
even if they wouldn't be selected if the parent entry didn't exist.

With both \optfmt{presort} and \optfmt{postsort},
if the parent \field{name} is the same as the child's \field{name}
then the child is considered a homograph and
the child's name is set to 
\begin{alltt}
\csref{bibglsflattenedhomograph}\margm{name}\margm{parent label}
\end{alltt}
instead of the corresponding \csfmt{bibglsflattenedchild...sort}. 
This defaults to just \meta{name}.


\optsection{flatten-lonely-rule}

This option governs the rule used by \csopt{flatten-lonely} to
determine which sub-entries (that have no siblings) to adjust and 
which parents to remove. The value may be one of the following:
\begin{description}
\item[\optfmt{only unrecorded parents}] Only the sub-entries
that have a parent without a location list will be altered.
The parent entry will be removed from the selection.
This value is the default setting.
\item[\optfmt{discard unrecorded}] This setting will adjust all
sub-entries that have no siblings regardless of whether or not the
parent has a location list.
Only the parent entries that don't have a location list will be
removed from the selection.
\item[\optfmt{no discard}] This setting will adjust all
sub-entries that have no siblings regardless of whether or not the
parent has a location list. No entries will be discarded, so parent
entries that don't have a location list will still appear in the
glossary.
\end{description}
In the above, the location list includes records and
cross-references obtained from the \field{see} or \field{seealso}
fields. See \csopt{flatten-lonely} for further details.

\section{Master Documents}
\label{sec:master}

Suppose you have two documents \filefmt{mybook.tex} and
\filefmt{myarticle.tex} that share a common glossary that's shown
in \filefmt{mybook.pdf} but not in \filefmt{myarticle.pdf}.
Furthermore, you'd like to use \sty{hyperref} and be able to click
on a term in \filefmt{myarticle.pdf} and be taken to the relevant 
page in \filefmt{mybook.pdf} where the term is listed in the
glossary.

This can be achieved with the \catattr{targeturl} and
\catattr{targetname} category attributes. For example, without
\bibgls\ the file \filefmt{mybook.tex} might look like:
\begin{verbatim}
\documentclass{book}
\usepackage[colorlinks]{hyperref}
\usepackage{glossaries-extra}

\makeglossaries

\newglossaryentry{sample}{name={sample},description={an example}}

\begin{document}
\chapter{Example}
\gls{sample}.

\printglossaries
\end{document}
\end{verbatim}
The other document \filefmt{myarticle.tex} might look like:
\begin{verbatim}
\documentclass{article}
\usepackage[colorlinks]{hyperref}
\usepackage{glossaries-extra}

\newignoredglossary*{external}
\glssetcategoryattribute{external}{targeturl}{mybook.pdf}
\glssetcategoryattribute{external}{targetname}{\glolinkprefix\glslabel}

\newglossaryentry{sample}{type=external,category=external,
 name={sample},description={an example}}

\begin{document}
\gls{sample}.
\end{document}
\end{verbatim}
In this case the \optfmt{main} glossary isn't used, but the category 
attributes allow a mixture of internal and external references, so
the \optfmt{main} glossary could be used for the internal
references. (In which case, \csfmt{makeglossaries} and
\csfmt{printglossaries} would need to be added back to
\filefmt{myarticle.tex}.)

Note that both documents had to define the common terms. The above
documents can be rewritten to work with \bibgls. First a \ext{bib}
file needs to be created:
\begin{verbatim}
@entry{sample,
  name={sample},
  description={an example}
}
\end{verbatim}
Assuming this file is called \filefmt{myentries.bib}, then
\filefmt{mybook.tex} can be changed to:
\begin{verbatim}
\documentclass{book}
\usepackage[colorlinks]{hyperref}
\usepackage[record]{glossaries-extra}

\GlsXtrLoadResources[src={myentries}]

\begin{document}
\chapter{Example}
\gls{sample}.

\printunsrtglossaries
\end{document}
\end{verbatim}
and \filefmt{myarticle.tex} can be changed to:
\begin{verbatim}
\documentclass{article}
\usepackage[colorlinks]{hyperref}
\usepackage[record]{glossaries-extra}

\newignoredglossary*{external}
\glssetcategoryattribute{external}{targeturl}{mybook.pdf}
\glssetcategoryattribute{external}{targetname}{\glolinkprefix\glslabel}

\GlsXtrLoadResources[
 src={myentries},
 sort=none,
 type=external,
 category=external]

\begin{document}
\gls{sample}.
\end{document}
\end{verbatim}
Most of the options related to sorting and the glossary format are
unneeded here since the glossary isn't being displayed. This may be
sufficient for your needs, but it may be that the book has changed
various settings that have been written to \filefmt{mybook.glstex}
but aren't present in the \ext{bib} file (such as
\csopt[uc]{short-case-change}). In this case, you could just remember to copy
over the settings from \filefmt{mybook.tex} to
\filefmt{myarticle.tex}, but
another possibility is to simply make \filefmt{myarticle.tex} input
\filefmt{mybook.glstex} instead of using \gls{GlsXtrLoadResources}. This
can work but it's not so convenient to set the label prefix, the
type and the category.  The \optfmt{master} option allows this, but
it has limitations (see below), so in complex cases (in particular
different label prefixes combined with hierarchical entries or cross-references) you'll have to use
the method shown in the example code above.

\optsection{master}

This option will disable most of the options that relate to
parsing and processing data contained in \ext{bib} files
(since this option doesn't actually read any \ext{bib} files).

The use of \optfmt{master} isn't always suitable. In particular
if any of the terms cross-reference each other, such as through
the \field{see} or \field{seealso} field or the \field{parent} field or
using commands like \idx{gls} in any of the other fields when
the labels have been assigned prefixes. In this
case you will need to use the method described in the example above.

The \meta{name} is the name of the \ext{aux} file for the master
document without the extension (in this case, \filefmt{mybook}). It
needs to be relative to the document referencing it or an absolute
path using forward slashes as the directory divider. Remember that
if it's a relative path, the PDF files (\filefmt{mybook.pdf} and
\filefmt{myarticle.pdf}) will also need to be located in the same
relative position.

When \bibgls\ detects the \csopt{master} option, it won't search for
entries in any \ext{bib} files (for that particular resource set)
but will create a \ext{glstex} file that inputs the master
document's
\ext{glstex} files, but it will additionally temporarily
adjust the internal commands used to define entries so that
the prefix given by \csopt{label-prefix}, the glossary type and the
category type are all automatically inserted. If the \csopt{type}
or \csopt{category} options haven't been used, the corresponding
value will default to \optfmt{master}. The \catattr{targeturl}
and \catattr{targetname} category attributes will automatically be
set, and the glossary type will be provided using
\idx{provideignoredglossary*}\margm{type}.

The above \filefmt{myarticle.tex} can be changed to:
\begin{verbatim}
\documentclass{article}
\usepackage[colorlinks]{hyperref}
\usepackage[record]{glossaries-extra}

\GlsXtrLoadResources[
 label-prefix={book.},
 master={mybook}]

\begin{document}
\gls{book.sample}.
\end{document}
\end{verbatim}

There are some settings from the master document that you 
still need to repeat in the other document. These include
the label prefixes set when the master document loaded
the resource files, and any settings in the master document
that relate to the master document's entries.

For example, if the master document loaded a resource file
with \csopt[term.]{label-prefix} then you also need this
prefix when you reference the entries in the dependent document
in addition to the \optfmt{label-prefix} for the dependent document.
Suppose \filefmt{mybook.tex} loads the resources using
\begin{verbatim}
\GlsXtrLoadResources[src={myentries},label-prefix={term.}]
\end{verbatim}
and \filefmt{myarticle.tex} loads the resources using:
\begin{verbatim}
\GlsXtrLoadResources[
 label-prefix={book.},
 master={mybook}]
\end{verbatim}
Then the entries referenced in \filefmt{myarticle.tex} need
to use the prefix \optfmt{book.term.}\ as in:
\begin{verbatim}
This is a \gls{book.term.sample} term.
\end{verbatim}

Remember that the category labels will need adjusting to reflect the
change in category label in the dependent document.

For example, if \filefmt{mybook.tex} included:
\begin{verbatim}
\setabbreviationstyle{long-short-sc}
\end{verbatim}
then \filefmt{myarticle.tex} will need:
\begin{verbatim}
\setabbreviationstyle[master]{long-short-sc}
\end{verbatim}
(change \optfmt{master} to \meta{value} if you have used
\csopt[\meta{value}]{category}). You can, of course, choose
a different abbreviation style for the dependent document, 
but the category in the optional argument needs to be correct.

\optsection{master-resources}

If the master document has multiple resource files
then by default all that document's
\ext{glstex} files will be input. If you don't want them all
you can use \optfmt{master-resources} to specify
only those files that should be included. The value \meta{list} is 
a comma-separated list of names, where each name corresponds
to the final argument of \csref{glsxtrresourcefile}.
Remember that \gls{GlsXtrLoadResources} is just a shortcut
for \gls{glsxtrresourcefile} that bases the name on \idx{jobname}.
(Note that, as with the argument of \gls{glsxtrresourcefile},
the \ext{glstex} extension should not be included.) The file
\primaryresourcefmt\ is considered the primary
resource file and the files \suppresourcefmt{\meta{n}}
(starting with \meta{n} equal to 1) are considered the supplementary resource files.

For example, to just select the first and third of the
supplementary resource files (omitting the primary
\filefmt{mybook.glstex}):
\begin{verbatim}
\GlsXtrLoadResources[
  master={mybook},
  master-resources={mybook-1,mybook-3}
]
\end{verbatim}

\section{Field and Label Options}
\label{sec:labelopts}

\optsection{abbreviation-sort-fallback}

The entry types that define abbreviations (such as
\atentry{abbreviation} and \atentry{acronym}) will, by default,
fallback on the \field{short} field if the \field{sort} field is
missing (assuming \csopt[sort]{sort-field}). If you prefer to
fallback on a different field, then you can use this option to
specify the field. For example,
\csopt[long]{abbreviation-sort-fallback}. Note that if you use
\csopt[name]{sort-field}, then the fallback field will be given by
\csopt{abbreviation-name-fallback} if the \field{name} field is
omitted. The \meta{field} value must be a known field label.

\optsection{abbreviation-name-fallback}

The entry types that define abbreviations (such as
\atentry{abbreviation} and \atentry{acronym}) will, by default,
fallback on the \field{short} field if the \field{name} field is
missing and it's required for some reason (for example, with
\csopt[name]{sort-field}).  If you prefer to
fallback on a different field, then you can use this option to
specify the field. For example,
\csopt[long]{abbreviation-name-fallback}.
The \meta{field} value must be a known field label.

\optsection{ignore-fields}

The \csopt{ignore-fields} key indicates that you want \bibgls\ to
skip the fields listed in the supplied comma-separated \meta{list} of field
labels. Remember that unrecognised fields will always be skipped.

For example, suppose my \ext{bib} file contains
\begin{verbatim}
@abbreviation{html,
  short ="html",
  long  = {hypertext markup language},
  description={a markup language for creating web pages},
  seealso={xml}
}
\end{verbatim}
but I want to use the \abbrstyle{short-long} style and I don't want
the cross-referenced term, then I can use
\csopt[seealso,description]{ignore-fields}.

Note that \csopt[parent]{ignore-fields} removes the \field{parent}
before determining the dependency lists. This means that
\csopt[recorded and deps]{selection} and 
\csopt[recorded and ancestors]{selection} won't pick up the
label in the \field{parent} field.

If you want to maintain the dependency and ancestor relationship but
omit the \field{parent} field when writing the entries to the
\ext{glstex} file, you need to use \csopt{flatten} instead.

\optsection{category}

The selected entries may all have their \field{category} field
changed before writing their definitions to the \ext{glstex} file.
The \meta{value} may be:
\begin{itemize}
\item \optfmt{same as entry}: set the
\field{category} to the \ext{bib} entry type used to define it
(without the leading \code{@});

\item \optfmt{same as base}: set the \field{category}
to the base name of the \ext{bib} file (without the extension) 
that provided the entry definition (new to v1.1);

\item \optfmt{same as type}: set the \field{category} to the same
value as the \field{type} field (if that field has been provided
either in the \ext{bib} file or through the \csopt{type} option);

\item \meta{label}: the \field{category} is set to
\meta{label} (which mustn't contain any special characters).
\end{itemize}
This will override any
\field{category} fields supplied in the \ext{bib} file.

For example, if the \ext{bib} file contains:
\begin{verbatim}
@entry{bird,
  name={bird},
  description = {feathered animal}
}

@index{duck}

@index{goose,plural="geese"}

@dualentry{dog,
  name={dog},
  description={chien}
}
\end{verbatim}
then if the document contains
\begin{verbatim}
\GlsXtrLoadResources[category={same as entry},src={entries}]
\end{verbatim}
this will set the \field{category} of the \code{bird} field to
\optfmt{entry} (since it was defined with \atentry{entry}), the \field{category} of the \code{duck} and
\code{goose} entries to \optfmt{index} (since they were defined
with \atentry{index}), and the \field{category} of the \code{dog}
entry to \optfmt{dualentry} (since it was
defined with \atentry{dualentry}). Note that the dual entry
\code{dual.dog} doesn't have the category set, since that's
governed by \csopt{dual-category} instead.

If, instead, the document contains
\begin{verbatim}
\GlsXtrLoadResources[category={animals},src={entries}]
\end{verbatim}
then the \field{category} of all the primary selected entries will 
be set to \optfmt{animals}. Again the dual entry \code{dual.dog}
doesn't have the \field{category} set.

Note that the categories may be overridden by the commands,
such as \csref{bibglsnewindex}, that are used to actually define the
entries.

For example, if the document contains
\begin{verbatim}
\newcommand{\bibglsnewdualentry}[4]{%
 \longnewglossaryentry*{#1}{name={#3},#2,category={dual}}{#4}%
}

\GlsXtrLoadResources[category={animals},src={entries}]
\end{verbatim}
then both the \code{dog} and \code{dual.dog} entries will
have their \field{category} field set to \optfmt{dual} since the
new definition of \gls{bibglsnewdualentry} has overridden
the \csopt[animals]{category} option.

\optsection{type}

The \meta{value} may be \optfmt{same as entry}, \optfmt{same as
base} (from v1.1) or a glossary label.  This is similar to the
\csopt{category} option except that it sets the \field{type} field.
As with the \csopt{category} option, \csopt[same as entry]{type}
indicates that the entry type should be used and \csopt[same as
base]{type} indicates the base name of the \ext{bib} file (without
the extension) that provided the entry definition. There is no
\meta{value} analogous to \csopt[same as type]{category}.

Make sure that the glossary type has already been defined. 

Note that this setting only changes the \field{type} field for
primary entries. Use \csopt{dual-type} for dual entries.

For example:
\begin{verbatim}
\usepackage[record,symbols]{glossaries-extra}

\GlsXtrLoadResources[src={entries-symbols},type=symbols]
\end{verbatim}

Remember that you can use \idx{newglossary*}
if you don't want to worry about the extensions needed by
\idx!{makeindex} or \idx!{xindy}. For example:
\begin{verbatim}
\usepackage[record,nomain]{glossaries-extra}

\newglossary*{dictionary}{Dictionary}

\GlsXtrLoadResources[src={entries-symbols},type=dictionary]
\end{verbatim}
(The \styopt{nomain} option was added to suppress the
creation of the default \code{main} glossary.)

Alternatively you can use \idx{newignoredglossary} if you don't
want the glossary picked up by \idx{printunsrtglossaries}.

\optsection{counter}

The \csopt{counter} option assigns the default counter to use
for the selected entries. (This can be overridden with the
\glsopt{counter} key when using commands like \csfmt{gls}.)
The value must be the name of a counter. Since \bibgls\ doesn't know
which counters are defined within the document, there's no check to
determine if the value is valid (except for ensuring that
\meta{value} is non-empty).

Note that this will require an extra \LaTeX\ and \bibgls\ call since
the counter can't be used for the indexing until the entry has been
defined.

\optsection{label-prefix}

The \csopt{label-prefix} option prepends \meta{tag} to each
entry's label. This \meta{tag} will also be inserted in front of any
cross-references, unless they start with \idprefix{dual} or
\idprefix{extn} (where \meta{n} is an integer).

For example, if the \ext{bib} file contains
\begin{verbatim}
@entry{bird,
  name={bird},
  description = {feathered animal, such as a \gls{duck} or \gls {goose}}
}

@entry{waterfowl,
  name={waterfowl},
  description={Any \gls{bird} that lives in or about water},
  see={[see also]{duck,goose}}
}

@index{duck}

@index{goose,plural="geese"}
\end{verbatim}
Then if this \ext{bib} file is loaded with \csopt[gls.]{label-prefix}
it's as though the entries had been defined as:
\begin{verbatim}
@entry{gls.bird,
  name={bird},
  description = {feathered animal, such as a \gls{gls.duck} or 
\gls{gls.goose}}
}

@entry{gls.waterfowl,
  name={waterfowl},
  description={Any \gls{gls.bird} that lives in or about water},
  see={[see also]{gls.duck,gls.goose}}
}

@index{gls.duck,name={duck}}

@index{gls.goose,name={goose},plural="geese"}
\end{verbatim}

Remember to use this prefix when you reference the terms in the
document with commands like \idx{gls}.

\optsection{ext-prefixes}

Any cross-references in the \ext{bib} file that start with
\idprefix{extn} (where \meta{n} is a positive integer) will be 
substituted with the \meta{n}th tag listed in the comma-separated
\meta{list}. If there aren't that many items in the list, the
\idprefix{extn} will simply be removed. The default setting is
an empty list, which will strip all \idprefix{extn} prefixes.

For example, suppose the file \filefmt{entries-terms.bib} contains:
\begin{verbatim}
@entry{set,
  name={set},
  description={collection of values, denoted \gls{ext1.set}}
}
\end{verbatim}
and the file \filefmt{entries-symbols.bib} contains:
\begin{verbatim}
@symbol{set,
  name={\ensuremath{\mathcal{S}}},
  description={a \gls{ext1.set}}
}
\end{verbatim}

These files both contain an entry with the label \code{set}
but the description includes \verb|\gls{ext1.set}| which is
referencing the entry from the other file. These
two files can be loaded without conflict using:
\begin{verbatim}
\usepackage[record,symbols]{glossaries-extra}

\GlsXtrLoadResources[src={entries-terms},
 label-prefix={gls.},
 ext-prefixes={sym.}
]

\GlsXtrLoadResources[src={entries-symbols},
 type=symbols,
 label-prefix={sym.},
 ext-prefixes={gls.}
]
\end{verbatim}

Now the \code{set} entry from \filefmt{entries-terms.bib}
will be defined with the label \code{gls.set} and the
description will be
\begin{verbatim}
collection of values, denoted \gls{sym.set}
\end{verbatim}
The \code{set} entry
from \filefmt{entries-symbols.bib} will be defined with the label
\code{sym.set} and the description will be 
\begin{verbatim}
a \gls{gls.set}
\end{verbatim}

Note that in this case the \ext{bib} files have to be loaded 
as two separate resources. They can't be combined into a 
single \csopt{src} list as the labels aren't unique. 

If you want to allow the flexibility to choose between 
loading them together or separately, you'll have to give them
unique labels. For example, \filefmt{entries-terms.bib} could
contain:
\begin{verbatim}
@entry{set,
  name={set},
  description={collection of values, denoted \gls{ext1.S}}
}
\end{verbatim}
and \filefmt{entries-symbols.bib} could contain:
\begin{verbatim}
@symbol{S,
  name={\ensuremath{\mathcal{S}}},
  description={a \gls{ext1.set}}
}
\end{verbatim}
Now they can be combined with:
\begin{verbatim}
\GlsXtrLoadResources[src={entries-terms,entries-symbols}]
\end{verbatim}
which will simply strip the \glsdisp{idx.idprefix.extn}{\idprefixfmt{ext1}} 
prefix from the cross-references. Alternatively:
\begin{verbatim}
\GlsXtrLoadResources[src={entries-terms,entries-symbols},
 label-prefix={gls.},
 ext-prefixes={gls.}
]
\end{verbatim}
which will insert the supplied \csopt{label-prefix} at the
start of the labels in the entry definitions and will replace
the \idprefixfmt{ext1} prefix with \idprefixfmt{gls} in the
cross-references.

\optsection{short-case-change}

The value of the \field{short} field may be automatically converted
to upper or lower case. This option may take one of the following
values:
\begin{itemize}
\item \optfmt{none}: don't apply any case-changing (default);
\item \optfmt{lc}: convert to lower case (ignoring 
\code{\$\meta{maths}\$}, \idx{ensuremath}\margm{maths} 
and \idx{si}\margm{text});
\item \optfmt{uc}: convert to upper case (ignoring 
\code{\$\meta{maths}\$}, \idx{ensuremath}\margm{maths} 
and \idx{si}\margm{text});
\item \optfmt{lc-cs}: convert to lower case using
\idx{MakeTextLowercase};
\item \optfmt{uc-cs}: convert to upper case using
\idx{MakeTextUppercase};
\item \optfmt{firstuc-cs}: convert to first letter upper case using
\idx{makefirstuc};
\item \optfmt{firstuc}: convert the first alphabetical letter (or
group) to upper case. This uses the following rules:
\begin{enumerate}
\item if \code{\$\meta{maths}\$} then stop (no case change);
\item if \idx{NoCaseChange}\margm{text} or
\idx{ensuremath}\margm{maths} or \idx{si}\margm{text} or \idx{protect} then skip;
\item if \csfmt{}\meta{csname}\margm{text} then apply the case change to
\meta{text} and stop;
\item if \csfmt{}\meta{csname} isn't followed by a group (and it's
not \idx{protect}), then stop (no case change applied);
\item if \margm{text} (a group) then convert the entire contents of
\meta{text} to upper case and stop;
\item if \meta{character} is an alphabetic character then change it
to its title case and stop;
\item otherwise skip and move on to the next token.
\end{enumerate}
\end{itemize}

For example, if the \ext{bib} file contains
\begin{verbatim}
@abbreviation{html,
  short = "html",
  long  = "hypertext markup language"
}
\end{verbatim}
then \csopt[uc]{short-case-change} would convert the value of the
\field{short} field into
\begin{verbatim}
HTML
\end{verbatim}
whereas \csopt[uc-cs]{short-case-change} would convert it to
\begin{verbatim}
\MakeTextUppercase{html}
\end{verbatim}
In the case of \csopt[uc]{short-case-change} and \csopt[lc]{short-case-change}
only tokens that are recognised as characters will be converted.
For example, suppose I have a slightly more eccentric definition:
\begin{verbatim}
@abbreviation{html,
  short = "ht\emph{ml}",
  long  = "hypertext markup language"
}
\end{verbatim}
then \csopt[uc]{short-case-change} would convert the value of the
\field{short} field into:
\begin{verbatim}
HT\emph{ML}
\end{verbatim}
Note that \csfmt{emph} isn't modified as it's recognised as a command.
There's no attempt at interpreting the contents at this point (but
the value may later be interpreted during sorting).

For example, suppose an abbreviation is defined using:
\begin{verbatim}
short = "z\ae\oe",
\end{verbatim}
then with \csopt[uc]{short-case-change}, this would be converted to
\begin{verbatim}
Z\ae\oe
\end{verbatim}
since the interpreter isn't being used at this stage. If the
interpreter is later used during sorting, the sort value will be set to 
\code{Z\ae\oe}.

However, with \csopt[uc-cs]{short-case-change}, the \field{short}
value would be converted to
\begin{verbatim}
\MakeTextUppercase{z\ae\oe}
\end{verbatim}
If the interpreter is used during sorting, the sort value will be set to 
\code{Z\AE\OE}.

You can use \idx{NoCaseChange}\margm{text} to prevent the given \meta{text}
from having the case changed. For example, if the \field{short}
field is defined as
\begin{verbatim}
short = {a\NoCaseChange{bc}d}
\end{verbatim}
then with  \csopt[uc]{short-case-change}, this would be converted to
\begin{verbatim}
A\NoCaseChange{bc}D
\end{verbatim}
(This command is provided by \sty{textcase}, which is automatically
loaded by \styfmt{glossaries}.)

If you have a command that takes a label or identifier as an argument then it's
best to hide the label in a custom command. For example, if the
\field{short} field in the \ext{bib} definition is defined as:
\begin{verbatim}
  short = "ht\textcolor{red}{ml}",
\end{verbatim}
then with \csopt[uc]{short-case-change} this would end up as:
\begin{verbatim}
HT\textcolor{RED}{ML}
\end{verbatim}
which is incorrect. Instead, provide a command that hides the label
(such as the \csfmt{strong} example described on page~\glsxtrpageref{strong}).

The first letter upper casing \csopt[firstuc]{short-case-change}
is slightly more complicated. The simplest case is where
the field only contains alphabetical characters. For example,
suppose the \field{short} field is defined as:
\begin{verbatim}
short={html}
\end{verbatim}
then with \csopt[firstuc]{short-case-change} this would end up as
\code{Html} whereas 
\begin{verbatim}
short={{ht}ml}
\end{verbatim}
would end up as \code{HTml} since it detects the grouping. 
(You'll need to do this for the Dutch digraph \qt{ij}.)
Note that \idx{NoCaseChange} is skipped, and the case change is
applied to the material following its argument. For example,
suppose the \field{short} field is defined as:
\begin{verbatim}
short={\NoCaseChange{h}tml}
\end{verbatim}
then the result is
\begin{verbatim}
\NoCaseChange{h}Tml
\end{verbatim}
whereas with
\begin{verbatim}
short={{}html}
\end{verbatim}
then the result is just \code{html}. If a command is followed by 
a group then the case change is applied to the group (unless the
command is \idx{NoCaseChange}, \idx{ensuremath} or \idx{si}). For
example,
suppose the \field{short} field is defined as:
\begin{verbatim}
short={\emph{ht}ml}
\end{verbatim}
then the result is
\begin{verbatim}
\emph{Ht}ml
\end{verbatim}
If a command isn't followed by a group (and it's not \idx{protect})
then no change occurs. For example, 
suppose the \field{short} field is defined as:
\begin{verbatim}
short={\ae html}
\end{verbatim}
then the result is
\begin{verbatim}
\ae html
\end{verbatim}
whereas with
\begin{verbatim}
short={\protect html}
\end{verbatim}
the result is
\begin{verbatim}
\protect Html
\end{verbatim}

See \csopt{dual-short-case-change} to adjust the \field{dualshort}
field.

\optsection{name-case-change}

As \csopt{short-case-change} but is applied to the \field{name}
field. If the \field{text} field hasn't been set, the \field{name}
value is first copied to the \field{text} field.

\optsection{description-case-change}

As \csopt{short-case-change} but is applied to the
\field{description} field.

\optsection{group}

This option may only be used with the \longarg{group} switch.
This will set the \field{group} field to \meta{value} unless
\meta{value} is \optfmt{auto}, in which case the value is
set automatically during the sorting. 
For example:
\begin{verbatim}
\GlsXtrLoadResources[sort=integer,group={Constants},
 src={entries-constants}% data in entries-constants.bib
]
\GlsXtrLoadResources[sort=letter-case,group={Variables},
 src={entries-variables}% data in entries-variables.bib
]
\end{verbatim}
If the \field{type} field hasn't been set in the \ext{bib} files,
these entries will be added to the same glossary, but will
be grouped according to each instance of \gls{GlsXtrLoadResources},
with the provided group label.
The default behaviour is \csopt[auto]{group}.

\optsection{save-child-count}

This is a boolean option. The default setting is
\csopt[false]{save-child-count}. 
If \csopt[true]{save-child-count},
each entry will be assigned a field called \field{childcount} with
the value equal to the number of child entries that have been
selected.

The assignment is done using \idx{GlsXtrSetField} so there's
no associated key.
For example, suppose \filefmt{entries.bib} contains:
\begin{verbatim}
@index{birds}
@index{duck,parent={birds}}
@index{goose,plural={geese},parent={birds}}
@index{swan,parent={birds}}

@index{minerals}
@index{quartz,parent={minerals}}
@index{corundum,parent={minerals}}
@index{amber,parent={minerals}}
@index{gypsum,parent={minerals}}
@index{gold,parent={minerals}}
\end{verbatim}
and the document contains:
\begin{verbatim}
\documentclass{article}

\usepackage[record,style=indexgroup]{glossaries-extra}

\GlsXtrLoadResources[src={entries},save-child-count]

\begin{document}
\gls{duck} and \gls{goose}.
\gls{quartz}, \gls{corundum}, \gls{amber}.

\printunsrtglossaries
\end{document}
\end{verbatim}
Then the \ext{glstex} file will contain:
\begin{verbatim}
\GlsXtrSetField{birds}{childcount}{2}
\GlsXtrSetField{duck}{childcount}{0}
\GlsXtrSetField{goose}{childcount}{0}
\GlsXtrSetField{minerals}{childcount}{3}
\GlsXtrSetField{amber}{childcount}{0}
\GlsXtrSetField{corundum}{childcount}{0}
\GlsXtrSetField{quartz}{childcount}{0}
\end{verbatim}
Note that although \code{birds} has three children defined in the
\ext{bib} file, only two have been selected, so the child count is
set to 2. Similarly the \code{minerals} entry has five children
defined in the \ext{bib} file, but only three have been selected, so
the child count is 3.

The following uses the post-description hook to show the child count
in parentheses:
\begin{verbatim}
\GlsXtrLoadResources[src={entries},category=general,save-child-count]

\renewcommand{\glsxtrpostdescgeneral}{%
  \glsxtrifhasfield{childcount}{\glscurrententrylabel}
  { (child count: \glscurrentfieldvalue.)}%
  {}%
}
\end{verbatim}
(\idx{glsxtrifhasfield} requires at least \sty{glossaries-extra} v1.19.
It's slightly more efficient that \idx{ifglshasfield} provided by
the base \styfmt{glossaries} package, and it doesn't complain if the
entry or field don't exist, but note that \idx{glsxtrifhasfield}
implicitly scopes its content. Use the starred version to omit the
grouping.)

\section{Plurals}
\label{sec:plurals}

Some languages, such as English, have a general rule that plurals
are formed from the singular with a suffix appended. This isn't 
an absolute rule. There are plenty of exceptions (for example,
geese, children, churches, elves, fairies, sheep, mice), so a
simplistic approach of just doing \code{\idx{gls}\margm{label}[s]}
will sometimes produce inappropriate results, so the \styfmt{glossaries}
package provides a \field{plural} key with the corresponding command
\idx{glspl}.

In some cases a plural may not make any sense (for example, if the
term is a verb or symbol), so the \field{plural} key is optional, but to
make life easier for languages where the majority of plurals can
simply be formed by appending a suffix to the singular, the
\styfmt{glossaries} package lets the \field{plural} field default
to the value of the \field{text} field with \idx{glspluralsuffix}
appended. This command is defined to be just the letter \qt{s}.
This means that the majority of terms in such languages don't need to have the
\field{plural} supplied as well, and you only need to use it for the
exceptions.

For languages that don't have this general rule, the \field{plural}
field will always need to be supplied for nouns.

There are other plural fields, such as \field{firstplural},
\field{longplural} and \field{shortplural}. Again, if you are using
a language that doesn't have a simple suffix rule, you'll have to
supply the plural forms if you need them (and if a plural makes
sense in the context).

If these fields are omitted, the \styfmt{glossaries} package follows
these rules:
\begin{itemize}
\item If \field{firstplural} is missing, then \idx{glspluralsuffix}
is appended to the \field{first} field, if that field has been
supplied. If the \field{first} field hasn't been supplied but the
\field{plural} field has been supplied, then the \field{firstplural}
field defaults to the \field{plural} field. If the \field{plural}
field hasn't been supplied, then both the \field{plural} and
\field{firstplural} fields default to the \field{text} field (or
\field{name}, if no \field{text} field) with \idx{glspluralsuffix}
appended.

\item If the \field{longplural} field is missing, then 
\idx{glspluralsuffix} is appended to the \field{long} field, if the
\field{long} field has been supplied.

\item If the \field{shortplural} field is missing then, \emph{with
the base \styfmt{glossaries} acronym mechanism}, \idx{acrpluralsuffix}
is appended to the \field{short} field.

\end{itemize}

The last case is different with the \sty{glossaries-extra} extension 
package. The \field{shortplural} field defaults to the \field{short}
field with \idx{abbrvpluralsuffix} appended \emph{unless overridden
by category attributes}. This suffix command is set by the
abbreviation styles. This means that every time an abbreviation
style is implemented, \idx{abbrvpluralsuffix} is redefined. Most
styles simply define this command as:
\begin{verbatim}
\renewcommand*{\abbrvpluralsuffix}{\glsxtrabbrvpluralsuffix}
\end{verbatim}
where \idx{glsxtrabbrvpluralsuffix} expands to \idx{glspluralsuffix}.
The \qt{sc} styles (such as \abbrstyle{long-short-sc}) use a different
definition:
\begin{verbatim}
\renewcommand*{\abbrvpluralsuffix}{\protect\glsxtrscsuffix}
\end{verbatim}
This allows the suffix to be reverted back to the upright font,
counter-acting the affect of the small-caps font.

This means that if you want to change or strip the suffix used for
the plural short form, it's usually not sufficient to redefine
\idx{abbrvpluralsuffix}, as the change will be undone the next time
the style is applied. Instead, for a document-wide solution, you
need to redefine \idx{glsxtrabbrvpluralsuffix}. Alternatively you can
use the category attributes.

There are two attributes that affect the short plural suffix
formation. The first is \catattr{aposplural} which uses the suffix
\begin{verbatim}
'\abbrvpluralsuffix
\end{verbatim}
That is, an apostrophe followed by \idx{abbrvpluralsuffix} is
appended. The second attribute is \catattr{noshortplural} which
suppresses the suffix and simply sets \field{shortplural} to the
same as \field{short}.

With \bibgls, if you have some abbreviations where the plural should
have a suffix and some where the plural shouldn't have a suffix
(for example, the document has both English and French abbreviations)
then there are two approaches.

The first approach is to use the category attributes. For example:
\begin{verbatim}
\glssetcategoryattribute{french}{noshortplural}
\end{verbatim}
Now just make sure all the French abbreviations are have their
\field{category} field set to \optfmt{french}:
\begin{verbatim}
\GlsXtrLoadResources[src={fr-abbrvs},category={french}]
\end{verbatim} 

The other approach is to use the options listed below.

\optsection{short-plural-suffix}

Sets the plural suffix for the default \field{shortplural} to \meta{value}.  If
this option is omitted or if
\csopt[use-default]{short-plural-suffix}, then \bibgls\ will leave
it to \styfmt{glossaries-extra} to determine the appropriate default.
If the \meta{value} is omitted or empty, the suffix is set to empty.

\optsection{dual-short-plural-suffix}

Sets the plural suffix for the default \field{dualshortplural} field to
\meta{value}.  If this option is omitted or if
\csopt[use-default]{dual-short-plural-suffix}, then \bibgls\ will leave it to
\styfmt{glossaries-extra} to determine the appropriate default.
If the \meta{value} is omitted or empty, the suffix is set to empty.

\section{Location List Options}
\label{sec:locationopts}

The \styopt{record} package option automatically adds two new keys: 
\field{loclist} and \field{location}. These two fields are set by
\bibgls\ from the information supplied in the \ext{aux} file (unless
the option \csopt[false]{save-locations} is used). The
\field{loclist} field has the syntax of an \sty{etoolbox} internal list
and includes every location (except for the discarded duplicates and
ignored formats).
Each item in the list is provided in the form
\begin{alltt}
\idx{glsseeformat}\oargm{tag}\margm{label list}\marg{}
\end{alltt}
for the cross-reference supplied by the \field{see} field,
\begin{alltt}
\idx{glsxtruseseealsoformat}\margm{label list}
\end{alltt}
for the cross-reference supplied by the \field{seealso} field,
and
\nosecdef{glsnoidxdisplayloc}
for the locations. You can iterate through the \field{loclist} value
using one of \sty{etoolbox}'s internal list loops (either
by first fetching the list using \idx{glsfieldfetch}
or through \styfmt{glossaries-extra}'s \idx{glsxtrfielddolistloop}
or \idx{glsxtrfieldforlistloop} shortcuts).

The \meta{format} is that supplied by the \glsopt{format} key
when using commands like \idx{gls} or \idx{glsadd} (the encapsulator or encap in
\idx!{makeindex} parlance). If omitted, the default
\glsopt[glsnumberformat]{format} is assumed (unless this
default value is changed with \idx{GlsXtrSetDefaultNumberFormat},
provided by \sty{glossaries-extra} v1.19+).

Ranges can be explicitly formed using the parenthetical encap
syntax \glsopt[(]{format} and
\glsopt[)]{format} or \glsopt[(\meta{csname}]{format} and
\glsopt[)\meta{csname}]{format} (where \meta{csname} is the name of 
a text-block command without the initial backslash) in the optional
argument of commands like \idx{gls} or \idx{glsadd}. These will always
form a range, regardless of \csopt{min-loc-range}, and will be
encapsulated by \csref{bibglsrange}. (This command is not used with
ranges that are formed by collating consecutive locations.)

Explicit ranges don't merge with neighbouring locations, but will
absorb any single locations within the range that don't conflict.
(Conflicts will be moved to the start of the explicit range.)
For example, if \verb|\gls{sample}| is used on page~1,
\verb|\gls[format=(]{sample}| is used on page~2, 
\verb|\gls{sample}| is used on page~3, and
\verb|\gls[format=)]{sample}| is used on page~4, then the location
list will be 1, 2--4. The entry on page~3 is absorbed into the
explicit range, but the range can't be expanded to include page~1.
If the entry on page~3 had a different format to the explicit range,
for example \verb|\gls[format=textbf]{sample}| then it would cause a
warning and be moved before the start of the range so that the
location list would then be 1, \textbf{3}, 2--4. 

The special format \glsaddopt[glsignore]{format} is provided
by the \styfmt{glossaries} package for cases where the location
should be ignored. (The command \idx{glsignore} simply ignores its
argument.) This works reasonably well if an entry only has the one
location, but if the entry happens to be indexed again, it can lead
to an odd empty gap in the location list with a spurious comma. If
\bibgls\ encounters a record with this special format, the entry
will be selected but the record will be discarded.

This means that the location list will be empty if the entry was
only indexed with \optfmt{glsignore}, but if the entry was also
indexed with another format then the location list won't include the
ignored record.  (This format is used by \idx{glsaddallunused} but
remember that iterative commands like this don't work with \bibgls.
Instead, just use \csopt[all]{selection} to select all entries.)

For example, suppose you only want main matter locations in the
number list, but you want entries that only appear in the back matter 
to still appear in the glossary (without a location list), then you could do:
\begin{verbatim}
\backmatter
\GlsXtrSetDefaultNumberFormat{glsignore}
\end{verbatim}
(This command requires v1.19 of \sty{glossaries-extra}.) If you also
want to drop front matter locations as well:
\begin{verbatim}
\frontmatter
\GlsXtrSetDefaultNumberFormat{glsignore}
...
\mainmatter
\GlsXtrSetDefaultNumberFormat{glsnumberformat}
...
\backmatter
\GlsXtrSetDefaultNumberFormat{glsignore}
\end{verbatim}

Note that explicit range formations aren't discarded, so if
\optfmt{glsignore} is used in a range, such as
\begin{verbatim}
\glsadd[format=(glsignore]{sample}
... 
\glsadd[format=)glsignore]{sample} 
\end{verbatim}
then the range will be included in the location list (encapsulated
with \idx{glsignore}), but this case would be a rather odd use of
this special format and is not recommended.

The locations are always listed in the order in which they were indexed,
(except for the cross-reference which may be placed at the start or
end of the list or omitted).
This is different to \idx!{xindy} and \idx!{makeindex} where you can
specify the ordering (such as lower case Roman first, then digits,
etc), but unlike those applications, \bibgls\ allows any location,
although it may not be able to work out an integer representation.
(With \idx!{xindy}, you can define new location formats, but you need
to remember to add the appropriate code to the custom module.)

It's possible to define a custom glossary style where 
\idx{glossentry} (and the child form \idx{subglossentry}) ignore the
final argument (which will be the \field{location} field)
and instead parse the \field{loclist} field and re-order the
locations or process them in some other way. Remember that you can
also use \idx{glsnoidxloclist}
provided by \styfmt{glossaries}. For example:
\begin{verbatim}
\glsfieldfetch{gls.sample}{loclist}{\loclist}% fetch location list
\glsnoidxloclist{\loclist}% iterate over locations
\end{verbatim}
This uses \idx{glsnoidxloclisthandler} as the list's handler
macro, which simply displays each location separated by \idx{delimN}.
(See also
\href{http://www.dickimaw-books.com/latex/admin/html/foreachtips.shtml}{Iteration
Tips and Tricks}.)

Each location is listed in the \ext{aux} file in the form:
\nosecdef{glsxtr@record}
Exact duplicates are discarded. For example, if \code{cat}
is indexed twice on page 1:
\begin{verbatim}
\glsxtr@record{cat}{}{page}{glsnumberformat}{1}
\glsxtr@record{cat}{}{page}{glsnumberformat}{1}
\end{verbatim}
then the second record is discarded. Only the first record is added
to the location list.

Partial duplicates, where all arguments match except for
\meta{format}, may be discarded depending on the value
of \meta{format}. For example, if page~1 of the document
uses \verb|\gls{cat}| and \verb|\gls[format=hyperbf]{cat}|
then the \ext{aux} file will contain:
\begin{verbatim}
\glsxtr@record{cat}{}{page}{glsnumberformat}{1}
\glsxtr@record{cat}{}{page}{hyperbf}{1}
\end{verbatim}
This is a partial record match. In this case, \bibgls\ 
makes the following tests:
\begin{itemize}
\item If one of the formats includes a range formation, the
range takes precedence.

\item If one of the formats is \code{glsnumberformat} (as in the
above example) or \code{glsignore}, that format will be skipped.
So in the above example, the second record will be added to the
location list, but not the first. (A message will only be written to
the transcript if the \longarg{debug} switch is used.) The default
\code{glsnumberformat} will take precedence over the ignored
format \code{glsignore}.

\item If a mapping has been set with the \longarg{map-format}
switch that mapping will be checked.
\item Otherwise the duplicate record will be discarded with a
warning.
\end{itemize}

The \field{location} field is used to store the formatted location
list. The code for this list is generated by \bibgls\ based on the
information provided in the \ext{aux} file, the presence of the
\field{see} or \field{seealso} field and the various settings described in this
chapter. When you display the glossary using \idx{printunsrtglossary},
if the \field{location} field is present it will be displayed
according to the glossary style (and other factors, such as whether the
\styopt{nonumberlist} option has been used, either as a package
option or supplied in the optional argument of \idx{printunsrtglossary}).
For more information on adjusting the formatting see the
\styfmt{glossaries} and \styfmt{glossaries-extra} user manuals.

\optsection{save-locations}

By default, the locations will be processed and stored in the
\field{location} and \field{loclist} fields. However, if you don't
want the location lists (for example, you are using the
\styopt{nonumberlist} option or you are using \idx{xindy} with a
custom location rule), then there's no need for \bibgls\ to process
the locations. To switch this function off, just use
\csopt[false]{save-locations}. Note that with this setting, if
you're not additionally using \idx{makeindex} or \idx{xindy}, then
the locations won't be available even if you don't have the
\styopt{nonumberlist} option set.

\optsection{min-loc-range}

By default, three or more consecutive locations \meta{loc-1},
\meta{loc-2}, \ldots, \meta{loc-n} are compressed into
the range \code{\meta{loc-1}\idx{delimR} \meta{loc-n}} (where
\idx{delimR} is provided by the \styfmt{glossaries} package). Otherwise
the locations are separated by \idx{delimN} (again provided by
\styfmt{glossaries}). As mentioned above, these aren't merged with
explicit range formations.

You can change this with the \csopt{min-loc-range} setting where
\meta{value} is either \optfmt{none} (don't form ranges) or an
integer greater than one indicating how many consecutive locations should be
converted into a range.

\bibgls\ determines if one location
\margm{prefix-2}\margm{counter-2}\margm{format-2}\margm{location-2}
is one unit more than another location
\margm{prefix-1}\margm{counter-1}\margm{format-1}\margm{location-1} 
according to the following:
\begin{enumerate}
\item\label{itm:pre} If \meta{prefix-1} is not equal to \meta{prefix-2} or
\meta{counter-1} is not equal to \meta{counter-2} or \meta{format-1}
is not equal to \meta{format-2}, then the locations aren't
considered consecutive.
\item\label{itm:emptyloc} If either \meta{location-1} or \meta{location-2} are empty,
then the locations aren't considered consecutive.
\item\label{itm.csmatch} If both \meta{location-1} and \meta{location-2} match the
pattern (line break for clarity only)\footnote{The Java class \code{\csfmt{p}\marg{javaDigit}}
used in the regular expression will not only match the Western
Arabic digits 0,\ldots, 9 but also digits in other scripts.
Similarly the alphabetic classes will match alphabetic characters
outside the Basic Latin set.}
\begin{verbatim}
(.*?)(?:\\protect\s*)?(\\[\p{javaAlphabetic}@]+)\s*\{([\p{javaDigit}
\p{javaAlphabetic}]+)\}
\end{verbatim}
then:
  \begin{itemize}
  \item if the control sequence matched by group 2 isn't the same for
  both locations, the locations aren't considered consecutive;
  \item if the argument of the control sequence (group 3) is the same for
  both locations, then the test is retried with \meta{location-1}
set to group 1 of the first pattern match and \meta{location-2}
set to group 1 of the second pattern match;
  \item otherwise the test is retried with \meta{location-1} set to
group 3 of the first pattern match and \meta{location-2} set to
group 3 of the second pattern match.
  \end{itemize}
\item\label{itm:decmatch} If both \meta{location-1} and \meta{location-2} match the
pattern
\begin{verbatim}
(.*?)([^\p{javaDigit}]?)(\p{javaDigit}+)
\end{verbatim}
then:
  \begin{enumerate}
  \item\label{itm:decgrp3eq} if group 3 of both pattern matches are
equal then:
  \begin{enumerate}
   \item\label{itm:decgrp3nz} if group 3 isn't zero, the locations
aren't considered consecutive;
   \item if the separators (group 2) are different the test is
retried with \meta{location-1} set to the concatenation of the first
two groups \meta{group-1}\meta{group-2} of the first pattern match 
and \meta{location-2} set to the concatenation of the first two groups
\meta{group-1}\meta{group-2} of the second pattern
match;
   \item\label{itm:decgrp3eqsepeq} if the separators (group 2) are the same the test is
retried with \meta{location-1} set to the first
group \meta{group-1} of the first pattern match 
and \meta{location-2} set to the first group
\meta{group-1} of the second pattern match.
  \end{enumerate}
  \item If \meta{group-1} of the first pattern match (of
\meta{location-1}) doesn't equal
\meta{group-1} of the second pattern match (of \meta{location-2})
or \meta{group-2} of the first pattern match (of
\meta{location-1}) doesn't equal
\meta{group-2} of the second pattern match (of \meta{location-2})
then the locations aren't considered consecutive;
   \item\label{itm:decgrp3} If $0 < l_2 - l_1 \leq d $
where $l_2$ is \meta{group 3} of the second pattern match,
$l_1$ is \meta{group 3} of the first pattern match and
$d$ is the value of \optfmt{max-loc-diff} then the locations
are consecutive otherwise they're not consecutive.
  \end{enumerate}
\item\label{itm:rommatch} The next pattern matches for \meta{prefix}\meta{sep}\meta{n}
where \meta{n} is a lower case Roman numeral, which is converted to
a decimal value and the test is performed in the same way as the 
above \hyperref[itm:decmatch]{decimal test}.
\item\label{itm:Rommatch} The next pattern matches for \meta{prefix}\meta{sep}\meta{n}
where \meta{n} is an upper case Roman numeral, which is converted to
a decimal value and the test is performed
in the same way as the above \hyperref[itm:decmatch]{decimal test}.
\item\label{itm:alphmatch} The next pattern matches for \meta{prefix}\meta{sep}\meta{c}
where \meta{c} is either a lower case letter from \code{a} to
\code{z} or an upper case letter from \code{A} to \code{Z}.
The character is converted to its code point and the test is
performed in the same way as the \hyperref[itm:decmatch]{decimal pattern} above.
\item\label{itm:nomatch} If none of the above, the locations aren't considered
consecutive.
\end{enumerate} 

Examples:
\begin{enumerate}
\item
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{1}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{2}
\end{verbatim}
These records are consecutive. The prefix, counter and format are
identical (so the test passes step~\ref{itm:pre}), the locations match
the \hyperref[itm:decmatch]{decimal pattern} and the test in
step~\ref{itm:decgrp3} passes.

\item
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{1}
\glsxtr@record{gls.sample}{}{page}{textbf}{2}
\end{verbatim}
These records aren't consecutive since the formats are different.

\item
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{A.i}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{A.ii}
\end{verbatim}
These records are consecutive. The prefix, counter and format are
identical (so it passes step~\ref{itm:pre}). The locations match
the \hyperref[itm:rommatch]{lower case Roman numeral pattern}, where
\code{A} is considered a prefix and the dot is consider a
separator. The Roman numerals i and ii are converted to decimal and
the test is retried with the locations set to 1 and 2, respectively.
This now passes the decimal pattern test (step~\ref{itm:decgrp3}).

\item
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{i.A}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{ii.A}
\end{verbatim}
These records aren't consecutive. They match the
\hyperref[itm:alphmatch]{alpha pattern}. The first location is
considered to consist of the prefix \code{i}, the separator
\code{.} (dot) and the number given by the character code of A. 
The second location is considered to consist of the prefix
\code{ii}, the separator \code{.} (dot) and the number 
given by the character code of A.

The test fails because the numbers are equal and the prefixes are
different.

\item
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{1.0}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{2.0}
\end{verbatim}
These records are consecutive. They match the \hyperref[itm:decmatch]{decimal
pattern}, and then step~\ref{itm:decgrp3eq} followed by
step~\ref{itm:decgrp3eqsepeq}. The \code{.0} part is discarded and
the test is retried with the first location set to 1 and the second
location set to 2.

\item
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{1.1}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{2.1}
\end{verbatim}
These records aren't consecutive as the test branches off into
step~\ref{itm:decgrp3nz}.

\item
\begin{verbatim}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{\@alph{1}}
\glsxtr@record{gls.sample}{}{page}{glsnumberformat}{\@alph{2}}
\end{verbatim}
These records are consecutive. The locations match the 
\hyperref[itm.csmatch]{control sequence pattern}. The control
sequences are the same, so the test is retried with the first
location set to 1 and the second location set to 2.
(Note that \csref{glsxtrresourcefile} changes the category code of
\code{@} to allow for internal commands in locations.)
\end{enumerate}

\optsection{max-loc-diff}

This setting is used to determine whether two locations are
considered consecutive.
The value must be an integer greater than or equal to 1.
(The default is \optfmt{1}.)

For two locations, \meta{location-1} and \meta{location-2},
that have numeric values $n_1$ and $n_2$ (and identical prefix,
counter and format), then the sequence \meta{location-1},
\meta{location-2} is considered consecutive if
\[
0 < n_2 - n_1 \leq \text{\meta{max-loc-diff}}
\]
The default value of 1 means that \meta{location-2} immediately
follows \meta{location-1} if $n_2 = n_1+1$.

For example, if \meta{location-1} is \qt{B} and \meta{location-2} 
is \qt{C}, then $n_1 = 66$ and $n_2 = 67$. Since $n_2 = 67 = 66+1=
n_1+1$ then \meta{location-2} immediately follows \meta{location-1}.

This is used in the range formations within the location lists.
So, for example, the list \qt{1, 2, 3, 5, 7, 8, 10, 11, 12, 58, 59,
61} becomes
\qt{1--3, 5, 7, 8, 10--12, 58, 59, 61}.

The automatically indexing of commands like \idx{gls} means that
the location lists can become long and ragged. You could
deal with this by switching off the automatic indexing and
only explicitly index pertinent use or you can adjust
the value of \optfmt{max-loc-diff} so that a range can be formed even
there are one or two gaps in it.
By default, any location ranges that have skipped gaps in this
manner will be followed by \csref{bibglspassim}. The default
definition of this command is obtained from the resource file.
For English, this is \verb*| passim| (space followed by \qt{passim}).

So with the above set of locations, if \csopt[2]{max-loc-diff} then 
the list becomes \qt{1--12 passim, 58--61 passim} which now highlights that
there are two blocks within the document related to that
term.

\optsection{suffixF}

If set, a range consisting of two consecutive locations 
\meta{loc-1} and \meta{loc-2} will be
displayed in the location list as \meta{loc-1}\meta{value}.

Note that \csopt[\empty]{suffixF} sets the suffix to the
empty string. To remove the suffix formation use
\csopt[none]{suffixF}.

The default is \csopt[none]{suffixF}.

\optsection{suffixFF}

If set, a range consisting of three or more consecutive locations 
\meta{loc-1} and \meta{loc-2} will be
displayed in the location list as \meta{loc-1}\meta{value}.

Note that \csopt[\empty]{suffixFF} sets the suffix to the
empty string. To remove the suffix formation use
\csopt[none]{suffixFF}.

The default is \csopt[none]{suffixFF}.

\optsection{see}

If an entry has a \field{see} field, this can be placed before or
after the location list, or completely omitted (but the value will
still be available in the \field{see} field for use with
\idx{glsxtrusesee}). This option may take the following values:
\begin{itemize}
\item \optfmt{omit}: omit the see reference from the location
list.
\item \optfmt{before}: place the see reference before the location
list.
\item \optfmt{after}: place the see reference after the location
list (default).
\end{itemize}
The \meta{value} part is required.

The separator between the location list and the cross-reference is
provided by \csref{bibglsseesep}. This separator is omitted if the
location list is empty. The cross-reference is written to the
\field{location} field using \gls{bibglsusesee}\margm{label}.

\optsection{seealso}

This is like \csopt{see} but governs the location of the cross-references
provided by the \field{seealso} field. You need at least v1.16
of \sty{glossaries-extra} for this option. The values are the
same as for \csopt{see} but the separator is given by
\csref{bibglsseealsosep}. The cross-reference is written to the
\field{location} field using \gls{bibglsuseseealso}\margm{label}.

\optsection{alias-loc}

If an entry has an \field{alias} field, the location list
may be retained or omitted or transferred to the target entry.
The \meta{value} may be one of:
\begin{itemize}
\item\optfmt{keep}: keep the location list;
\item\optfmt{transfer}: transfer the location list;
\item\optfmt{omit}: omit the location list.
\end{itemize}
The default setting is \csopt[transfer]{alias-loc}.
In all cases, the target entry will be added to the \field{see}
field of the entry with the \field{alias} field, unless it
already has a \field{see} field (in which case the \field{see} value
is left unchanged).

Note that with \csopt[transfer]{alias-loc}, both the aliased
entry and the target entry must be in the same resource set.
(That is, both entries have been selected by the same instance of
\csref{glsxtrresourcefile}.) If you have \sty{glossaries-extra} version
1.12, you may need to redefine \idx{glsxtrsetaliasnoindex} to do
nothing if the location lists aren't showing correctly
with aliased entries. (This was corrected in version 1.13.)

\optsection{loc-prefix}

The \csopt{loc-prefix} setting indicates that the location lists
should begin with \csref{bibglslocprefix}\margm{n}. The \meta{value} may
be one of the following:
\begin{itemize}
\item \optfmt{false}: don't insert \gls{bibglslocprefix}\margm{n} at the start
of the location lists (default).
\item \optfmt{\margm{prefix-1},\margm{prefix-2},\ldots,\margm{prefix-n}}:
insert \gls{bibglslocprefix}\margm{n} (where \meta{n} is the number of
locations in the list) at the start of each location list and the
definition of \gls{bibglslocprefix} will be appended to the glossary
preamble providing an \idx{ifcase} condition:
\begin{alltt}
\csfmt{providecommand}\marg{\gls{bibglslocprefix}}[1]\marg{\%
  \idx{ifcase}\string#1
  \csfmt{or} \meta{prefix-1}\csref{bibglspostlocprefix}
  \csfmt{or} \meta{prefix-2}\csfmt{bibglspostlocprefix}
  \ldots
  \csfmt{else} \meta{prefix-n}\csfmt{bibglspostlocprefix}
  \csfmt{fi}
}
\end{alltt}

\item \optfmt{comma}: 
essentially equivalent to \csopt[\marg{,~}]{loc-prefix} but
avoids confusion with the list format. 
\item \optfmt{list}: equivalent to \csopt[\idx{pagelistname} ]{loc-prefix}.
\item \optfmt{true}: equivalent to 
\csopt[\csref{bibglspagename},\csref{bibglspagesname}]{loc-prefix},
where the definitions of \gls{bibglspagename} and
\gls{bibglspagesname} are obtained from the \code{tag.page} and
\code{tag.pages} entries in \bibgls's \langxml.
This setting works best if the document's language matches the 
language file. However, you can redefine these commands within
the document's language hooks or in the glossary preamble.
\end{itemize}

If \meta{value} is omitted, \optfmt{true} is assumed. Take care not
to mix different values of \csopt{loc-prefix} for entries for the
same \csopt{type} setting. It's okay to mix \csopt[false]{loc-prefix} with 
another value, but don't mix non-\optfmt{false} values. 
See the description of \csref{bibglslocprefix} for
further details.

For example:
\begin{verbatim}
\GlsXtrLoadResources[type=main,src={entries1},loc-prefix=false]
\GlsXtrLoadResources[type=main,src={entries2},loc-prefix]
\GlsXtrLoadResources[type=symbols,src={entries3},loc-prefix={p.,pp.}]
\end{verbatim}
This works since the conflicting \csopt[p.,pp.]{loc-prefix} and
\csopt[true]{loc-prefix} are in different glossaries (assigned through the
\csopt{type} key). The entries fetched from \filefmt{entries1.bib}
won't have a location prefix. The entries fetched from
\filefmt{entries2.bib} will have the location prefix obtained from
the language resource file. The entries fetched from
\filefmt{entries3.bib} will have the location prefix \qt{p.}\ or
\qt{pp.} (Note that using the \csopt{type} option isn't the same as
setting the \field{type} field for each entry in the \ext{bib}
file.)

If the \csopt{type} option isn't used:
\begin{verbatim}
\GlsXtrLoadResources[src={entries1},loc-prefix=false]
\GlsXtrLoadResources[src={entries2},loc-prefix]
\GlsXtrLoadResources[src={entries3},loc-prefix={p.,pp.}]
\end{verbatim}
then \csopt[true]{loc-prefix} takes precedence over
\csopt[p.,pp.]{loc-prefix} (since it was used first). The entries fetched from
\filefmt{entries1.bib} still won't have a location prefix, but the entries
fetched from both \filefmt{entries2.bib} and \filefmt{entries3.bib}
have the location prefixes obtained from the language resource file.

\optsection{loc-suffix}

This is similar to \csopt{loc-prefix} but there are some subtle
differences. In this case \meta{value} may either be the keyword 
\optfmt{false} (in which case the location suffix is omitted)
or a comma-separated list
\optfmt{\meta{suffix-0}\dcomma\meta{suffix-1}\dcomma\ldots\dcomma\meta{suffix-n}}
where \meta{suffix-0} is the suffix to use when the location list
only has a cross-reference with no locations, \meta{suffix-1} is the suffix to use
when the location list has one location (optionally with a
cross-reference), and so on. The final \meta{suffix-n} in the list
is the suffix when the location list has \meta{n} or more locations
(optionally with a cross-reference).

This option will append \csref{bibglslocsuffix}\margm{n} to location
lists that either have a cross-reference or have at least one location.
Unlike \gls{bibglslocprefix}, this command isn't used when the
location list is completely empty. Also, unlike
\gls{bibglslocprefix}, this suffix command doesn't have an equivalent
to \gls{bibglspostlocprefix}.

If \meta{value} omitted, \csopt[\idx{at}.]{loc-suffix} is assumed.
The default is \csopt[false]{loc-suffix}.

As with \csopt{loc-prefix}, take care not to mix different values
of \csopt{loc-suffix} for entries in the same glossary type.

\optsection{loc-counters}

Commands like \idx{gls} allow you to select a different 
counter to use for the location for that specific instance
(overriding the default counter for the entry's glossary type).
This is done with the \glsopt{counter} option. For example,
consider the following document:
\begin{verbatim}
\documentclass{article}

\usepackage[colorlinks]{hyperref}
\usepackage[record,style=tree]{glossaries-extra}

\GlsXtrLoadResources[
  src={entries}% data in entries.bib
]

\begin{document}

\gls{pi}.

\begin{equation}
\gls[counter=equation]{pi}
\end{equation}

\begin{equation}
\gls[counter=equation]{pi}
\end{equation}

\newpage

\begin{equation}
\gls[counter=equation]{pi}
\end{equation}


\newpage

\gls{pi}.

\newpage

\gls{pi}.

\newpage

\gls{pi}.

\newpage

\printunsrtglossaries
\end{document}
\end{verbatim}
This results in the location list \qt{1, 1--3, 3--5}. This
looks a little odd and it may seem as though the range formation
hasn't worked, but the locations are actually: page~1, equation~1,
equation~2, equation~3, page~3, page~4 and page~5. Ranges can't
be formed across different counters.

The \csopt[\meta{list}]{loc-counters} option instructs \bibgls\ 
to group the locations according to the counters given in
the comma-separated \meta{list}. If a location has a counter
that's not listed in \meta{list}, then the location is discarded.

For example:
\begin{verbatim}
\GlsXtrLoadResources[
  loc-counters={equation,page},% group locations by counter
  src={entries}% data in entries.bib
]
\end{verbatim}
This will first list the locations for the \counter{equation}
counter and then the locations for the \counter{page} counter.
Each group of locations is encapsulated within the command
\csref{bibglslocationgroup}\margm{n}\margm{counter}\margm{locations}.
The groups are separated by \csref{bibglslocationgroupsep}
(which defaults to \idx{delimN}).

The \meta{list} value must be non-empty.  Use
\csopt[as-use]{loc-counters} to restore the default behaviour, where
the locations are listed in the document order of use, or
\csopt[false]{save-locations} to omit the location lists.  Note that
you can't form counter groups from
\hyperref[sec:supplementalopts]{supplemental location lists}.

\section{Supplemental Locations}
\label{sec:supplementalopts}

\emph{These options require at least version 1.14 of \sty{glossaries-extra}.}

\optsection{supplemental-locations}

The \sty{glossaries-extra} package (from v1.14) provides a way of
manually adding locations in supplemental documents through the use
of the \glsaddopt{thevalue} option in the optional argument of
\idx{glsadd}.  Setting values manually is inconvenient and can result
in errors, so \bibgls\ provides a way of doing this automatically.
Both the main document and the supplementary document need to use
the \styopt{record} option. The entries provided in the \csopt{src}
set must have the same labels as those used in the supplementary
document. (The simplest way to achieve this is to ensure that both
documents use the same \ext{bib} files and the same prefixes.)

For example, suppose the file \filefmt{entries.bib} contains:
\begin{verbatim}
@entry{sample,
  name={sample},
  description="an example entry"
}

@abbreviation{html,
  short="html",
  long={hypertext markup language}
}
@abbreviation{ssi,
  short="ssi",
  long="server-side includes"
}

@index{goose,plural="geese"}
\end{verbatim}
Now suppose the supplementary document is contained in the file
\filefmt{suppl.tex}:
\begin{verbatim}
\documentclass{article}

\usepackage[colorlinks]{hyperref}
\usepackage[record,counter=section]{glossaries-extra}

\GlsXtrLoadResources[src=entries]

\renewcommand{\thesection}{S\arabic{section}}
\renewcommand{\theHsection}{\thepart.\thesection}

\begin{document}
\part{Sample Part}
\section{Sample Section}
\gls{goose}. \gls{sample}.

\part{Another Part}
\section{Another Section}
\gls{html}.
\gls{ssi}.

\printunsrtglossaries
\end{document}
\end{verbatim}
This uses the \counter{section} counter for the locations and has a
prefix (\verb|\thepart.|) for the section hyperlinks.

Now let's suppose I have another document called \filefmt{main.tex}
that uses the \code{sample} entry, but also needs to include the
location (S1) from the supplementary document. The manual approached
offered by \styfmt{glossaries-extra} is quite cumbersome and requires
setting the \catattr{externallocation} attribute and using
\idx{glsadd} with \glsaddopt[S1]{thevalue}, \glsaddopt[I.S1]{theHvalue}
and \glsaddopt[glsxtrsupphypernumber]{format}.

This can be simplified with \bibgls\ by using the
\optfmt{supplemental-locations} option. The value should be the base
name (without the extension) of the supplementary document
(\optfmt{suppl} in the above example). For example:
\begin{verbatim}
\documentclass{article}

\usepackage[colorlinks]{hyperref}
\usepackage[record]{glossaries-extra}

\GlsXtrLoadResources[
 supplemental-locations=suppl,% fetch records from suppl.aux
 src=entries]

\begin{document}
\Gls{sample} document.

\printunsrtglossaries

\end{document}
\end{verbatim}
The location list for \code{sample} will now be \qt{1, S1} (page~1
from the main document and S1 from the supplementary document). Note
that the original location format from the supplementary document
will be replaced by \optfmt{glsxtrsupphypernumber}, which will
produce an external hyperlink if the main document loads the
\sty{hyperref} package. (Note that not all PDF viewers can handle
external hyperlinks, and some that can open the external PDF file may not 
recognise the destination within that file.)

The supplementary locations lists are encapsulated within
\gls{bibglssupplemental}.

\optsection{supplemental-selection}

In the above example, only the \code{sample} entry is listed in
the main document, even though the supplementary document also
references the \code{goose}, \code{html} and \code{ssi}
entries. By default, only those entries that are referenced in the
main document will have supplementary locations added (if found in
the supplementary document's \ext{aux} file). You can additionally
include other entries that are referenced in the supplementary
document but not in the main document using
\optfmt{supplemental-selection}. The \meta{value} may be one of the
following:
\begin{itemize}
\item \optfmt{all}: add all the entries in the supplementary
document that have been defined in the \ext{bib} files listed in
\csopt{src} for this resource set in the main document.
\item \optfmt{selected}: only add supplemental locations for entries
that have already been selected by this resource set.
\item \meta{label-1},\ldots,\meta{label-2}: in addition to all those
entries that have already been selected by this resource set, also
add the entries identified in the comma-separated list. If a label
in this list doesn't have a record in the supplementary document's
\ext{aux} file, it will be ignored.
\end{itemize}
Any records in the supplementary \ext{aux} file that aren't defined
by the current resource set (through the \ext{bib} files listed in
\csopt{src}) will be ignored. Entry aliases aren't taken into
account when including supplementary locations.

For example:
\begin{verbatim}
\documentclass{article}

\usepackage[colorlinks]{hyperref}
\usepackage[record]{glossaries-extra}

\GlsXtrLoadResources[
 supplemental-locations=suppl,
 supplemental-selection={html,ssi},
 src=entries]

\begin{document}
\Gls{sample} document.

\printunsrtglossaries

\end{document}
\end{verbatim}
This will additionally add the \code{html} and \code{ssi} entries
even though they haven't been used in this document. The
\code{goose} entry used in the supplementary document won't be
included.

If an entry has both a main location list and a supplementary
location list (such as the \code{sample} entry above), the lists
will be separated by \csref{bibglssupplementalsep}.

\optsection{supplemental-category}

The \optfmt{category} for entries containing supplemental location
lists may be set using \optfmt{supplemental-category}. If unset,
\meta{value} defaults to the same as that given by the
\csopt{category} option. The \meta{value} may either be a known
identifier (as per \csopt{category}) or the category label. For example:
\begin{verbatim}
\documentclass{article}

\usepackage[colorlinks]{hyperref}
\usepackage[record]{glossaries-extra}

\GlsXtrLoadResources[
 supplemental-locations=suppl,
 supplemental-selection={html,ssi},
 supplemental-category={supplemental},
 src=entries]

\begin{document}
\Gls{sample} document.

\printunsrtglossaries

\end{document}
\end{verbatim}

\section{Sorting}
\label{sec:sortingopts}

Entries are typically sorted (for example, alphabetically
or in order of use), but the \styfmt{glossaries-extra} package
is versatile enough to be used in wider contexts than simple
terms, symbols or abbreviations. For example, entries could
contain theorems or problems where the \field{name} supplies
the title and the \field{description} provides a description
of the theorem or problem. Another field might then contain
the proof or solution. Therefore, somewhat unusually for
an indexing application, \bibgls\ also provides the option
to shuffle the entries instead of sorting them.

\optsection{sort}

The \csopt{sort} key indicates how entries should be sorted.
If the \meta{value} is omitted, \csopt[doc]{sort} is assumed. If the
\csopt{sort} option isn't used then \csopt[locale]{sort} is assumed.
The reverse sort methods reverse the algorithm used by the
comparators. This means that the \optfmt{\meta{method}-reverse}
methods may not produce a list that's the exact reverse of the
underlying non-reversed \meta{method}. The reverse sorts maintain
hierarchy, so sub-entries will still be listed after the parent
entry.

Remember that you can have \atentry{preamble} definitions that
can be hidden from \bibgls's interpreter. For example,
\filefmt{no-interpret-preamble.bib} might contain:
\begin{verbatim}
@preamble{"\providecommand{\sortop}[2]{#1 #2}"}
\end{verbatim}
which is loaded using
\begin{verbatim}
\GlsXtrLoadResources[src={no-interpret-preamble},
 interpret-preamble=false]
\end{verbatim}
This provides the command \csfmt{sortop} for internal use in the
document. (Remember it won't be defined on the first \LaTeX\ run
before the \ext{glstex} file has been created.)

Another file, say, \filefmt{interpret-preamble.bib} may provide
a definition for \bibgls:
\begin{verbatim}
@preamble{"\providecommand{\sortop}[2]{#2, #1}"}
\end{verbatim}
which can be identified with:
\begin{verbatim}
\GlsXtrLoadResources[src={interpret-preamble}]
\end{verbatim}
This definition swaps the two arguments around for the sorting, but
doesn't affect the document since \LaTeX\ has already defined
\csfmt{sortop} from the first resource set.

For example:
\begin{verbatim}
@entry{caesar,
  name={\sortop{Gaius Julius}{Caesar}},
  first={Julius Caesar},
  text={Caesar},
  description={Roman politician and general}
}
\end{verbatim}
If \bibgls\ only recognises the second definition of \csfmt{sortop} then
the sort value becomes \code{Caesar, Gaius Julius}.

\begin{table}[p]
\caption{Summary of Available Sort Options: No Actual Sorting}
\label{tab:sortoptionsnosort}
\centering
\begin{tabular}{ll}
\optfmt{none} or \optfmt{unsrt} & don't sort\tabularnewline
\optfmt{random} & shuffle entries\tabularnewline
\optfmt{use} & order of use
\end{tabular}
\end{table}

\begin{table}[p]
\caption{Summary of Available Sort Options: Alphabet}
\label{tab:sortoptionsrule}
\centering
\begin{tabular}{ll}
\meta{lang tag} & sort according to this language tag\tabularnewline
\meta{lang tag}\optfmt{-reverse} & reverse sort according to this language tag\tabularnewline
\optfmt{doc} & sort according to the document
language\tabularnewline
\optfmt{doc-reverse} & reverse sort according to the document
language\tabularnewline
\optfmt{locale} & sort according to the default
locale\tabularnewline
\optfmt{locale-reverse} & reverse sort according to the default
locale\tabularnewline
\optfmt{custom} & sort according to \csopt[\meta{custom
rule}]{sort-rule}\tabularnewline
\optfmt{custom-reverse} & reverse sort according to \csopt[\meta{custom rule}]{sort-rule}
\end{tabular}
\end{table}

\begin{table}[p]
\caption{Summary of Available Sort Options: Letter (Unicode Order)}
\label{tab:sortoptionsletter}
\centering
\begin{tabular}{ll}
\optfmt{letter-case} & case-sensitive letter sort\tabularnewline
\optfmt{letter-case-reverse} & reverse case-sensitive letter
sort\tabularnewline
\optfmt{letter-nocase} & case-insensitive letter sort\tabularnewline
\optfmt{letter-nocase-reverse} & reverse case-insensitive letter
sort\tabularnewline
\optfmt{letter-upperlower} & upper-lower letter sort\tabularnewline
\optfmt{letter-upperlower-reverse} & reverse upper-lower letter
sort\tabularnewline
\optfmt{letter-lowerupper} & lower-upper letter sort\tabularnewline
\optfmt{letter-lowerupper-reverse} & reverse lower-upper letter sort
\end{tabular}
\end{table}

\begin{table}[p]
\caption{Summary of Available Sort Options: Letter-Number}
\label{tab:sortoptionsletternumber}
\centering
\begin{tabular}{ll}
\optfmt{letternumber-case} & case-sensitive letter-number
sort\tabularnewline
\optfmt{letternumber-case-reverse} & reverse case-sensitive
letter-number sort\tabularnewline
\optfmt{letternumber-nocase} & case-insensitive letter-number
sort\tabularnewline
\optfmt{letternumber-nocase-reverse} & reverse case-insensitive
letter-number sort\tabularnewline
\optfmt{letternumber-upperlower} & upper-lower letter-number
sort\tabularnewline
\optfmt{letternumber-upperlower-reverse} & reverse upper-lower
letter-number sort\tabularnewline
\optfmt{letternumber-lowerupper} & lower-upper letter-number
sort\tabularnewline
\optfmt{letternumber-lowerupper-reverse} & reverse lower-upper letter-number sort
\end{tabular}
\end{table}

\begin{table}[p]
\caption{Summary of Available Sort Options: Numerical}
\label{tab:sortoptionsnumerical}
\centering
\begin{tabular}{ll}
\optfmt{integer} & integer sort\tabularnewline
\optfmt{integer-reverse} & reverse integer sort\tabularnewline
\optfmt{hex} & hexadecimal sort\tabularnewline
\optfmt{hex-reverse} & reverse hexadecimal sort\tabularnewline
\optfmt{octal} & octal sort\tabularnewline
\optfmt{octal-reverse} & reverse octal sort\tabularnewline
\optfmt{binary} & binary sort\tabularnewline
\optfmt{binary-reverse} & reverse binary sort\tabularnewline
\optfmt{float} & float sort\tabularnewline
\optfmt{float-reverse} & reverse float sort\tabularnewline
\optfmt{double} & double sort\tabularnewline
\optfmt{double-reverse} & reverse double sort\tabularnewline
\optfmt{numeric} & locale-sensitive numeric sort\tabularnewline
\optfmt{numeric-reverse} & reverse locale-sensitive numeric
sort\tabularnewline
\optfmt{currency} & locale-sensitive currency sort\tabularnewline
\optfmt{currency-reverse} & reverse locale-sensitive currency
sort\tabularnewline
\optfmt{percent} & locale-sensitive percent sort\tabularnewline
\optfmt{percent-reverse} & reverse locale-sensitive percent
sort\tabularnewline
\optfmt{numberformat} & locale-sensitive custom numeric
sort\tabularnewline
\optfmt{numberformat-reverse} & reverse locale-sensitive custom numeric sort
\end{tabular}
\end{table}

\begin{table}[p]
\caption{Summary of Available Sort Options: Date-Time}
\label{tab:sortoptionsdatetime}
\centering
\begin{tabular}{ll}
\optfmt{date} & locale-sensitive date sort\tabularnewline
\optfmt{date-reverse} & reverse locale-sensitive date
sort\tabularnewline
\optfmt{datetime} & locale-sensitive date-time sort\tabularnewline
\optfmt{datetime-reverse} & reverse locale-sensitive date-time
sort\tabularnewline
\optfmt{time} & locale-sensitive time sort\tabularnewline
\optfmt{time-reverse} & reverse locale-sensitive time sort
\end{tabular}
\end{table}

\subsubsection{No Sort}

The sort methods listed in \tableref{tab:sortoptionsnosort} 
don't actually perform any sorting. This may cause a problem for
hierarchical entries. In some cases this can lead to detached child
entries or an attempt to define a child entry before its parent.
\begin{itemize}

\item \optfmt{none} (or \optfmt{unsrt}): don't sort the entries.
(The entries will be in the order they were processed when parsing
the data.)

\item \optfmt{random}: shuffles rather than sorts the entries.
This won't work if there are hierarchical entries, so it's best
to use this option with \csopt{flatten}. The seed for the
random generator can be set using \csopt{shuffle} (which
also automatically sets \csopt[random]{sort} and \csopt{flatten}).

\item \optfmt{use}: order of use. This order is determined
by the records written to the \ext{aux} file by the \styopt{record}
package option. Dependencies and cross-references (including those
identified with \idx{glssee}) come after entries with records.

\end{itemize}

\subsubsection{Alphabet}

The sort methods listed in \tableref{tab:sortoptionsrule} are for
alphabets that are defined by a rule. These usually ignore most
punctuation and may ignore modifiers (such as accents).  Use with
\csopt{break-at} to determine whether or not to split at word
boundaries.

Note that \csopt[locale]{sort} can provide more detail about the
locale than \csopt[doc]{sort}, depending on how the document
language has been specified.  For example, with:
\begin{verbatim}
\documentclass{article}
\usepackage[ngerman]{babel}
\usepackage[record]{glossaries}
\GlsXtrLoadResources[src={german-terms}]
\end{verbatim}
the language tag will be \code{de-1996}, which doesn't have an
associated region. Whereas with
\begin{verbatim}
\documentclass[de-DE-1996]{article}
\usepackage[ngerman]{babel}
\usepackage[record]{glossaries}
\GlsXtrLoadResources[src={german-terms}]
\end{verbatim}
the language tag will be \code{de-DE-1996} because \sty{tracklang}
has picked up the locale from the document class options. This is
only likely to cause a difference if a language has different
sorting rules according to the region or if the language may be
written in multiple scripts.

A multilingual document will need to have the \csopt{sort} specified
when loading the resource to ensure the correct language is chosen. 
For example:
\begin{verbatim}
\GlsXtrLoadResources[src={english-terms},sort={en-GB}]
\GlsXtrLoadResources[src={german-terms},sort={de-DE-1996}]
\end{verbatim}

\begin{itemize}
\item \meta{lang tag}: sort according to the rules of the locale
given by the \idx{IETF} language tag \meta{lang tag}.

\item \meta{lang tag}\optfmt{-reverse}: reverse sort according to the rules of the locale
given by the \idx{IETF} language tag \meta{lang tag}.

\item \optfmt{locale}: equivalent to 
\csopt[\meta{lang tag}]{sort} where \meta{lang tag} is obtained
from the \idx{JRE} (which usually matches the
operating system's locale).

\item \optfmt{locale-reverse}: equivalent to 
\csopt[\meta{lang tag}-reverse]{sort} where \meta{lang tag} is obtained
from the \idx{JRE}.

\item \optfmt{doc}: sort the entries according to the document
language. This is equivalent to \csopt[\meta{lang tag}]{sort}
where \meta{lang tag} is the locale associated with the document
language. In the case of a multi-lingual document, \meta{lang tag}
is the locale of the last language resource file to be loaded through
\sty{tracklang}'s interface. It's best to explicitly set the locale
for multi-lingual documents to avoid confusion. If no languages have been tracked, this
option is equivalent to \csopt[locale]{sort}.

\item \optfmt{doc-reverse}: as \optfmt{doc} but in reverse order.

\item \optfmt{custom}: sort the entries according to the 
rule provided by \csopt{sort-rule}.

\item \optfmt{custom-reverse}: reverse sort the entries according to the 
rule provided by \csopt{sort-rule}.
\end{itemize}

\subsubsection{Letter Case (Unicode Order)}

The sort methods listed in \tableref{tab:sortoptionsletter} 
use letter case comparators. These simply compare the
character codes. The \optfmt{-nocase} options first convert the
\field{sort} field to lower case before performing the sort.
Punctuation isn't ignored.
Use \csopt[\meta{lang tag}]{sort} with \csopt[none]{break-at} to
emulate \idx!{xindy}['s] locale letter ordering. The examples below
show the ordering of the list \code{antelope}, \code{bee}, \code{Africa}, 
\code{aardvark} and \code{Brazil}.
\begin{itemize}
\item \optfmt{letter-case}: case-sensitive letter sort. Upper case
and lower case are in separate letter groups.
Example: 

\code{Africa} (letter group \qt{A}), \code{Brazil}
(letter group \qt{B}), \code{aardvark} (letter group \qt{a}),
\code{antelope} (letter group \qt{a}), \code{bee} (letter group \qt{b}).

\item \optfmt{letter-case-reverse}: reverse case-sensitive letter sort.

\item \optfmt{letter-nocase}: case-insensitive letter sort. (All
upper case characters will have first been converted to lower case.)
Example:

\code{aardvark} (letter group \qt{A}), \code{Africa}
(letter group \qt{A}), \code{antelope} (letter group \qt{A}), 
\code{bee} (letter group \qt{B}),
\code{Brazil} (letter group \qt{B}).

\item \optfmt{letter-nocase-reverse}: reverse case-insensitive letter sort.

\item \optfmt{letter-upperlower}: each character pair is first
compared according to their lower case values. If these are equal,
then they are compared according to case. This puts upper and lower
case in the same letter group but the upper case comes first.
Example:

\code{Africa} (letter group \qt{A}), \code{aardvark} (letter group
\qt{A}), \code{antelope} (letter group \qt{A}), \code{Brazil}
(letter group \qt{B}), \code{bee} (letter group \qt{B}).

\item \optfmt{letter-upperlower-reverse}: reverse upper-lower letter sort.

\item \optfmt{letter-lowerupper}: each character pair is first
compared according to their lower case values. If these are equal,
then they are compared according to case. This puts upper and lower
case in the same letter group but the lower case comes first.
Example:

\code{aardvark} (letter group \qt{A}), \code{antelope} (letter group \qt{A}),
 \code{Africa} (letter group \qt{A}), \code{bee} (letter group
\qt{B}), \code{Brazil} (letter group \qt{B}).

\item \optfmt{letter-lowerupper-reverse}: reverse lower-upper letter sort.
\end{itemize}

\subsubsection{Letter-Number}

The sort methods listed in \tableref{tab:sortoptionsletternumber} 
use a letter-integer hybrid. They behave in a similar way to the
above letter sort methods, but if an integer number pattern is detected in
the string then the sub-string containing the number will be compared.
This only detects base 10 integers (unlike the numeric methods
such as \csopt[hexadecimal]{sort} or \csopt[float]{sort}) but in
addition to recognising all the digits in the Unicode \idx{numberdecimaldigit} 
category it also recognises the subscript and
superscript digits, such as \textsuperscript{1} (0x00B9)
and \textsuperscript{2} (0x00B2).

\begin{figure}[htbp]
\centering
\begin{tikzpicture}[every node/.style={minimum size=9mm}]
\matrix[font={\Large\ttfamily}]
{
  \node[draw]{a\hexsb{61}}; & \node{$=$}; & \node[draw]{a\hexsb{61}}; &[20mm]
  \node[draw]{a\hexsb{61}}; & \node{$=$}; & \node[draw]{a\hexsb{61}};
  \\
  \node[draw]{b\hexsb{62}}; & \node{$=$}; & \node[draw]{b\hexsb{62}}; &
  \node[draw]{b\hexsb{62}}; & \node{$=$}; & \node[draw]{b\hexsb{62}};
  \\
  \node[draw]{c\hexsb{63}}; & \node{$=$}; & \node[draw]{c\hexsb{63}}; &
  \node[draw]{c\hexsb{63}}; & \node{$=$}; & \node[draw]{c\hexsb{63}};
  \\
  \node[draw,ultra thick]{1\hexsb{31}}; & \node{$<$}; &
  \node[draw,ultra thick]{6\hexsb{36}}; &
  \node (n1) {1}; & \node{$>$}; & \node[draw,ultra thick]{6};
  \\
  \node[draw]{2\hexsb{32}}; &  & \node[draw]{b\hexsb{62}}; &
  \node (n2) {2}; &  & \node[draw]{b\hexsb{62}};
  \\
  \node[draw]{f\hexsb{66}}; &  & \node[draw]{a\hexsb{61}}; &
  \node[draw]{f\hexsb{66}}; &  & \node[draw]{a\hexsb{61}};
  \\
  \node[draw]{o\hexsb{6f}}; &  & \node[draw]{r\hexsb{72}}; &
  \node[draw]{o\hexsb{6f}}; &  & \node[draw]{r\hexsb{72}};
  \\
  \node[draw]{o\hexsb{6f}}; &  & &
  \node[draw]{o\hexsb{6f}}; &  & 
  \\[10pt]
   & \node[font=\rmfamily]{\subfigfmt{a}};  & &
   & \node[font=\rmfamily]{\subfigfmt{b}};  & 
  \\
};
\draw[ultra thick] (n1.north east) rectangle (n2.south west);
\end{tikzpicture}

\caption[Regular letter comparison vs letter-number
comparison]{Regular letter comparison vs letter-number comparison.
Comparing the strings \code{abc12foo} and \code{abc6bar}:
\subfigfmt{a} \optfmt{letter-case}; \subfigfmt{b}
\optfmt{letternumber-case}.}
\label{fig:letternumber}
\end{figure}

For example, suppose the first string is \code{abc12foo}
and the second string is \code{abc6bar}.
\Figureref{fig:letternumber}\subfigfmt{a} shows the regular letter
comparison using \csopt[letter-case]{sort}, where the subscript
indicates the hexadecimal character code. The first three characters
from each string are identical (\code{abc}). At this point there's
no difference detected, so the comparator moves on to the next
character, \code{1\hexsb{31}} for the first string and
\code{6\hexsb{36}} for the second string. Since 0x31 is less than 
0x36, the first string (\code{abc12foo}) is considered less than the second
(\code{abc6bar}).

With the letter-number comparison using
\csopt[letternumber-case]{sort}, the comparator starts in much the
same way. The first three characters from each string are still
identical, so the comparator moves on to the next character,
\code{1} for the first string and \code{6} for the second. 
These are now both recognised as digits, so the comparator
looks ahead and reads in any following digits (if present).  For the
first case, this is the sub-string \code{12} and, for the second
case, \code{6} (\figureref{fig:letternumber}\subfigfmt{b}).  These
are both compared according to their integer representation $12 >
6$, so \code{abc12bar} is considered greater than \code{abc6foo}
(that is, \code{abc12bar} comes after \code{abc6foo}). 

The same result occurs for other numbering systems, for example if
the Basic Latin digits 1, 2 and 6 are replaced with the
corresponding Devanagari digits \devone, \devtwo\ and
\devsix. (But note that the letter comparisons will still be
based on their Unicode values not according to a particular locale.
This type of sort method is intended primarily for symbolic values,
such as chemical formulae, rather than for words or phrases.)

Signed integers are also recognised, so \code{abc-12foo} is less
than \code{abc+6bar}, which is again different from the result
obtained with a straight letter comparator where the character~\code{+} (0x2B)
comes before the character~\code{-} (0x2D). The sign must be followed by at
least one digit for it to be recognised as a number otherwise it's
treated as a punctuation character.

If only one sub-string is numeric
then the \csopt{letter-number-rule} is used to determine the
result. Where both sub-strings are non-numeric, then the 
\csopt{letter-number-punc-rule} setting is used to determine the result
according to the category of the characters, which may be one of the
following:
\begin{itemize}
\item white space: belongs to the Unicode \idx{separatorspace}
category. If both characters are white space, then they are compared
according to their Unicode values otherwise they are ordered according to 
the \csopt{letter-number-punc-rule} setting.
\item letter: belongs to one of the Unicode categories \idx{letteruppercase}, 
\idx{letterlowercase}, \idx{lettertitlecase},
\idx{lettermodifier} or \idx{letterother}. If both characters
are letters, then they are compared in the same way as the
corresponding \optfmt{letter-\meta{modifier}} sort method otherwise
they are ordered according to the 
\csopt{letter-number-punc-rule} setting.
\item punctuation: everything else. If both characters are
punctuation, then they are compared according to their Unicode value
otherwise they are ordered according to 
the \csopt{letter-number-punc-rule} setting.
\end{itemize}

The examples below show the ordering of the list:
\code{CH\textsubscript{2}O}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{CO}, \code{Cl}, 
\code{Co}, \code{Co\textsubscript{2}O\textsubscript{3}}, 
\code{CoMoO\textsubscript{4}} and \code{CoCl\textsubscript{2}},
for the setting
\csopt[between]{letter-number-rule}, where the subscripts are
the Unicode subscript characters.

\begin{itemize}
\item \optfmt{letternumber-case}: case-sensitive
letter-number sort. Example:

\code{CH\textsubscript{2}O}, 
\code{CO},
\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{Cl}, 
\code{Co}, 
\code{CoCl\textsubscript{2}},
\code{CoMoO\textsubscript{4}}, 
\code{Co\textsubscript{2}O\textsubscript{3}}.

\item \optfmt{letternumber-case-reverse}: reverse case-sensitive
letter-number sort.

\item \optfmt{letternumber-nocase}: case-insensitive
letter-number sort. The sort value is first converted to lower
case. Note that \csopt[between]{letter-number-rule} doesn't make
sense in this context as there won't be any upper case characters in
the sort value, so numbers will always come before letters. Example:

\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{CH\textsubscript{2}O}, 
\code{Cl}, 
\code{Co}, 
\code{CO}, 
\code{Co\textsubscript{2}O\textsubscript{3}},
\code{CoCl\textsubscript{2}},
\code{CoMoO\textsubscript{4}}. 

\item \optfmt{letternumber-nocase-reverse}: reverse case-insensitive
letter-number sort.

\item \optfmt{letternumber-upperlower}: upper-lower
letter-number sort. This behaves slightly differently to
\optfmt{letter-upperlower} when used with \csopt[between]{letter-number-rule}
as it will segregate the upper and lower case characters if there
are any numerical sub-strings. Example:

\code{CH\textsubscript{2}O}, 
\code{CO}, 
\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{Cl}, 
\code{Co}, 
\code{CoCl\textsubscript{2}},
\code{CoMoO\textsubscript{4}}, 
\code{Co\textsubscript{2}O\textsubscript{3}}.

The \csopt[between]{letter-number-rule} setting enforces numbers
after upper-case (for the case-sensitive and upper-lower methods)
which makes the \code{\textsubscript{5}} come after the upper case
\code{O} and forces the lower case characters to come after it.

Compare this with \csopt[before letter]{letter-number-rule} which
results in the order:

\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{CH\textsubscript{2}O}, 
\code{Cl}, 
\code{CO}, 
\code{Co}, 
\code{Co\textsubscript{2}O\textsubscript{3}},
\code{CoCl\textsubscript{2}},
\code{CoMoO\textsubscript{4}}.


\item \optfmt{letternumber-upperlower-reverse}: reverse upper-lower
letter-number sort. Note that with
\csopt[between]{letter-number-rule}, this can result in an order
that isn't the actual reverse of \optfmt{letternumber-upperlower}.
Example:

\code{Co\textsubscript{2}O\textsubscript{3}},
\code{CoMoO\textsubscript{4}}, 
\code{CoCl\textsubscript{2}},
\code{Co}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{CO}, 
\code{Cl}, 
\code{CH\textsubscript{2}O}. 

The algorithm is reversed which means that when two letters are
compared then, if both letters have the same lower case version,
the upper-lower rule is reversed and lower case comes before
upper case.  This means that \code{o} comes before \code{O}. 
If their lower case versions aren't identical, the letter
with the higher lower case Unicode value comes first. This means
that both \code{o} and \code{O} come before \code{l} which comes
before \code{H}.  So far, this gives the order: 
\code{o}, \code{O}, \code{l}, \code{H}.
The \csopt[between]{letter-number-rule} setting inserts numbers between 
upper and lower case letters. This puts the numbers (in reverse
order) between \code{o} and \code{O}.

Compare this with \csopt[before letter]{letter-number-rule} which
results in the order:

\code{CoMoO\textsubscript{4}}, 
\code{CoCl\textsubscript{2}},
\code{Co\textsubscript{2}O\textsubscript{3}},
\code{Co}, 
\code{CO}, 
\code{Cl}, 
\code{CH\textsubscript{2}O}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{C\textsubscript{5}H\textsubscript{4}NCOOH}. 

Remember that the associated settings as reversed
well. So \csopt[before letter]{letter-number-rule} is 
results in numbers \emph{after} letters.

\item \optfmt{letternumber-lowerupper}: lower-upper
letter-number sort. As with the upper-lower version, this behaves
slightly differently to the corresponding
\optfmt{letter-lowerupper} when used with \csopt[between]{letter-number-rule}. 
Example:

\code{Cl}, 
\code{Co}, 
\code{Co\textsubscript{2}O\textsubscript{3}},
\code{CoCl\textsubscript{2}},
\code{CoMoO\textsubscript{4}}, 
\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{CH\textsubscript{2}O}, 
\code{CO}. 

The \csopt[between]{letter-number-rule} setting enforces numbers
after lower-case (for the lower-upper method)
so the \code{\textsubscript{5}} is put after \code{o}, and forces
the upper case characters after the numbers.

Compare this with \csopt[before letter]{letter-number-rule} which
results in the order:

\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{CH\textsubscript{2}O}, 
\code{Cl}, 
\code{Co}, 
\code{Co\textsubscript{2}O\textsubscript{3}},
\code{CoCl\textsubscript{2}},
\code{CoMoO\textsubscript{4}}, 
\code{CO}. 

\item \optfmt{letternumber-lowerupper-reverse}: reverse lower-upper
letter-number sort. Again with
\csopt[between]{letter-number-rule}, this can result in an order
that isn't the actual reverse of \optfmt{letternumber-lowerupper},
although for this example it does happen to be the actual reverse:

\code{CO}, 
\code{CH\textsubscript{2}O}, 
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}}, 
\code{C\textsubscript{5}H\textsubscript{4}NCOOH}, 
\code{CoMoO\textsubscript{4}}, 
\code{CoCl\textsubscript{2}},
\code{Co\textsubscript{2}O\textsubscript{3}},
\code{Co}, 
\code{Cl}. 

\end{itemize}

\subsubsection{Numerical}

The sort methods listed in \tableref{tab:sortoptionsnumerical} 
use numeric comparisons. The sort value is expected to
be a numeric value. If it can't be parsed then it's treated as 0
(and a warning will be written to the transcript).
These all recognise the digits in the Unicode \qt{Number,
Decimal Digit} category but, unlike the hybrid letter-number
comparators above, they don't recognise the superscript or subscript
digits.
\begin{itemize}
\item \optfmt{integer}: integer sort. This is for non-locale integer sort
values.

\item \optfmt{integer-reverse}: as above but reverses the order.

\item \optfmt{hex}: hexadecimal integer sort. This is for non-locale
hexadecimal sort values.

\item \optfmt{hex-reverse}: as above but reverses the order.

\item \optfmt{octal}: octal integer sort. This is for non-locale
octal sort values.

\item \optfmt{octal-reverse}: as above but reverses the order.

\item \optfmt{binary}: binary integer sort. This is for non-locale binary sort
values.

\item \optfmt{binary-reverse}: as above but reverses the order.

\item \optfmt{float}: single-precision sort. This is for non-locale
decimal sort values.

\item \optfmt{float-reverse}: as above but reverses the order.

\item \optfmt{double}: double-precision sort. This is for non-locale
decimal sort values.

\item \optfmt{float-reverse}: as above but reverses the order.

\item \optfmt{numeric}: locale-sensitive numeric sort. Use
\csopt{numeric-locale} to set the locale.

\item \optfmt{numeric-reverse}: as above but reverses the order.

\item \optfmt{currency}: locale-sensitive currency sort. Use
\csopt{numeric-locale} to set the locale.

\item \optfmt{currency-reverse}: as above but reverses the order.

\item \optfmt{percent}: locale-sensitive percent sort. Use
\csopt{numeric-locale} to set the locale.

\item \optfmt{percent-reverse}: as above but reverses the order.

\item \optfmt{numberformat}: locale-sensitive custom numeric sort. Use
\csopt{numeric-locale} to set the locale and
\csopt{numeric-sort-pattern} to set the number pattern.

\item \optfmt{numberformat-reverse}: as above but reverses the order.

\end{itemize}

In general, it doesn't make much sense to have hierarchical entries
that need to be sorted by a number, but it is possible as long as each
level uses the same type of numbering.

\subsubsection{Date-Time}

The sort methods listed in \tableref{tab:sortoptionsdatetime} 
are for dates and times.  Use \csopt{date-sort-format}
and \csopt{date-sort-locale} to specify the date format and locale.
\begin{itemize}
\item \optfmt{date}: sort dates.

\item \optfmt{date-reverse}: as above but reverses the order.

\item \optfmt{datetime}: sort date and time information.

\item \optfmt{datetime-reverse}: as above but reverses the order.

\item \optfmt{time}: sort times.

\item \optfmt{time-reverse}: as above but reverses the order.

\end{itemize}

If the field you want to sort by contains a date then the
simplest way to sort is to ensure the date is in ISO format
and then just use a letter sort. However it may be that
the date is in the format particular to your locale or you have a
mix of \era{AD} and \era{BC}. In which
case you can use one of the date/time sort options (such as
\csopt[date]{sort} or \csopt[date-reverse]{sort}). The locale
is assumed to be your default locale (as given by the \idx{JVM}) 
but if you are using a different locale this can
be set with \csopt{date-sort-locale}. The pattern is assumed
to be the default for that locale but you can change this with
\csopt{date-sort-format}. If you provide your
own custom pattern you must make sure that it matches the selected
\optfmt{sort} option.

The locale and pattern information is used by \bibgls\ to parse the
field.  If the field value can't be parsed then \bibgls\ will issue
a warning and assume the current date (or time).

The actual sort value that's used by the comparator is numeric.  In
the case of the time-based \csopt[datetime]{sort} and
\csopt[time]{sort} (or their \optfmt{-reverse} versions), this value
is the number of milliseconds since 1st~January, 1970. In the case
of \csopt[date]{sort} (or \csopt[date-reverse]{sort}), this value is
obtained from $a(y\times10000 + m\times100 + d)$ where $y$ is the
year, $m$ is the month number, $d$ is the day of month number, and
$a$ is an integer representation of the era ($-1$ for \era{BC} and
$+1$ for \era{AD}).

Unlike the numeric sort methods (such as \csopt[integer]{sort})
the date-time sort methods set the \field{sort} field to a value
that can be more easily parsed within the document and that should
mostly achieve the same ordering if a letter comparator were to be used
with it (except for \era{BC} dates, where the order needs to be
reversed). This has the by-product of providing a field that
you can access within the document that can be more easily parsed by
\LaTeX.

In general, it doesn't make much sense to have hierarchical entries
that need to be sorted by date, but it is possible as long as each
level uses the same date format.

For example, suppose my \ext{bib} file contains
\begin{verbatim}
@entry{journalentry,
  name={10 Jan 2017},
  description={an interesting journal entry}
}
\end{verbatim}
The \field{name} field uses an abbreviated UK date format.
If all my other entries also use this format in the \field{name}
then I can sort them chronologically:
\begin{verbatim}
\GlsXtrLoadResources[
  src=entries,% data in entries.bib
  sort=date,
  date-sort-locale={en-GB},
  date-sort-format={medium}
]
\end{verbatim}
(The medium format is actually the default for this locale,
and the locale matches my system locale, so I could omit
both \csopt{date-sort-locale} and \csopt{date-sort-format}.)

If \longarg{verbose} mode is on, the transcript will show
the label, sort value and numeric value for each entry.
In this case, the information is:
\begin{verbatim}
journalentry -> '+1 2017-01-10' [20170110]
\end{verbatim}
The first value is the label (\code{journalentry}), the second
value is assigned to the \field{sort} field
(\code{+1 2017-01-10}) and the number in square brackets 
is the actual numeric value used by the comparator. The signed
number at the start of the sort field \code{+1} is the numeric
representation of the era as used for the $a$ variable in the
computation of the numeric value (as described earlier).

If I change the format to \csopt[short]{date-sort-format},
then the date can't be parsed correctly and \bibgls\ will 
issue the following warning:
\begin{verbatim}
Warning: Can't parse sort value '10 Jan 2017' for 'journalentry'
(pattern: 'dd/MM/yyyy')
\end{verbatim}
This shows the value that \bibgls\ is trying to
parse (\code{10 Jan 2017}) for the entry identified by
the given label (\code{journalentry}). The pattern \bibgls\ 
expects is also given (\code{dd/MM/yyyy}).

\optsection{shuffle}

Automatically sets \csopt[random]{sort} and \csopt{flatten}.
The value \meta{seed} may be omitted. If present, it should
be an integer used as a seed for the random number generator.

\optsection{sort-field}

The \csopt{sort-field} key indicates which field provides the sort
value. The default is the \field{sort} field. For example
\begin{verbatim}
\GlsXtrLoadResources[
 src={entries-terms},% data in entries-terms.bib
 sort-label=category,% sort by 'category' field
 sort=letter-case% case-sensitive letter sort
]
\end{verbatim}
This sorts the entries according to the \field{category} field using
a case-sensitive letter comparison.
You may also use \csopt[id]{sort-field} to sort according to
the label.

If an entry is missing a value for \meta{field}, then the value of
the fallback field will be used instead. For example, with the
default \csopt[sort]{sort-field}, then for an entry defined with
\atentry{entry}, if the \field{sort} field is missing the fallback
field will be the \field{name} or the \field{parent} field if the
\field{name} field is missing.

If the entry is instead defined with \atentry{abbreviation} (or
\atentry{acronym}) then if the \field{sort} field is missing,
\bibgls\ will fallback on the field given by
\field{abbreviation-sort-fallback}.

The \atentry{symbol} and \atentry{number} entry types
fallback on the label (not the \field{name}) if the \field{sort} is missing.

If no fallback field can be found, the entry's label will be used.

\optsection{trim-sort}

If the interpreter is used to determine the sort value, this setting
governs whether or not the interpreter should trim leading and
trailing spaces. The default setting is \csopt[true]{trim-sort}.

This option automatically sets \csopt[\meta{boolean}]{dual-trim-sort}
and \csopt[\meta{boolean}]{secondary-trim-sort}.

\optsection{sort-rule}

If the \csopt[custom]{sort} option is used, the sort rule
must be provided with \optfmt{sort-rule}. In this case
the collation is performed using Java's
\href{http://docs.oracle.com/javase/8/docs/api/java/text/RuleBasedCollator.html}{RuleBasedCollator}
class. Remember that the options will be expanded as they
are written to the \ext{aux} file, so be careful of
any special characters that occur in the rule. For the 
special characters \verb|#| \verb|%| \verb|_| \verb|&| \verb|{|
and \verb|}| you can use \verb|\#|, \verb|\%|, \verb|\_|, \verb|\&|,
\verb|\{|
and \verb|\}|. These will be written to the \ext{aux} file
with the leading backslash, but \bibgls\ will remove it for this
resource option. Remember that the \styfmt{glossaries} package provides
\idx{glsbackslash}, \idx{glsquote} and \idx{glstildechar} which can be
used to produce a literal backslash (\verb|\|), double-quote
(\verb|"|) and tilde (\verb|~|).

You can also
use \stringu\meta{hex} (where \meta{hex} is a hexadecimal
code) to represent a Unicode character. For example:
\begin{verbatim}
\GlsXtrLoadResources[
  sort={custom},
  sort-rule={< a,A < b,B < c,C < ch,Ch,CH < d,D
   < dd,Dd,DD < e,E < f,F < ff,Ff,FF
   < g,G < ng,Ng,NG < h,H < ij,Ij,IJ
   < i,I < j,J < k,K < l,L < ll,Ll,LL < m,M
   < n,N < o,O < p,P < ph,Ph,PH < q,Q < r,R < rh,Rh,RH
   < s,S < t,T < th,Th,TH < u,U < v,V < w,W < x,X < y,Y < z,Z
   < \string\u00E6,\string\u00C6}
]
\end{verbatim}
It's best to use \idx{cs.string} rather than \idx{protect} to avoid
unwanted spaces interfering with \meta{hex}. Note that
\sty{glossaries-extra} v1.21 provides \idx{glshex}
which just does \stringu\ so you can do
\verb|\glshex 00E6| instead of \verb|\string\u00E6|.
This is only one character different, but you can redefine
\idx{glsxtrresourceinit} to locally set \idx{u} to \idx{glshex} while
the protected write is performed. For example:
\begin{verbatim}
\renewcommand*{\glsxtrresourceinit}{\let\u\glshex}
\end{verbatim}
Then you can just do \verb|\u00E6| instead of \verb|\string\u00E6|.

If \csopt{sort} is not set to \optfmt{custom}, the
\optfmt{sort-rule} setting will be ignored.

\optsection{break-at}

This option automatically implements
\csopt[\meta{option}]{dual-break-at} and
\csopt[\meta{option}]{secondary-break-at}.

The alphabet sort options (\tableref{tab:sortoptionsrule}) typically
list non-letter characters before alphabetical characters and spaces
are quite often in the ignored set. This means that the alphabet
sort options are naturally in a letter order, similar to
\idx{xindy}['s] \code{ord/letorder} module.  (This isn't the same as
\csopt[letter-nocase]{sort}, which just sorts according to the
Unicode value not according to a particular alphabet.)

In order to replicate \idx{makeindex} and \idx{xindy}['s] default word
order, \bibgls\ splits up the sort value at word boundaries and
inserts a marker (identified by \csopt{break-marker}).
For example, if the sort value is \qt{sea lion} then it's actually
converted to \verb"sea|lion|" whereas \qt{sea} becomes \verb"sea|"
and \qt{seal} becomes \verb"seal|". The default marker is \verb"|"
which is commonly placed in collation rules before digits but 
after the ignored characters, such as spaces and hyphens.

You can change the construction of the break points with
\csopt[\meta{option}]{break-at} where \meta{option} may be one of:
\begin{itemize}
\item \optfmt{word}: break at word boundaries (default).
For example, the sort value \qt{Tom, Dick, and Harry} becomes 
\verb"Tom|Dick|and|Harry".
\item \optfmt{character}: break after each character.
\item \optfmt{sentence}: break after each sentence.
\item \optfmt{none}: don't create break points. Use this option to
emulate \idx{makeindex} or \idx{xindy}'s letter ordering.
\end{itemize}

This option is ignored when used with the non-alphabetic \csopt{sort} options.
Use the \longarg{debug} switch to show the break points.
(This will also show the collation rule.)

\optsection{break-marker}

This option automatically implements the dual and secondary settings
\csopt[\meta{marker}]{dual-break-marker} and
\csopt[\meta{marker}]{secondary-break-marker}.


The break marker can be changed using
\csopt[\meta{marker}]{break-marker}, where \meta{marker} is 
the character to use. For example, \csopt[-]{break-marker} will use a
hyphen. The marker may be empty, which effectively strips the
inter-word punctuation. For example, with
\csopt[\empty]{break-marker}, \qt{Tom, Dick, and Harry} becomes
\code{TomDickandHarry} and \qt{sea lion} simply becomes
\code{sealion}. If \meta{marker} is omitted,
\csopt[\empty]{break-marker} is assumed.

\optsection{sort-suffix}

This option automatically implements the dual and secondary settings
\csopt[\meta{value}]{dual-sort-suffix} and
\csopt[\meta{value}]{secondary-sort-suffix}.

\bibgls\ allows duplicate sort values, but this can cause a problem
for hierarchical entries where parent entries with duplicate sort
fields are clumped together and their children follow. To prevent
this from happening \csopt[non-unique]{sort-suffix} will append a
suffix to the duplicate sort values (within the same hierarchical
level). Note that only the duplicates are given suffixes. The first
sort value to be encountered isn't given a suffix.

The default setting is \csopt[non-unique]{sort-suffix}.
If you don't have any child entries or if all your sort values are
unique, then you can use \csopt[none]{sort-suffix} to suppress this
action, which can slightly improve the run time.

This option only affects the alphabetic
(\tableref{tab:sortoptionsrule}), letter
(\tableref{tab:sortoptionsletter}) and letter-number
(\tableref{tab:sortoptionsletternumber}) sort rules.  For the other
types of sort methods (not including the no-sort options listed in
\tableref{tab:sortoptionsnosort}) you need to guard against
duplicates if you have hierarchical entries.

If you use \longarg{verbose}, then \bibgls\ will write information
in the transcript when it appends a suffix to the sort value.  The
message:
\begin{alltt}
Sort value '\meta{sort}' (entry '\meta{id}') not unique for the entry's
hierarchical level.
\end{alltt}
indicates that an entry with the given \meta{sort} value has already
been found within the same hierarchical level as the currently
processed entry (whose label is given by \meta{id}). The same
hierarchical level in this context means that either both entries
don't have a parent or both entries have the same parent. (That is,
the entries are considered siblings.)

This message will then be followed by
\begin{alltt}
Appending suffix '\meta{suffix}' to the sort value '\meta{sort}' 
for entry '\meta{id}'.
\end{alltt}
which indicates that the entry (identified by the label \meta{id})
has been assigned the sort value given by \meta{sort}\meta{suffix}.
If any break markers are applied, this is done after the suffix has
been appended.

For example, suppose in my document I want to write about \appfmt{makeglossaries}
(the application) and \csfmt{makeglossaries} (the command). I might
decide to define semantic commands:
\begin{verbatim}
\newcommand*{\application}[1]{\texttt{#1}}
\newcommand*{\command}[1]{\texttt{\char92 #1}}
\end{verbatim}
In my \ext{bib} file I might have:
\begin{verbatim}
@entry{cs.makeglossaries,
  name={\command{makeglossaries}},
  description={opens glossary files}
}

@entry{ap.makeglossaries,
  name={\application{makeglossaries}},
  description={Perl script}
}
\end{verbatim}
If \bibgls\ is provided with the definitions of \csfmt{application}
and \csfmt{command} (by interpreting the \atentry{preamble}) then it will
determine that the sort value for \code{cs.makeglossaries} is
\verb|\makeglossaries| and the sort value for
\code{ap.makeglossaries} is just \code{makeglossaries}. These are 
two distinct sort values from \bibgls's point of view although the
sort rule may consider them identical if the rule ignores the
\verb|\| character (such as the locale sort methods).

If \bibgls\ isn't provided with these custom definitions, then it
will ignore them and both entries will end up with the sort value
\code{makeglossaries}. The second instance will be recognised as a
duplicate and the sort value will be converted to
\code{makeglossaries1} (where the automated suffix is \code{1} and
the suffix marker, see below, is the empty string). With
\csopt[.]{sort-suffix-marker} then the sort value would become
\code{makeglossaries.1}.

For comparison, consider the following document:
\begin{verbatim}
\documentclass{article}

\usepackage[style=indexgroup]{glossaries}

\makeglossaries

\newcommand*{\application}[1]{\texttt{#1}}
\newcommand*{\command}[1]{\texttt{\char92 #1}}

\newglossaryentry{cs.makeglossaries}{%
  name={\command{makeglossaries}},
  description={opens glossary files}}

\newglossaryentry{ap.makeglossaries}{%
  name={\application{makeglossaries}},
  description={Perl script}}

\begin{document}

\gls{cs.makeglossaries} and \gls{ap.makeglossaries}.

\printglossaries
\end{document}
\end{verbatim}

This uses \idx{makeindex}, which puts both entries in the
\qt{Symbols} group (since they both start with \verb|\| from the
start of \verb|\command| and \verb|\application|, respectively).
The ordering is \appfmt{makeglossaries}, \csfmt{makeglossaries}
because \qt{a} (second character of \csfmt{application}) comes
before \qt{c} (second character of \csfmt{command}).

The switch to \idx{xindy} just involves adding the \styoptfmt{xindy}
package option:
\begin{verbatim}
\usepackage[xindy,style=indexgroup]{glossaries}
\end{verbatim}
This results in a glossary that only contains one entry,
\csfmt{makeglossaries}, because \idx{xindy} merges entries with
duplicate sort values and the sort values end up as duplicates
because \idx{xindy} discards the control sequences. Although
\bibgls\ also ignores unknown control sequences, it doesn't perform
this merger. 

If I add 
\begin{verbatim}
@preamble{"\providecommand*{\application}[1]{\texttt{#1}}
\providecommand{\command}[1]{\texttt{\char92 #1}}"}
\end{verbatim}
to the earlier \ext{bib} file (called, say, \filefmt{entries.bib})
then the document can be altered to use \bibgls:
\begin{verbatim}
\documentclass{article}

\usepackage[record,style=indexgroup]{glossaries-extra}

\GlsXtrLoadResources{src=entries.bib}

\begin{document}

\gls{cs.makeglossaries} and \gls{ap.makeglossaries}.

\printunsrtglossaries
\end{document}
\end{verbatim}
This uses the default \csopt[locale]{sort} which considers \verb|\|
an ignored (punctuation) character, so both \csfmt{makeglossaries} and
\appfmt{makeglossaries} are listed in the \qt{M} letter group, even
though the interpreter has determined that the sort value for
\code{cs.makeglossaries} is the literal string \verb|\makeglossaries|. 
Note that in this case \bibgls\ doesn't detect duplicate sort values
since it only uses a simple string comparison to detect duplicates
rather than using the collator.

If I switch to using a letter-based sort rule instead, for example
\csopt[letter-nocase]{sort}, then \csfmt{makeglossaries} will be
listed in the \qt{Symbols} letter group since the leading \verb|\|
from the sort value \csfmt{makeglossaries} isn't ignored with this
rule.

Now let's suppose I use \csopt[false]{interpret-preamble} to prevent 
\bibgls\ from interpreting the preamble:
\begin{verbatim}
\GlsXtrLoadResources{src=entries.bib,interpret-preamble=false}
\end{verbatim}
This means that the custom commands won't be recognised and will
therefore be ignored, so both entries will have their sort values reduced to 
\code{makeglosssaries}.

The first entry to be processed is \code{cs.makeglossaries} because
it's the first to be selected. This is assigned the sort value
\code{makeglossaries}. (Note that, unless you use
\csopt[unsrt]{sort}, the initial selection order is based on the record
order. In this example, \code{cs.makeglossaries} has the first
record in the \ext{aux} file.)

The next entry to be processed is \code{ap.makeglossaries}. This
also ends up with the sort value \code{makeglossaries} so \bibgls\
converts this to \code{makeglossaries1} and (with verbose mode on)
the following messages are written to the transcript:
\begin{verbatim}
Sort value 'makeglossaries' (entry 'ap.makeglossaries') not unique
for the entry's hierarchical level.
Appending suffix '1' to the sort value 'makeglossaries' for entry
'ap.makeglossaries'.
\end{verbatim}
Both entries are listed in the \qt{M} letter group in the order
\csfmt{makeglossaries}, \appfmt{makeglossaries}.

If the records are reversed:
\begin{verbatim}
\gls{ap.makeglossaries} and \gls{cs.makeglossaries}.
\end{verbatim}
then the sort value for \code{cs.makeglossaries} is now considered
the duplicate and the order is reversed: \appfmt{makeglossaries},
\csfmt{makeglossaries}.

Suppose now I modify the \ext{bib} file so that
\code{ap.makeglossaries} is defined as:
\begin{verbatim}
@entry{ap.makeglossaries,
  name={\application{makeglossaries}},
  description={Perl script (must be used with \gls{cs.makeglossaries})}
}
\end{verbatim}
and suppose the document only contains an explicit reference to
\code{ap.makeglossaries}:
\begin{verbatim}
\begin{document}
\gls{ap.makeglossaries}
\printunsrtglossaries
\end{document}
\end{verbatim}
Now \code{ap.makeglossaries} is the first entry to be selected
because entries with records are always selected before any
(unrecorded) dependencies. In this case \code{cs.makeglossaries} is
only selected because it's required by \code{ap.makeglossaries}. Now
\code{ap.makeglossaries} is the first to have its sort value
assigned, and it's \code{cs.makeglossaries} that has the duplicate.
This means that the ordering in the glossary is now:
\appfmt{makeglossaries}, \csfmt{makeglossaries}.

An oddity occurs if the glossary is moved to the start of the
document:
\begin{verbatim}
\begin{document}
\printunsrtglossaries
\gls{ap.makeglossaries}
\end{document}
\end{verbatim}
In this case, the first document build
\begin{verbatim}
pdflatex myDoc
bibgls --group --verbose myDoc
pdflatex myDoc
\end{verbatim}
leads to the ordering described above: 
\appfmt{makeglossaries}, \csfmt{makeglossaries}.
However, the next document build has a new record for
\code{cs.makeglossaries} occurring in the glossary (within the
description of \code{ap.makeglossaries}) which means it's now the
first entry to be selected so the ordering switches to:
\csfmt{makeglossaries}, \appfmt{makeglossaries}.

Remember that you can temporarily switch off the indexing by locally
setting
\begin{verbatim}
\GlsXtrSetDefaultGlsOpts{noindex}
\end{verbatim}
(requires at least version 1.21 of \sty{glossaries-extra}).
Since the glossary preamble is scoped, you can simply do
\begin{verbatim}
\appto\glossarypreamble{\GlsXtrSetDefaultGlsOpts{noindex}}
\end{verbatim}
to switch off the indexing within the glossary (or use
\idx{apptoglossarypreamble}). Note that this is
different to using
\begin{verbatim}
\GlsXtrSetDefaultNumberFormat{glsignore}
\end{verbatim}
which creates an ignored record. Even though the record is ignored
(and so won't show in the location list) the record still influences
the selection order.

\optsection{sort-suffix-marker}

This automatically implements the dual and secondary settings
\csopt[\meta{value}]{dual-sort-suffix-marker} and
\csopt[\meta{value}]{secondary-sort-suffix-marker}.


If a suffix is appended to the sort value (see above) then it will
be separated by the suffix marker, which can be set with
\csopt[\meta{value}]{sort-suffix-marker} where \meta{value} is the
marker. By default the marker is empty. You can use \stringu\meta{hex}
to indicate Unicode characters outside the ASCII range.
If, for some reason, you want to use a special character, such as
\verb|#|, you will need to precede it with \idx{cs.string} (for example
\verb|\string#|). If you use \verb|\#| it will be treated as a
literal string containing a backslash followed by a hash character.

\optsection{strength}

This option automatically implements
\csopt[\meta{value}]{dual-strength} and
\csopt[\meta{value}]{secondary-strength}.

The collation strength used by the alphabet sort methods 
(\tableref{tab:sortoptionsrule}) can be set
to the following values: \optfmt{primary} (default),
\optfmt{secondary}, \optfmt{tertiary} or \optfmt{identical}. These
indicate the difference between two characters, but the exact
assignment is locale dependent. See the documentation for Java's
\href{http://docs.oracle.com/javase/8/docs/api/java/text/Collator.html}{\code{Collator}
class} for further details.

For example, suppose the file \filefmt{entries.bib} contains:
\begin{verbatim}
@index{resume}

@index{RESUME}

@index{resumee,
 name={r\'esum\'e}}

@index{rat}

@index{rot}

@index{aardvark}

@index{zoo}
\end{verbatim}
and the document contains:
\begin{verbatim}
\documentclass{article}

\usepackage[record]{glossaries-extra}

\GlsXtrLoadResources[sort={en},src={entries}]

\begin{document}
\gls{resumee}, \gls{resume}, \gls{RESUME},
\gls{aardvark}, \gls{rat}, \gls{rot}, \gls{zoo}.

\printunsrtglossaries
\end{document}
\end{verbatim}
then this uses the default \csopt[primary]{strength}, so the entries
are listed as aardvark, rat, r\'esum\'e, resume, RESUME, rot, zoo.

If the strength is changed to \optfmt{secondary}:
\begin{verbatim}
\GlsXtrLoadResources[sort={en},src={entries},strength=secondary]
\end{verbatim}
then the entries are listed as aardvark, rat, resume, RESUME,
r\'esum\'e, rot, zoo.

If the strength is changed to \optfmt{tertiary} or
\optfmt{identical}, there's no difference from
\csopt[secondary]{strength} for this particular example.

This option is ignored by non-alphabet sorts (such as letter or numeric).

\optsection{decomposition}

This option automatically implements the dual and secondary settings
\csopt[\meta{value}]{dual-decomposition} and
\csopt[\meta{value}]{secondary-decomposition}.

The collation decomposition used by alphabet sort methods
(\tableref{tab:sortoptionsrule}) can be set
to the following values: \optfmt{canonical} (default),
\optfmt{full} or \optfmt{none}. This determines how Unicode composed
characters are handled. The fastest mode is \optfmt{none} but is
only appropriate for languages without accents. The slowest mode is
\optfmt{full} but is the most complete for languages with non-ASCII
characters. See the documentation for Java's
\href{http://docs.oracle.com/javase/8/docs/api/java/text/Collator.html}{\code{Collator}
class} for further details.
This option is ignored by non-alphabet sorts (such as letter or numeric).

\optsection{letter-number-rule}

This automatically implements the dual and secondary settings
\csopt[\meta{value}]{dual-letter-number-rule}
and
\csopt[\meta{value}]{secondary-letter-number-rule}.

If you use one of the letter-number sort methods
(\tableref{tab:sortoptionsletternumber}), then you can determine the
comparison between a number and letter. The \meta{value} may be
one of:
\begin{itemize}
\item\optfmt{before letter}: numbers are considered less than any
letter.
\item\optfmt{after letter}: numbers are considered greater than any
letter.
\item\optfmt{between}: (default) numbers come between letter cases.
With the \optfmt{-case} or \optfmt{-upperlower} sort options,
this will put numbers after upper case and before lower case.
With the \optfmt{-lowerupper} sort option, this will put numbers
after lower case and before upper case. This setting doesn't make
much sense with the \optfmt{-nocase} option but, if used, this will put
numbers before letters.
\item\optfmt{first}: numbers are considered less than all
characters (including punctuation and spaces).
\item\optfmt{last}: numbers are considered greater than all
characters (including punctuation and spaces).
\end{itemize}
Note that the reverse sort methods will invert this setting.
Remember also that the case-insensitive letter-number sort methods always
first convert the \field{sort} field to lower case, which means that
if you use one of them then there won't be any upper case
characters. 

Use \csopt{letter-number-punc-rule} to determine the relative
position of white space and punctuation.

\optsection{letter-number-punc-rule}

This automatically implements the dual and secondary 
\csopt[\meta{value}]{dual-letter-number-punc-rule}
and
\csopt[\meta{value}]{secondary-letter-number-punc-rule}.

If you use one of the letter-number sort methods
(\tableref{tab:sortoptionsletternumber}), then you can determine the
order of white space and punctuation. In this context, punctuation
means any character that's not considered a letter, a number
or white space. This means that characters such as combining marks
are considered punctuation.

The \meta{value} may be one of the following:
\begin{itemize}
\item\optfmt{punc-space-first}: punctuation comes first, followed by
white space (then letters and optionally numbers according to the letter-number
rule);
\item\optfmt{punc-space-last}: punctuation followed by white space
come last (after letters and optionally numbers according to the letter-number
rule);
\item\optfmt{space-punc-first}: white space comes first, followed by
punctuation (then letters and optionally numbers according to the letter-number
rule);
\item\optfmt{space-punc-last}: white space followed by punctuation
come last (after letters and optionally numbers according to the letter-number
rule); 
\item\optfmt{space-first-punc-last}: white space comes first
(followed by letters and optionally numbers according to the letter-number
rule) and punctuation comes last; 
\item\optfmt{punc-first-space-last}: punctuation comes first
(followed by letters and optionally numbers according to the letter-number
rule) and white space comes last;
\item\optfmt{punc-first-space-zero}: punctuation comes first
(although numbers may come before)
and white space is replaced by the digit~\code{0} (0x30);
\item\optfmt{punc-last-space-zero}: punctuation comes last
(although numbers may come after)
and white space is replaced by the digit~\code{0} (0x30).
\item\optfmt{punc-first-space-zero-match-next}: punctuation comes first
(although numbers may come before)
and white space is replaced by zero;
\item\optfmt{punc-last-space-zero-match-next}: punctuation comes last
(although numbers may come after)
and white space is replaced by zero.
\end{itemize}
Remember that the reverse sort methods will invert order governed by this setting.

For the \optfmt{space-zero-match-next} settings, the sort value will
have all spaces replaced with a digit that represents zero. If the
space isn't followed by a digit, the basic Latin \code{0} (0x30)
will be used, otherwise \bibgls\ will try to match the zero with the
following digit group. For example, if the space is followed by
\textsuperscript{1} (0xB9) the space will be replaced by
\textsuperscript{0} (0x2070),  resulting in the sub-string
\code{\textsuperscript{01}} (0xB9 0x2070). 

If just the \optfmt{space-zero}
(without the \optfmt{-match-next}) is used then the space will just
be replaced with \code{0} resulting in the sub-string
\code{0\textsuperscript{1}} (0x30 0x2070). In this case, the
\code{0} will be distinct from \textsuperscript{1} (rather than
being considered a leading zero). However, for 
other numbering systems the \code{0} will be treated as a leading
zero. For example, if the space is followed by the Devanagari digit
one (0x0967) then the sub-string will be 0x30 0x0967 but here the
mixture is allowed to form a number (with a leading zero) as both
characters belong to the Unicode category \idx{numberdecimaldigit}.

This means that the \optfmt{-match-next} settings are only really
needed if the sort string contains the superscript or subscript
digits that don't belong to the \qt{Number, Decimal Digit} category.
The plain \optfmt{space-zero} alternatives are more efficient as
they just perform a simple substitution.

The \TeX\ parser library used by \bibgls\ recognises the standard
\LaTeX\ text-mode commands \idx{textsuperscript}\margm{text} and 
\idx{textsubscript}\margm{text}
and will use the Unicode superscript or subscript characters if they cover every
character in \meta{text}, otherwise HTML markup is used, but that's
then stripped by \bibgls. This means that
\begin{verbatim}
C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}
\end{verbatim}
will be converted to
\code{C\textsubscript{10}H\textsubscript{10}O\textsubscript{4}} but 
\begin{verbatim}
X\textsubscript{1, 2}
\end{verbatim}
will be converted to
\begin{verbatim}
X<sub>1, 2</sub>
\end{verbatim}
which ends up as \code{X1, 2}.


Note that \csopt[first]{letter-number-rule} and
\csopt[last]{letter-number-rule} overrides this option when
comparing a number with white space or punctuation.

\optsection{numeric-sort-pattern}

If you use the custom \csopt[numberformat]{sort} or
\csopt[numberformat-reverse]{sort}, you need to 
specify the format pattern with this option where
\meta{value} is a pattern recognised by Java's
\href{http://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html}{\code{java.text.DecimalFormat}}
class. You can use \stringu\meta{hex} to indicate Unicode characters
by their hexadecimal code. You can also use \verb|\#|, \verb|\%|,
\verb|\_|, \verb|\&|, \verb|\{| and \verb|\}| to indicate \verb|#|, \verb|%|,
\verb|_|, \verb|&|, \verb|{| and \verb|}|. 

Where the dual or secondary sort uses \optfmt{numberformat}
or \optfmt{numberformat-reverse}, use \csopt{dual-numeric-sort-pattern} for 
\csopt{dual-sort} and \csopt{secondary-numeric-sort-pattern} 
for \csopt{secondary}.

\optsection{numeric-locale}

If you use any of the locale-sensitive numeric sort methods
(\tableref{tab:sortoptionsnumerical}),
such as \csopt[numeric]{sort}, use this option to set
the locale. The value may be:
\begin{itemize}
\item\optfmt{locale}: use Java's default locale (which is usually
the operating system's locale);
\item\optfmt{doc}: use the document's locale or, if not set, assume
\csopt[locale]{numeric-locale};
\item\meta{lang-tag}: set to the locale identified by the given
a valid language tag \meta{lang-tag}.
\end{itemize}
Use \csopt{dual-numeric-locale} for 
\csopt{dual-sort} and \csopt{secondary-numeric-locale} 
for \csopt{secondary}.

\optsection{date-sort-locale}

If you use a date/time sort method (\tableref{tab:sortoptionsdatetime}), 
then you can set the locale used by Java's date-time parser.
The default setting is \csopt[locale]{date-sort-locale}.

The value may be \optfmt{locale} (use Java's default locale),
\optfmt{doc} (use the document's locale) or a valid language tag
\meta{lang-tag} identifying the locale.

Use \csopt{dual-date-sort-locale} and \csopt{secondary-date-sort-locale}
for the dual and secondary.

\optsection{date-sort-format}

If you use a date/time sort method (\tableref{tab:sortoptionsdatetime}), 
then you can set the format used by Java's date-time parser. 
If omitted, \csopt[default]{date-sort-format} is assumed.
The \meta{value} may be one of:
\begin{itemize}
\item\optfmt{default}: use the locale's default format.
\item\optfmt{short}: use the locale's short format.
\item\optfmt{medium}: use the locale's medium format.
\item\optfmt{long}: use the locale's long format.
\item\optfmt{full}: use the locale's full format.
\item\meta{pattern}: provide a custom pattern.
This should match the specifications for Java's
\href{http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html}{\code{SimpleDateFormat}}
class. You may use \stringu\meta{hex} to indicate Unicode characters
or \verb|\#| \verb|\%| \verb|\_| \verb|\&| \verb|\{| and
\verb|\}| to indicate \verb|#| \verb|%| \verb|_| \verb|&| \verb|{| and
\verb|}|.
\end{itemize}

With the custom setting, if the pattern only contains date (but not
time) information, then it must be used with \csopt[date]{sort}
or \csopt[date-reverse]{sort}. If the pattern only contains time
(but not date) information, then it must be used with
\csopt[time]{sort} or \csopt[time-reverse]{sort}. If the pattern
contains date and time information, then it must be used with
\csopt[datetime]{sort} or \csopt[datetime-reverse]{sort}.

For example, suppose each entry provides information about a person
and the \field{user1} field is used to store their date of birth:
\begin{verbatim}
@entry{caesar,
  name={Gaius Julius Caesar},
  first={Julius Caesar},
  text={Caesar},
  description={Roman politician and general},
  user1={13 July 100 BC}
}

@entry{wellington,
  name={Arthur Wellesley, 1st Duke of Wellington},
  first={Arthur Wellesley (Duke of Wellington)},
  text={Wellington},
  description={Anglo-Irish soldier and statesman},
  user1={1 May 1769 AD}
}
\end{verbatim}
Then the entries can be sorted by date of birth using:
\begin{verbatim}
\GlsXtrLoadResources[
  src={entries}, % data in entries.bib
  sort-field={user1},
  sort={date},
  date-sort-format={d MMM y G}
]
\end{verbatim}

The \code{G} (era) date pattern specifier expects a string, such as
\qt{AD}. It will match lower case forms, such as \qt{ad}, so if you
have \verb|\textsc{ad}| the interpreter will convert this to
\code{ad} (stripping the text-block command). However, in general
it's best to supply a semantic command that ensures that the
interpreted result matches the required format.

For example, if \csfmt{era} is provided with:
\begin{verbatim}
@preamble{"\providecommand{\era}[1]{\textsc{\MakeLowercase{#1}}}"}
\end{verbatim}
If the definition is hidden from the interpreter
(\csopt[false]{interpret-preamble}) and the field
value contains \verb|\era{AD}| then the custom command will simply be stripped
leaving \code{AD} which can be matched by \code{G}. 

If the definition is picked up by the interpreter then the field
value will contain \code{ad} (from \idx{MakeLowercase}) but this can
be matched by \code{G}, so it isn't a problem.
However, if the definition of \csfmt{era} is changed so that the era label
supplied in the argument is converted to something that doesn't
match \code{G} then the definition should be hidden from the
interpreter.

Here's a complete document that changes the \field{group} fields to use
the year and era:
\begin{verbatim}
\documentclass{article}

\usepackage[record,style=indexgroup]{glossaries-extra}

\newcommand{\bibglsdategroup}[7]{#1#4#7}
\newcommand{\bibglsdategrouptitle}[7]{\number#1\ #4}

\GlsXtrLoadResources[
  src={entries},
  sort-field={user1},
  sort={date},
  date-sort-format={d MMM y G},
  selection=all
]

\begin{document}
\printunsrtglossaries
\end{document}
\end{verbatim}
(The use of \csfmt{number} strips the leading zero from the year.)

\section{Secondary Glossary}
\label{sec:secondaryopts}

\optsection{secondary}

It may be that you want to display a glossary twice but with a
different order. For example, the first time alphabetically and the
second time by category.  One way to do this is to have two
\gls{GlsXtrLoadResources} that both load the same \ext{bib} file with
different \csopt{label-prefix} and \csopt{sort} settings, but this
is only possible with \csopt[all]{selection} or by ensuring you
reference each entry with both label prefixes.

A simpler method is to use a single \gls{GlsXtrLoadResources}
with the \csopt{secondary} option. The value
(which must be supplied) should be in the format 
\begin{definition}
\meta{sort}:\meta{field}:\meta{type}
\end{definition}
or
\begin{definition}
\meta{sort}:\meta{type}
\end{definition}
If the \meta{field} is omitted, the value of \csopt{sort-field} is
used. Remember that when the primary entries are sorted, the
\field{sort} field will be set, which means that the fallback field
(such as \field{name}) won't be used in the secondary sort. In
general it's best to supply the field unless one type is sorted and the
other isn't. (The actual sort value obtained by the secondary sort
will be saved in the \field{secondarysort} field in case you require it.)

The value of \meta{sort} is as for \csopt{sort}, but note
that in this case the sort value \optfmt{unsrt} or \optfmt{none}
means to use the same ordering as the primary entries. For
example, with \csopt[de-CH-1996]{sort},
\csopt[none:copies]{secondary} the \code{copies} list will be
ordered according to \code{de-CH-1996} and not according to the
order in which they were read when the \ext{bib} file or files were
parsed.  If \meta{sort} is \optfmt{custom}, then the rule should be
provided with \csopt{secondary-sort-rule}.

This option will copy all the selected entries into the glossary labelled
\meta{type} sorted according to \meta{sort} (using \meta{field} as
the sort value). Note that this \emph{just copies the entry's label}
to the second glossary list rather than creating a duplicate entry,
which saves resources but it means that all the fields will be
identical. If you want groups in your glossary, the group
information for the secondary glossary will be stored in the
internal \field{secondarygroup} field. The \field{group} field will
contain the group for the primary glossary.

In order to switch fields in \idx{printunsrtglossary}, you need at
least v1.21 of \sty{glossaries-extra} which provides
\idx{glsxtrgroupfield} to keep track of the appropriate field label.
If this command is defined, the preamble for the secondary glossary 
will be adjusted to locally change the field to
\field{secondarygroup}. With older versions, the group information
in the secondary glossary will be the same as for the primary
glossary.

(If the glossary \meta{type} doesn't exist, it will be
defined with \idx{provideignoredglossary*}\margm{type}.)
Note that if the glossary already exists and contains entries,
the existing entries aren't re-ordered. The new entries are
simply appended to the list.

For example, suppose the \ext{bib} file contains entries like:
\begin{verbatim}
@entry{quartz,
  name={quartz},
  description={hard mineral consisting of silica},
  category={mineral}
}

@entry{cabbage,
  name={cabbage},
  description={vegetable with thick green or purple leaves},
  category={vegetable}
}

@entry{waterfowl,
  name={waterfowl},
  description={any bird that lives in or about water},
  category={animal}
}
\end{verbatim}
and the document preamble contains:
\begin{verbatim}
\GlsXtrLoadResources[src={entries},sort={en-GB},
  secondary={en-GB:category:topic}
]
\end{verbatim}
This sorts the primary entries according to the default
\csopt{sort-field} and then sorts the entries according
to the \field{category} field and copies this list to
the \code{topic} glossary (which will be provided if not defined.)

The secondary list can be displayed with the hypertargets switched
off to prevent duplicates. The cross-references will link to the
original glossary.

For example:
\begin{verbatim}
\printunsrtglossary[title={Summary (alphabetical)}]
\printunsrtglossary[title={Summary (by topic)},target=false]
\end{verbatim}

The alternative (or if more than two lists are required) is to
reload the same \ext{bib} file with different label prefixes.
For example, if the entries are stored in \filefmt{entries.bib}:
\begin{verbatim}
\newglossary*{nosort}{Symbols (Unsorted)}
\newglossary*{byname}{Symbols (Letter Order)}
\newglossary*{bydesc}{Symbols (Ordered by Description)}
\newglossary*{byid}{Symbols (Ordered by Label)}

\GlsXtrLoadResources[
  src={entries},% entries.bib
  sort={unsrt},
  type={nosort}
]

\GlsXtrLoadResources[
  src={entries},% entries.bib
  sort={letter-case},
  type={byname},
  label-prefix={byname.}
]

\GlsXtrLoadResources[
  src={entries},% entries.bib
  sort={locale},
  sort-field={description},
  type={bydesc},
  label-prefix={bydesc.}
]

\GlsXtrLoadResources[
  src={entries},% entries.bib
  sort={letter},
  sort-field={id},
  type={byid},
  label-prefix={byid.}
]
\end{verbatim}

\optsection{secondary-trim-sort}

As \csopt{trim-sort} but for secondary sorting.

\optsection{secondary-sort-rule}

As \csopt{sort-rule} but for secondary custom sorting.

\optsection{secondary-break-at}

As \csopt{break-at} but for secondary entries.

\optsection{secondary-break-marker}

As \csopt{break-marker} but for secondary entries.

\optsection{secondary-sort-suffix}

As \csopt{sort-suffix} but for secondary entries.

\optsection{secondary-sort-suffix-marker}

As \csopt{sort-suffix-marker} but for secondary entries.

\optsection{secondary-strength}

As \csopt{strength} but for secondary entries.

\optsection{secondary-decomposition}

As \csopt{decomposition} but for secondary entries.

\optsection{secondary-letter-number-rule}

As \csopt{letter-number-rule} but for secondary letter-number sorting.

\optsection{secondary-letter-number-punc-rule}

As \csopt{letter-number-punc-rule} but for secondary letter-number sorting.

\optsection{secondary-numeric-sort-pattern}

As \csopt{numeric-sort-pattern} but for secondary
locale-sensitive numeric sorting.

\optsection{secondary-numeric-locale}

As \csopt{numeric-locale} but for secondary
locale-sensitive numeric sorting.

\optsection{secondary-date-sort-locale}

As \csopt{date-sort-locale} but for secondary date-time sorting.

\optsection{secondary-date-sort-format}

As \csopt{date-sort-format} but for secondary date-time sorting.

\section{Dual Entries}
\label{sec:dualopts}

\subsection{General Dual Settings}
\label{sec:dualoptsgeneral}

\optsection[\subsubsection]{dual-prefix}

This option indicates the prefix to use for the dual entries. The
default value is \idprefix{dual} (including the terminating period). 
Any references to dual entries within the \ext{bib} file should use
the prefix \idprefix{dual} which will be replaced by \meta{value}
when the \ext{bib} file is parsed.

\optsection[\subsubsection]{combine-dual-locations}

You can merge the location lists for each primary entry
with that of the corresponding dual entry. This setting
allows you to specify this and determine whether both primary and
dual entries should have the combined location list or 
whether only the primary or the dual should be assigned the
combined list.

The \meta{value} may be one of:
\begin{itemize}
\item\optfmt{false} This is the default setting. The location lists
aren't combined.
\item\optfmt{both} Both the primary and dual are given the combined
location list.
\item\optfmt{dual} Only the dual is given the combined location
list. The primary's location list is emptied.
\item\optfmt{primary} Only the primary is given the combined
location list. The dual's location list is emptied.
\end{itemize}

For example, suppose the file \filefmt{entries.bib} contains:
\begin{verbatim}
@dualindexentry{array,
  description={ordered list of values}
}

@dualindexentry{vector,
  name={vector},
  description={column or row of values}
}

@dualindexentry{set,
  description={collection of values}
}

@dualindexentry{matrix,
  plural={matrices},
  description={rectangular array of values}
}
\end{verbatim}
and the document contains:
\begin{verbatim}
\documentclass{article}

\usepackage[colorlinks]{hyperref}
\usepackage[record,index,style=indexgroup]{glossaries-extra}

\GlsXtrLoadResources[
 src={entries},
 type=index,
 label-prefix={idx.},
 dual-prefix={gls.},
 dual-type=main
]

\begin{document}
\gls{gls.array}, \gls{gls.vector}, \gls{gls.set}, \gls{gls.matrix}.

\newpage
\gls{gls.array}, \gls{idx.vector}, \gls{idx.set}, \gls{gls.matrix}.

\newpage
\gls{gls.array}, \gls{gls.vector}, \gls{gls.set}, \gls{gls.matrix}.

\printunsrtglossaries
\end{document}
\end{verbatim}
In this case, the primary entries are placed in the \code{index}
glossary type and are assigned the prefix \idprefixfmt{idx} but only
two of the primary entries have been used in the document (both on
page~2).

The dual entries are assigned the prefix \idprefixfmt{gls} and are
placed in the \code{main} glossary. The \code{gls.array} 
and \code{gls.matrix} entries have been indexed on pages~1, 2 and~3.
The \code{gls.vector} and \code{gls.set} entries have been indexed
on pages~1 and~3.

With the default setting, some of the locations are in the
\code{main} glossary (corresponding to \verb|\gls{gls.array}|,
\verb|\gls{gls.vector}|, \verb|\gls{gls.set}| and
\verb|\gls{gls.matrix}|) and some of the locations are in the
\code{index} glossary (corresponding to \verb|\gls{idx.vector}|
and \verb|\gls{idx.set}|).

If the option \csopt[primary]{combine-dual-locations} is added to
the resource set, then all the locations are moved to the
\code{index} glossary. The entries in the \code{main} glossary no
longer have locations. This is actually preferable for this type
of document and it's best not to reference the primary (index)
entries as the hyperlink created by \idx{gls} will point to the
index, but these entries don't have descriptions, so it's less
useful than referencing the dual (main) entries as then the
hyperlink can point to the definition in the \code{main} glossary.


\subsection{Dual Fields}
\label{sec:dualoptsfields}

\optsection[\subsubsection]{dual-type}

This option sets the \field{type} field for all dual
entries. (The primary entries obey the \csopt{type} option.) This
will override any value of \field{type} provided in the \ext{bib}
file (or created through a mapping). The \meta{value} is required.

The \meta{value} may be:
\begin{itemize}
\item \optfmt{same as entry}: sets the \field{type} to the entry
type. For example, if the entry was defined with
\atentry{dualentry}, the \field{type} will be set to
\optfmt{dualentry}.

\item \optfmt{same as base}: sets the \field{type} to the base name
of the \ext{bib} file (without the extension) that provided the
entry definition (new to v1.1);

\item \optfmt{same as primary}: sets the \field{type} to the same as
the corresponding primary entry's \field{type} (which may have been
set with \csopt{type}). If the primary entry doesn't have the
\field{type} field set, the dual's \field{type} will remain
unchanged.

\item \meta{label}: sets the \field{type} field to \meta{label}.
\end{itemize}

Remember that the glossary with that label must have already 
been defined.

For example:
\begin{verbatim}
\newglossary*{english}{English}
\newglossary*{french}{French}

\GlsXtrLoadResources[src={entries},sort={en},dual-sort={fr},
 type=english,
 dual-type=french]
\end{verbatim}

Alternatively:
\begin{verbatim}
\newglossary*{dictionary}{Dictionary}

\GlsXtrLoadResources[src={entries},sort={en},dual-sort={fr},
 type=dictionary,
 dual-type={same as primary}]
\end{verbatim}

\optsection[\subsubsection]{dual-category}

This option sets the \field{category} field for all dual
entries. (The primary entries obey the \csopt{category} option.) This
will override any value of \field{category} provided in the \ext{bib}
file (or created through a mapping). The \meta{value} may be empty.

The \meta{value} may be:
\begin{itemize}
\item \optfmt{same as entry}: sets the \field{category} to the entry
type. For example, if the entry was defined with
\atentry{dualentry}, the \field{category} will be set to
\optfmt{dualentry}.

\item \optfmt{same as base}: sets the \field{category} to the base
name of the \ext{bib} file (without the extension) that provided the
entry definition (new to v1.1);

\item \optfmt{same as primary}: sets the \field{category} to the
same as the corresponding primary entry's \field{category} (which
may have been set with \csopt{category}). If the primary entry
doesn't have the \field{category} field set, the dual's
\field{category} will remain unchanged.

\item \optfmt{same as type}: sets the \field{category} to the same
as the value of the entry's \field{type} field (which may have been
set with \csopt{dual-type}). If the entry doesn't have the
\field{type} field set, the \field{category} will remain unchanged.

\item \meta{label}: sets the \field{category} field to \meta{label}.
\end{itemize}

\optsection[\subsubsection]{dual-counter}

As \csopt{counter} but for the dual entries. In this case
\meta{value} may be the name of the counter or 
\optfmt{same as primary} which uses the counter for the primary
entry.

\optsection[\subsubsection]{dual-short-case-change}

As \csopt{short-case-change} but applies to the \field{dualshort}
field instead.

\optsection[\subsubsection]{dual-field}

If this option is used, this will add \idx{glsxtrprovidestoragekey}
to the start of the \ext{glstex} file providing the key given by
\meta{value}.  Any entries defined using \atentry{dualentry}
will be written to the \ext{glstex} file with an extra field called
\meta{value} that is set to the mirror entry. If \meta{value} is
omitted \code{dual} is assumed.

For example, if the \ext{bib} file contains
\begin{verbatim}
@dualentry{child,
  name={child},
  plural={children},
  description={enfant}
}
\end{verbatim}
Then with \csopt[dualid]{dual-field} this will first add the line
\begin{verbatim}
\glsxtrprovidestoragekey{dualid}{}{}
\end{verbatim}
at the start of the file and will include the line
\begin{verbatim}
dualid={dual.child},
\end{verbatim}
for the primary entry (\code{child}) and the line
\begin{verbatim}
dualid={child},
\end{verbatim}
for the dual entry (\code{dual.child}). It's then possible to
reference one entry from the other. For example, the post-description 
hook could contain:
\begin{verbatim}
 \ifglshasfield{dualid}{\glscurrententrylabel}
 {%
   \space
   (\glshyperlink{\glsxtrusefield{\glscurrententrylabel}{dualid}})%
 }%
 {}%
\end{verbatim}
Note that this new field won't be available for use within the
\ext{bib} file (unless it was previously defined in the document
before \csref{glsxtrresourcefile}).

\subsection{Dual Sorting}
\label{sec:dualoptssort}

\optsection[\subsubsection]{dual-sort}

This option indicates how to sort the dual entries. The primary
entries are sorted with the normal entries according to
\csopt{sort}, and the dual entries are sorted according to
\csopt{dual-sort} unless \csopt[combine]{dual-sort} in which case the dual
entries will be combined with the primary entries and all the
entries will sorted together according to the \csopt{sort} option.

If \meta{value} isn't set to \optfmt{combine} then the dual
entries are sorted separately according to \meta{value} (as per
\csopt{sort}) and the dual entries will be appended at the end of
the \ext{glstex} file. The field used by the comparator is given by
\csopt{dual-sort-field}.
If \csopt[custom]{dual-sort}, then the dual entries according to the 
rule provided by \csopt{dual-sort-rule}.


For example:
\begin{verbatim}
\GlsXtrLoadResources[
 src={entries-dual},
 sort={en},
 dual-sort={de-CH-1996}
]
\end{verbatim}
This will sort the primary entries according to \optfmt{en}
(English) and the secondary entries according to \optfmt{de-CH-1996} 
(Swiss German new orthography) whereas:
\begin{verbatim}
\GlsXtrLoadResources[
 src={entries-dual},
 sort={en-GB},
 dual-sort={combine}
]
\end{verbatim}
will combine the dual entries with the primary entries and sort them
all according to the \optfmt{en-GB} locale (British English).

If not set, \csopt{dual-sort} defaults to \optfmt{combine}. If
\meta{value} is omitted, \optfmt{locale} is assumed.

\optsection[\subsubsection]{dual-sort-field}

This option indicates the field to use when sorting dual entries
(when they haven't been combined with the primary entries). The
default value is the same as the \csopt{sort-field} value.

\optsection[\subsubsection]{dual-trim-sort}

As \csopt{trim-sort} but for dual sorting.

\optsection[\subsubsection]{dual-sort-rule}

As \csopt{sort-rule} but for \csopt[custom]{dual-sort}.

\optsection[\subsubsection]{dual-break-at}

As \csopt{break-at} but for dual entries.

\optsection[\subsubsection]{dual-break-marker}

As \csopt{break-marker} but for dual entries.

\optsection[\subsubsection]{dual-sort-suffix}

As \csopt{sort-suffix} but for dual entries.

\optsection[\subsubsection]{dual-sort-suffix-marker}

As \csopt{sort-suffix-marker} but for dual entries.

\optsection[\subsubsection]{dual-strength}

As \csopt{strength} but for dual entries.

\optsection[\subsubsection]{dual-decomposition}

As \csopt{decomposition} but for dual entries.

\optsection[\subsubsection]{dual-letter-number-rule}

As \csopt{letter-number-rule} but for dual entries that use a
letter-number sort.

\optsection[\subsubsection]{dual-letter-number-punc-rule}

As \csopt{letter-number-punc-rule} but for dual entries that use a
letter-number sort.

\optsection[\subsubsection]{dual-numeric-sort-pattern}

As \csopt{numeric-sort-pattern} but for dual entries that use a
locale-sensitive numeric sort.

\optsection[\subsubsection]{dual-numeric-locale}

As \csopt{numeric-locale} but for dual entries that use a
locale-sensitive numeric sort.

\optsection[\subsubsection]{dual-date-sort-locale}

As \csopt{date-sort-locale} but for dual entries that
use a date/time sort.

\optsection[\subsubsection]{dual-date-sort-format}

As \csopt{date-sort-format} but for dual entries that
use a date/time sort.

\subsection{Dual Mappings}
\label{sec:dualoptsmap}

\optsection[\subsubsection]{dual-entry-map}

This setting governs the behaviour of \atentry{dualentry}
definitions. The value consists of two comma-separated lists of
equal length identifying the field mapping used to create the dual
entry from the primary one. Note that the \field{alias} field
can't be mapped.

The default setting is:
\begin{verbatim}
dual-entry-map=
{
  {name,plural,description,descriptionplural},
  {description,descriptionplural,name,plural}
}
\end{verbatim}
The dual entry is created by copying the value of the field in the
first list \meta{list1} to the field in the corresponding place in the second
list \meta{list2}. Any additional fields are copied over to the same
field.

For example:
\begin{verbatim}
@dualentry{cat,
  name={cat},
  description={chat},
  see={dog}
}
\end{verbatim}
defines two entries. The primary entry is essentially like
\begin{verbatim}
@entry{cat,
  name={cat},
  plural={cat\glspluralsuffix },
  description={chat},
  descriptionplural={chat\glspluralsuffix },
  see={dog}
}
\end{verbatim}
and the dual entry is essentially like
\begin{verbatim}
@entry{dual.cat,
  description={cat},
  descriptionplural={cat\glspluralsuffix },
  name={chat},
  plural={chat\glspluralsuffix },
  see={dog}
}
\end{verbatim}
(except they're defined using \gls{bibglsnewdualentry} instead of
\gls{bibglsnewentry}, and each is considered dependent on the other.)

The \field{see} field isn't listed in \csopt{dual-entry-map} so its
value is simply copied directly over to the \field{see} field in the
dual entry. Note that the missing plural fields (\field{plural} and
\field{descriptionplural}) have been filled in.

In general \bibgls\ doesn't try to supply missing fields, but in the
dual entry cases it needs to do this for the mapped fields. This is
because the shuffled fields might have different default values from
the \styfmt{glossaries-extra} package's point of view. For example, 
\gls{longnewglossaryentry} doesn't provide a default for
\field{descriptionplural} if if hasn't been set.

\optsection[\subsubsection]{dual-abbrv-map}

This is like \csopt{dual-entry-map} but applies to
\atentry{dualabbreviation} rather than \atentry{dualentry}. 
Note that the \field{alias} field can't be mapped. The
default setting is:
\begin{verbatim}
dual-abbrv-map=
{
  {short,shortplural,long,longplural,dualshort,dualshortplural,
   duallong,duallongplural},
  {dualshort,dualshortplural,duallong,duallongplural,short,shortplural,
   long,longplural}
}
\end{verbatim}

This essentially flips the \field{short} field with the
\field{dualshort} field and the \field{long} field with the
\field{duallong} field. See \atentry{dualabbreviation}
for further details.

\optsection[\subsubsection]{dual-abbrventry-map}

This is like \csopt{dual-entry-map} but applies to
\atentry{dualabbreviationentry} rather than \atentry{dualentry}. 
Note that the \field{alias} field can't be mapped. The
default setting is:
\begin{verbatim}
dual-abbrventry-map=
{
  {long,short,shortplural},
  {name,text,plural}
}
\end{verbatim}
See \atentry{dualabbreviationentry} for further details.


\optsection[\subsubsection]{dual-symbol-map}

This is like \csopt{dual-entry-map} but applies to
\atentry{dualsymbol} rather than \atentry{dualentry}. 
Note that the \field{alias} field can't be mapped. The
default setting is:
\begin{verbatim}
dual-symbol-map=
{
  {name,plural,symbol,symbolplural},
  {symbol,symbolplural,name,plural}
}
\end{verbatim}

This essentially flips the \field{name} field with the
\field{symbol} field.

\optsection[\subsubsection]{dual-indexentry-map}

This is like \csopt{dual-entry-map} but applies to
\atentry{dualindexentry} rather than \atentry{dualentry}. 

\optsection[\subsubsection]{dual-indexsymbol-map}

This is like \csopt{dual-entry-map} but applies to both
\atentry{dualindexsymbol} and \atentry{dualindexnumber}. 

\optsection[\subsubsection]{dual-indexabbrv-map}

This is like \csopt{dual-entry-map} but applies to both the dual
\atentry{dualindexabbreviation} and tertiary
\atentry{tertiaryindexabbreviationentry} entry types. 

\subsection{Dual Back-Links}
\label{sec:dualoptsbacklinks}

\optsection[\subsubsection]{dual-entry-backlink}

This is a boolean setting.
When used with \atentry{dualentry}, if \meta{boolean} is
\optfmt{true}, this will wrap the contents of first mapped field
with \idx{glshyperlink}. If \meta{boolean} is missing \optfmt{true}
is assumed.

The field is obtained from the first mapping
listed in \csopt{dual-entry-map}.

For example, if the document contains:
\begin{verbatim}
\GlsXtrLoadResource[dual-entry-backlink,
dual-entry-map={
  {name,plural,description,descriptionplural},
  {description,descriptionplural,name,plural}
},
src={entries-dual}]
\end{verbatim}
and if the \ext{bib} file contains
\begin{verbatim}
@dualentry{child,
  name={child},
  plural={children},
  description={enfant}
}
\end{verbatim}
Then the definition of the primary entry (\code{child}) in the
\ext{glstex} file will have the \field{description} field set to
\begin{verbatim}
{\glshyperlink[enfant]{dual.child}}
\end{verbatim}
and the dual entry (\code{dual.child}) will have the
\field{description} field set to
\begin{verbatim}
{\glshyperlink[child]{child}}
\end{verbatim}

The reason the \field{description} field is chosen for the modification is
because the first field listed in the first list in \csopt{dual-entry-map} 
is the \field{name} field which maps to \field{description} (the
first field in the second list). This means that the hyperlink for
the dual entry should be put in the \field{description} field.

For the primary entry, the \field{name} field is looked up in the
second list from the \csopt{dual-entry-map} setting. This is the
third item in this second list, so the third item in the first list
is selected, which also happens to be the \field{description} field,
so the hyperlink for the primary entry is put in the
\field{description} field.

\optsection[\subsubsection]{dual-abbrv-backlink}

This is analogous to \csopt{dual-entry-backlink} but for entries
defined with \atentry{dualabbreviation} instead of
\atentry{dualentry}.

\optsection[\subsubsection]{dual-symbol-backlink}

This is analogous to \csopt{dual-entry-backlink} but for entries
defined with \atentry{dualsymbol} instead of \atentry{dualentry}.

\optsection[\subsubsection]{dual-abbrventry-backlink}

Analogous to \csopt{dual-entry-backlink} but for entries
defined with \atentry{dualabbreviationentry} instead of
\atentry{dualentry}.

\optsection[\subsubsection]{dual-entryabbrv-backlink}

Analogous to \csopt{dual-entry-backlink} but for entries
defined with \atentry{dualentryabbreviation} instead of
\atentry{dualentry}.

\optsection[\subsubsection]{dual-indexentry-backlink}

This is analogous to \csopt{dual-entry-backlink} but for entries
defined with \atentry{dualindexentry} instead of
\atentry{dualentry}.

\optsection[\subsubsection]{dual-indexsymbol-backlink}

This is analogous to \csopt{dual-entry-backlink} but for entries
defined with \atentry{dualindexsymbol} and
\atentry{dualindexnumber}.

\optsection[\subsubsection]{dual-indexabbrv-backlink}

This is analogous to \csopt{dual-entry-backlink} but for entries
defined with \atentry{dualindexabbreviation} and
\atentry{tertiaryindexabbreviationentry}.

\optsection[\subsubsection]{dual-backlink}

Shortcut for:
\begin{flushleft}\obeylines
\csopt[\meta{boolean}]{dual-entry-backlink}, 
\csopt[\meta{boolean}]{dual-abbrventry-backlink}, 
\csopt[\meta{boolean}]{dual-abbrv-backlink},
\csopt[\meta{boolean}]{dual-symbol-backlink},
\csopt[\meta{boolean}]{dual-indexentry-backlink},
\csopt[\meta{boolean}]{dual-indexsymbol-backlink},
\csopt[\meta{boolean}]{dual-indexabbrv-backlink}
\end{flushleft}

\section{Tertiary Entries}

\optsection{tertiary-prefix}

This option indicates the prefix to use for the tertiary entries. The
default value is \idprefix{tertiary} (including the terminating period). 

\optsection{tertiary-type}

This option indicates that the tertiary entries should have
their \field{type} field set to \meta{value}. If \meta{value} is
empty the \field{type} is left unchanged.

\optsection{tertiary-category}

This option indicates that the tertiary entries should have
their \field{category} field set to \meta{value}. If \meta{value} is
empty the \field{category} is left unchanged.

\chapter{Provided Commands}
\label{sec:bibglscs}

When \bibgls\ creates the \ext{glstex} file, it writes some
definitions for custom commands in the form \csfmt{bibgls...} which
may be changed as required. The command definitions all use
\idx{providecommand} which means that you can define the command with
\idx{newcommand} before the resource file is loaded.

\section{Entry Definitions}
\label{sec:newentrydefs}

This section lists the commands (\csfmt{bibglsnew...}) used to
define entries.  Note that the entry definition commands are
actually used when \TeX\ inputs the resource file, so redefining
them after the resource file is loaded won't have an effect on the
entries defined in that resource file (but will affect entries defined
in subsequent resource files). Each provided command is defined in
the \ext{glstex} file immediately before the first entry that
requires it, so only the commands that are actually needed are
provided.

After each entry is defined, if it has any associated locations, the
locations are added using
\nosecformatdef{glsxtrfieldlistadd}

\cssection{bibglsnewentry}

\formatdef{bibglsnewentry}
This command is used to define terms identified with the
\atentry{entry} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewentry}[4]{%
 \longnewglossaryentry*{#1}{name={#3},#2}{#4}%
}
\end{verbatim}
This uses the starred form of \gls{longnewglossaryentry} that
doesn't automatically append \idx{nopostdesc} (which interferes with
the post-description hooks provided by category attributes).

\cssection{bibglsnewsymbol}

\formatdef{bibglsnewsymbol}
This command is used to define terms identified with the
\atentry{symbol} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewsymbol}[4]{%
 \longnewglossaryentry*{#1}{name={#3},sort={#1},category={symbol},#2}{#4}%
}
\end{verbatim}
Note that this sets the \field{sort} field to the label, but this
may be overridden by the \meta{options} if the \field{sort} field
was supplied or if \bibgls\ has determined the value whilst sorting
the entries.

This also sets the \field{category} to \optfmt{symbol}, but again this may
be overridden by \meta{options} if the entry had the \field{category}
field set in the \ext{bib} file or if the \field{category} was
overridden with \csopt[\meta{value}]{category}.

\cssection{bibglsnewnumber}

\formatdef{bibglsnewnumber}
This command is used to define terms identified with the
\atentry{number} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewnumber}[4]{%
 \longnewglossaryentry*{#1}{name={#3},sort={#1},category={number},#2}{#4}%
}
\end{verbatim}
This is much the same as \gls{bibglsnewsymbol} above but sets the 
\field{category} to \optfmt{number}. Again the \field{sort} and
\field{category} keys may be overridden by \meta{options}.

\cssection{bibglsnewindex}

\formatdef{bibglsnewindex}
This command is used to define terms identified with the
\atentry{index} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand*{\bibglsnewindex}[2]{%
 \newglossaryentry{#1}{name={#1},category={index},description={},#2}%
}
\end{verbatim}
This makes the \field{name} default to the \meta{label}, assigns the
the \field{category} to \code{index} and sets an empty
\field{description}. These settings may be overridden by
\meta{options}.

Note that the \field{description} doesn't include
\idx{nopostdesc} to allow for the post-description hook used by
category attributes.

\cssection{bibglsnewabbreviation}

\formatdef{bibglsnewabbreviation}
This command is used to define terms identified with the
\atentry{abbreviation} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewabbreviation}[4]{%
  \newabbreviation[#2]{#1}{#3}{#4}%
}
\end{verbatim}
Since this uses \gls{newabbreviation}, it obeys the 
abbreviation style for its given \field{category} (which may have
been set in \meta{options}, either from the \field{category} field
in the \ext{bib} file or through the \csopt{category} option).
Similarly the \field{type} will obey \idx{glsxtrabbrvtype} unless 
the value is supplied in the \ext{bib} file or through the
\csopt{type} option.

\cssection{bibglsnewacronym}

\formatdef{bibglsnewacronym}
This command is used to define terms identified with the
\atentry{acronym} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewacronym}[4]{%
  \newacronym[#2]{#1}{#3}{#4}%
}
\end{verbatim}
This works in much the same way as \gls{bibglsnewabbreviation}.
Remember that with the \styfmt{glossaries-extra} package \gls{newacronym}
is redefined to just use \gls{newabbreviation} with the default \field{type}
set to \idx{acronymtype} and the default \field{category} set to
\code{acronym}.

\cssection{bibglsnewdualentry}

\formatdef{bibglsnewdualentry}
This command is used to define terms identified with the
\atentry{dualentry} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualentry}[4]{%
 \longnewglossaryentry*{#1}{name={#3},#2}{#4}%
}
\end{verbatim}

\cssection{bibglsnewdualindexentry}

\formatdef{bibglsnewdualindexentry}
This command is used to define primary terms identified with the
\atentry{dualindexentry} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexentry}[4]{%
  \longnewglossaryentry*{#1}{name={#3},category={index},#2}{}%
}
\end{verbatim}
Note that this definition ignores the \meta{description} argument.

\cssection{bibglsnewdualindexentrysecondary}

\formatdef{bibglsnewdualindexentrysecondary}
This command is used to define secondary terms identified with the
\atentry{dualindexentry} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexentrysecondary}[4]{%
  \longnewglossaryentry*{#1}{name={#3},#2}{#4}%
}
\end{verbatim}

\cssection{bibglsnewdualindexsymbol}

\formatdef{bibglsnewdualindexsymbol}
This command is used to define primary terms identified with the
\atentry{dualindexsymbol} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexsymbol}[5]{%
  \longnewglossaryentry*{#1}{name={#3},category={index},symbol={#4},#2}{}%
}
\end{verbatim}
Note that this definition ignores the \meta{description} argument.

\cssection{bibglsnewdualindexsymbolsecondary}

\formatdef{bibglsnewdualindexsymbolsecondary}
This command is used to define secondary terms identified with the
\atentry{dualindexsymbol} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexsymbolsecondary}[5]{%
  \longnewglossaryentry*{#1}{name={#3},category={symbol},symbol={#4},#2}%
  {#5}%
}
\end{verbatim}

\cssection{bibglsnewdualindexnumber}

\formatdef{bibglsnewdualindexnumber}
This command is used to define primary terms identified with the
\atentry{dualindexnumber} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexnumber}[5]{%
  \longnewglossaryentry*{#1}{name={#3},category={index},symbol={#4},#2}{}%
}
\end{verbatim}
Note that this definition ignores the \meta{description} argument.

\cssection{bibglsnewdualindexnumbersecondary}

\formatdef{bibglsnewdualindexnumbersecondary}
This command is used to define secondary terms identified with the
\atentry{dualindexnumber} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexnumbersecondary}[5]{%
  \longnewglossaryentry*{#1}{name={#3},category={number},symbol={#4},#2}%
  {#5}%
}
\end{verbatim}

\cssection{bibglsnewdualindexabbreviation}

\formatdef{bibglsnewdualindexabbreviation}
This command is used to define primary terms identified with the
\atentry{dualindexabbreviation} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexabbreviation}[7]{%
  \longnewglossaryentry*{#1}{%
    name={\protect\bibglsuseabbrvfont{#4}{\glscategory{#2}}},%
    category={index},#3}{}%
\end{verbatim}
In this case \meta{dual-label} is the dual entry's label, which is used 
to fetch the category label in \csref{bibglsuseabbrvfont}. (The
\field{category} field for the dual isn't used as a custom
definition of
\csref{bibglsnewdualindexabbreviationsecondary} may override the
value known to \bibgls.)

Note that the \field{name} uses
\nosecformatdef{bibglsuseabbrvfont}
to format the name, which ensures that it uses the same font as the
short form for the dual abbreviation. This will use
\idx{glsuseabbrvfont} if it's defined otherwise it will be defined
to replicate that command.

\cssection{bibglsnewdualindexabbreviationsecondary}

\formatdef{bibglsnewdualindexabbreviationsecondary}
This command is used to define secondary terms identified with the
\atentry{dualindexabbreviation} entry type.
The definition provided in the
\ext{glstex} file is:
\begin{verbatim}
\providecommand{\bibglsnewdualindexabbreviationsecondary}[6]{%
  \ifstrempty{#6}%
  {\newabbreviation[#2]{#1}{#4}{#5}}%
  {\newabbreviation[#2,description={#6}]{#1}{#4}{#5}}%
}
\end{verbatim}
This ensures that a missing or empty \field{description} doesn't
interfere with the abbreviation style.

\cssection{bibglsnewdualabbreviationentry}

\formatdef{bibglsnewdualabbreviationentry}
This command is used to define primary terms identified with the
\atentry{dualabbreviationentry} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualabbreviationentry}[5]{%
  \newabbreviation[#2]{#1}{#3}{#4}%
}
\end{verbatim}
Note that this definition ignores the \meta{description} argument.

\cssection{bibglsnewdualabbreviationentrysecondary}

\formatdef{bibglsnewdualabbreviationentrysecondary}
This command is used to define secondary terms identified with the
\atentry{dualabbreviationentry} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualabbreviationentrysecondary}[5]{%
  \longnewglossaryentry*{#1}{#2}{#5}%
}
\end{verbatim}
Note that this definition ignores the \meta{short} and \meta{long}
arguments (which will typically be empty unless the default mappings
are changed).

\cssection{bibglsnewdualentryabbreviation}

\formatdef{bibglsnewdualentryabbreviation}
This command is used to define primary terms identified with the
(now deprecated) entry type
\atentry{dualentryabbreviation}. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualentryabbreviation}[5]{%
  \newabbreviation[#2]{#1}{#3}{#4}%
}
\end{verbatim}
Note that this definition ignores the \meta{description} argument.

\cssection{bibglsnewdualentryabbreviationsecondary}

\formatdef{bibglsnewdualentryabbreviationsecondary}
This command is used to define secondary terms identified with the
(now deprecated) entry type
\atentry{dualentryabbreviation}. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualentryabbreviationsecondary}[5]{%
  \longnewglossaryentry*{#1}{#2}{#5}%
}
\end{verbatim}
Note that this definition ignores the \meta{short} and \meta{long}
arguments (which will typically be empty unless the default mappings
are changed).

\cssection{bibglsnewdualsymbol}

\formatdef{bibglsnewdualsymbol}
This command is used to define terms identified with the
\atentry{dualsymbol} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualsymbol}[4]{%
 \longnewglossaryentry*{#1}{name={#3},sort={#1},category={symbol},#2}{#4}}
\end{verbatim}

\cssection{bibglsnewdualnumber}

\formatdef{bibglsnewdualnumber}
This command is used to define terms identified with the
\atentry{dualnumber} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualnumber}[4]{%
 \longnewglossaryentry*{#1}{name={#3},sort={#1},category={symbol},#2}{#4}}
\end{verbatim}

\cssection{bibglsnewdualabbreviation}

\formatdef{bibglsnewdualabbreviation}
This command is used to define terms identified with the
\atentry{dualabbreviation} type where the \field{duallong} field
is swapped with the \field{long} field and the \field{dualshort}
field is swapped with the \field{short} field. The definition provided in the
\ext{glstex} file is:
\begin{verbatim}
\providecommand{\bibglsnewdualabbreviation}[4]{%
  \newabbreviation[#2]{#1}{#3}{#4}%
}
\end{verbatim}

\cssection{bibglsnewdualacronym}

\formatdef{bibglsnewdualacronym}
This command is used to define terms identified with the
\atentry{dualacronym} type. The definition provided in the \ext{glstex}
file is:
\begin{verbatim}
\providecommand{\bibglsnewdualacronym}[4]{%
  \newacronym[#2]{#1}{#3}{#4}%
}
\end{verbatim}
This works in much the same way as \gls{bibglsnewdualabbreviation}.
Remember that with the \styfmt{glossaries-extra} package \gls{newacronym}
is redefined to just use \gls{newabbreviation} with the default \field{type}
set to \idx{acronymtype} and the default \field{category} set to
\code{acronym}.

\cssection{bibglsnewtertiaryindexabbreviationentry}

\formatdef{bibglsnewtertiaryindexabbreviationentry}
This is used to define primary terms identified with the
\atentry{tertiaryindexabbreviationentry} type. It's essentially
the same as \csref{bibglsnewdualindexabbreviation}.
The definition provided in the \ext{glstex} file is:
\begin{verbatim}
\providecommand{\bibglsnewtertiaryindexabbreviationentry}[7]{%
  \longnewglossaryentry*{#1}{%
      name={\protect\bibglsuseabbrvfont{#4}{\glscategory{#2}}},%
      category={index},#3}{}%
}
\end{verbatim}

\cssection{bibglsnewtertiaryindexabbreviationentrysecondary}

\formatdef{bibglsnewtertiaryindexabbreviationentrysecondary}
This command is used to define both the secondary and tertiary terms identified with the
\atentry{tertiaryindexabbreviationentry} type. The secondary
term is an abbreviation and the tertiary term is a regular entry.
The definition written to the \ext{glstex} file is:
\begin{verbatim}
\providecommand{\bibglsnewtertiaryindexabbreviationentrysecondary}[8]{%
  \newabbreviation[#3]{#1}{#6}{#7}%
  \longnewglossaryentry*{#2}%
  {name={\protect\bibglsuselongfont{#7}{\glscategory{#1}}},#4}%
  {#8}%
}
\end{verbatim}
The \meta{label} is the label for the secondary (abbreviation) entry
and \meta{tertiary-label} is the label for the tertiary (regular)
entry. The fifth argument (\meta{primary name}) isn't used but is
provided if required for a custom redefinition.
The \field{name} field for the tertiary is obtained from 
the \meta{long} argument encapsulated by
\nosecformatdef{bibglsuselongfont}
to format the name, which ensures that it uses the same font as the
long form for the dual abbreviation. This will use
\idx{glsuselongfont} (provided by \sty{glossaries-extra} version
1.21) if it's defined otherwise it will be defined to replicate that
command.

\section{Location Lists and Cross-References}
\label{sec:loclistdefs}

These commands deal with the way the location lists and cross
references are formatted. The commands typically aren't used until
the entry information is displayed in the glossary, so you may
redefine these commands after the resource file has been loaded.

\cssection{bibglsseesep}

\formatdef{bibglsseesep}
Any entries that provide a \field{see} field (and that field hasn't
be omitted from the location list with \csopt[omit]{see}) will
have \gls{bibglsseesep} inserted between the \field{see} part and the
location list (unless there are no locations, in which case just
the \field{see} part is displayed without \gls{bibglsseesep}).

This command is provided with:
\begin{verbatim}
\providecommand{\bibglsseesep}{, }
\end{verbatim}
You can define this before you load the \ext{bib} file:
\begin{verbatim}
\newcommand{\bibglsseesep}{; }
\GlsXtrLoadResources[src={entries}]
\end{verbatim}
Or you can redefine it afterwards:
\begin{verbatim}
\GlsXtrLoadResources[src={entries}]
\renewcommand{\bibglsseesep}{; }
\end{verbatim}

\cssection{bibglsseealsosep}

\formatdef{bibglsseealsosep}
This is like \gls{bibglsseesep} but is used with cross-reference
lists provided with the \field{seealso} field, if supported.

\cssection{bibglsusesee}

\formatdef{bibglsusesee}
Displays the formatted cross-reference list stored in the
\field{see} field for the given entry. This just defaults to 
\idx{glsxtrusesee}\margm{label}.

\cssection{bibglsuseseealso}

\formatdef{bibglsuseseealso}
Displays the formatted cross-reference list stored in the
\field{seealso} field for the given entry. This just defaults to 
\idx{glsxtruseseealso}\margm{label}.

\cssection{bibglsdelimN}

\formatdef{bibglsdelimN}
Separator between individual locations, except for the last.
This defaults to \idx{delimN}.

\cssection{bibglslastDelimN}

\formatdef{bibglslastDelimN}
Separator between penultimate and final individual locations.
This defaults to \verb|,~| to discourage lonely locations.

\cssection{bibglspassim}

\formatdef{bibglspassim}
If \csopt{max-loc-diff} is greater than 1, then any ranges that have
skipped over gaps will be followed by \gls{bibglspassim}, which is
defined as:
\begin{verbatim}
\providecommand{\bibglspassim}{ \bibglspassimname}
\end{verbatim}
You can define this before you load the \ext{bib} file:
\begin{verbatim}
\newcommand{\bibglspassim}{}
\GlsXtrLoadResources[src={entries}]
\end{verbatim}
Or you can redefine it afterwards:
\begin{verbatim}
\GlsXtrLoadResources[src={entries}]
\renewcommand{\bibglspassim}{}
\end{verbatim}

\cssection{bibglspassimname}

\formatdef{bibglspassimname}
The default definition is obtained from the \langxml. For example, with \file{bib2gls-en.xml} the provided
definition is
\begin{verbatim}
\providecommand{\bibglspassimname}{passim}
\end{verbatim}

\cssection{bibglsrange}

\formatdef{bibglsrange}
Explicit ranges formed using \glsopt[(]{format} and
\glsopt[)]{format} or \glsopt[(\meta{csname}]{format} and
\glsopt[)\meta{csname}]{format} (where \meta{csname} matches and is a
text-block command without the initial backslash) in the optional
argument of commands like \idx{gls} or \idx{glsadd} are encapsulated within
the argument of \gls{bibglsrange}. By default this simply does its
argument. This command is not used with ranges that are formed by collating
consecutive locations.

\cssection{bibglsinterloper}

\formatdef{bibglsinterloper}
If an explicit range conflicts with a record, a warning will be
issued and the conflicting record will be shifted to the front
of the range inside the argument of \gls{bibglsinterloper}.
The default definition just does \meta{location}\idx{delimN}
so that it fits neatly into the list.

For example, suppose on page~4 of my document I start a range with
\begin{verbatim}
\glsadd[format={(}]{sample}
\end{verbatim}
and end it on page~9 with
\begin{verbatim}
\glsadd[format={)}]{sample}
\end{verbatim}
This forms an explicit range, but let's suppose on page~6 I
have
\begin{verbatim}
\gls[format={hyperbf}]{sample}
\end{verbatim}
This record conflicts with the explicit range (which doesn't include
\code{hyperbf} in the format). This causes a warning and
the conflicting entry will be moved before the start of the
explicit range resulting in \textbf{6}, 4--9.

Note that implicit ranges can't be formed from interlopers (nor can
implicit ranges be merged with explicit ones),
so if \verb|\gls[format={hyperbf}]{sample}| also occurs
on pages~7 and~8 then the result will be \textbf{6}, \textbf{7},
\textbf{8}, 4--9. Either remove the explicit range or
remove the conflicting entries. (Alternatively, redefine
\gls{bibglsinterloper} to ignore its argument, which will
discard the conflicting entries.)

\cssection{bibglspostlocprefix}

\formatdef{bibglspostlocprefix}
If the \csopt{loc-prefix} option is on, \csref{bibglslocprefix} will
be inserted at the start of location lists. The command \gls{bibglspostlocprefix}
is placed after the prefix text. This command is provided with:
\begin{verbatim}
\providecommand{\bibglspostlocprefix}{\ }
\end{verbatim}
which puts a space between the prefix text and the location list.
You can define this before you load the \ext{bib} file:
\begin{verbatim}
\newcommand{\bibglspostlocprefix}{: }
\GlsXtrLoadResources[src={entries},loc-prefix]
\end{verbatim}
Or you can redefine it afterwards:
\begin{verbatim}
\GlsXtrLoadResources[src={entries},loc-prefix]
\renewcommand{\bibglspostlocprefix}{: }
\end{verbatim}

\cssection{bibglslocprefix}

\formatdef{bibglslocprefix}
If the \csopt{loc-prefix} option is on, this command will be
provided. If the glossary type has been provided by \csopt{type}
(and \csopt{dual-type} if there are any dual entries) then the
definition of \gls{bibglslocprefix} will be appended to the glossary
preamble for the given type (or types if there are dual entries).
For example, if the document has
\begin{verbatim}
\GlsXtrLoadResources[type=main,loc-prefix={p.,pp.},src={entries}]
\end{verbatim}
and there are no dual entries, then the following will be added to
the \ext{glstex} file:
\begin{verbatim}
\apptoglossarypreamble[main]{%
 \providecommand{\bibglslocprefix}[1]{%
  \ifcase##1
  \or p.\bibglspostlocprefix
  \else pp.\bibglspostlocprefix
  \fi
 }%
}
\end{verbatim}
However, if the \csopt{type} key is missing, then the following will
be added instead:
\begin{verbatim}
\appto\glossarypreamble{%
 \providecommand{\bibglslocprefix}[1]{%
  \ifcase#1
  \or p.\bibglspostlocprefix
  \else pp.\bibglspostlocprefix
  \fi
 }%
}
\end{verbatim}

\cssection{bibglspagename}

\formatdef{bibglspagename}
If \csopt[true]{loc-prefix} is used, then this command is provided
using the value of \code{tag.page} from the \langxml. For example with \file{bib2gls-en.xml} the definition is:
\begin{verbatim}
\providecommand{\bibglspagename}{Page}
\end{verbatim}

\cssection{bibglspagesname}

\formatdef{bibglspagesname}
If \csopt[true]{loc-prefix} is used, then this command is provided
using the value of \code{tag.pages} from the \langxml. For example with \file{bib2gls-en.xml} the definition is:
\begin{verbatim}
\providecommand{\bibglspagesname}{Pages}
\end{verbatim}

\cssection{bibglslocsuffix}

\formatdef{bibglslocsuffix}
If the \csopt{loc-suffix} option is on, this command will be
provided. If the glossary type has been provided by \csopt{type}
(and \csopt{dual-type} if there are any dual entries) then the
definition of \gls{bibglslocsuffix} will be appended to the glossary
preamble for the given type (or types if there are dual entries).

This commands definition depends on the value provided by
\csopt{loc-suffix}. For example, with \csopt[\idx{at}.]{loc-suffix}
the command is defined as:
\begin{verbatim}
\providecommand{\bibglslocsuffix}[1]{\@.}
\end{verbatim}
(which ignores the argument).

Whereas with \csopt[\meta{A}\dcomma\meta{B}\dcomma\meta{C}]{loc-suffix}
the command is defined as:
\begin{verbatim}
\providecommand{\bibglslocsuffix}[1]{\ifcase#1 A\or B\else C\fi}
\end{verbatim}

Note that this is slightly different from \gls{bibglslocprefix} as
it includes the 0 case, which in this instance means that there were
no locations but there was a cross-reference. This command isn't
added when the location list is empty.

\cssection{bibglslocationgroup}

\formatdef{bibglslocationgroup}
When the \csopt{loc-counters} option is used, the locations
for each entry are grouped together according to the counter
(in the order specified in the value of \csopt{loc-counters}).
Each group of locations is encapsulated within
\gls{bibglslocationgroup}, where \meta{n} is the number
of locations within the group, \meta{counter} is the
counter name and \meta{list} is the formatted location sub-list.
By default, this simply does \meta{list}, but may be
defined (before the resources are loaded) or redefined 
(after the resources are loaded) as required.

For example:
\begin{verbatim}
\newcommand*{\bibglslocationgroup}[3]{%
  \ifnum#1=1
   #2:
  \else
   #2s:
  \fi
  #3%
}

\GlsXtrLoadResources[
  loc-counters={equation,page},% group locations by counter
  src={entries}% data in entries.bib
]
\end{verbatim}
This will prefix each group with the counter name, if there's
only one location, or the counter name followed by \qt{s},
if there are multiple locations within the group.

There are various ways to adapt this to translate the counter
name to a different textual label, such as:
\begin{verbatim}
\providecommand{\pagename}{Page}
\providecommand{\pagesname}{Pages}
\providecommand{\equationname}{Equation}
\providecommand{\equationsname}{Equations}

\newcommand*{\bibglslocationgroup}[3]{%
  \ifnum#1=1
   \ifcsdef{#2name}{\csuse{#2name}}{#2}:
  \else
   \ifcsdef{#2sname}{\csuse{#2sname}}{#2s}:
  \fi
  #3%
}
\end{verbatim}

\cssection{bibglslocationgroupsep}

\formatdef{bibglslocationgroupsep}
When the \csopt{loc-counters} option is set, this command
is used to separate each location sub-group. It may be defined
before the resources are loaded:
\begin{verbatim}
\newcommand*{\bibglslocationgroupsep}{; }

\GlsXtrLoadResources[
  loc-counters={equation,page},% group locations by counter
  src={entries}% data in entries.bib
]
\end{verbatim}
or redefined after the resources are loaded:
\begin{verbatim}
\GlsXtrLoadResources[
  loc-counters={equation,page},% group locations by counter
  src={entries}% data in entries.bib
]

\renewcommand*{\bibglslocationgroupsep}{; }
\end{verbatim}

\cssection{bibglssupplemental}

\formatdef{bibglssupplemental}
When the \csopt{supplemental-locations} option is used, the locations
from a supplementary document are encapsulated within the \meta{list}
part of \gls{bibglssupplemental}. The first argument \meta{n}
(ignored by default) is the number of supplementary locations.

\cssection{bibglssupplementalsep}

\formatdef{bibglssupplementalsep}
The separator between the main location list and the supplementary
location list. By default this is just \idx{delimN}. This may be
defined before the resources are loaded:
\begin{verbatim}
\newcommand{\bibglssupplementalsep}{; }

\GlsXtrLoadResources[
 supplemental-locations=supplDoc,
 src={entries}]
\end{verbatim}
or redefined after the resources are loaded:
\begin{verbatim}
\GlsXtrLoadResources[
 supplemental-locations=supplDoc,
 src={entries}]

\renewcommand{\bibglssupplementalsep}{; }
\end{verbatim}

\section{Letter Groups}
\label{sec:lettergroupdefs}

The commands listed in this section are provided for use with the
\longarg{group} switch and glossary styles that display the letter
group title. If these need their definitions altered, they should
be defined before the resource file is loaded (rather than redefined
afterwards).

The base \sty{glossaries} package determines group titles through a fairly
simplistic rule. Both \idx!{makeindex} and \idx!{xindy} write the
line
\nosecformatdef{glsgroupheading}
to the associated glossary file at the start of each new letter group.
For example, the \qt{A} letter group will be written as:
\begin{verbatim}
\glsgroupheading{A}
\end{verbatim}
This is quite straightforward and the heading title can just be
\qt{A}. The \qt{Symbols} group is written as
\begin{verbatim}
\glsgroupheading{glssymbols}
\end{verbatim}
To allow for easy translation, the base \sty{glossaries} package has
the simple rule: 
\begin{itemize}
\item if \csfmt{\meta{heading}groupname} exists use that;
\item otherwise just use \meta{heading}.
\end{itemize}
There's no \csfmt{Agroupname} provided, but \idx{glssymbolsgroupname}
is provided and is supported by the associated language modules,
such as \styfmt{glossaries-french}. (Similarly for the \qt{Numbers}
group.)

The glossary styles that provide hyperlinks to the groups (such as 
\glostyle{indexhypergroup}) use \meta{heading} to form the target
name. A problem arises when active characters occur in
\meta{heading}, which happens with extended characters and
\sty{inputenc}.

The \sty{glossaries-extra} package (as from version 1.14) provides
\nosecformatdef{glsxtrsetgrouptitle}
to set the title for a group with the given label. The internal
workings of \gls{glsgroupheading} are modified to use a slightly
altered rule:
\begin{itemize}
\item if a title has been set using
\gls{glsxtrsetgrouptitle}\margm{heading}\margm{title} for the given
\meta{heading}, use that;
\item if \csfmt{\meta{heading}groupname} exists, use that;
\item just use \meta{heading} for the title.
\end{itemize}
So if \gls{glsxtrsetgrouptitle} hasn't been used, it falls back on
the original rule.

The problem is now how to make the indexing application use the
desired label in the argument of \gls{glsgroupheading} instead of selecting
the heading based on the first character of each sort value for each
top-level entry in that group. This can't be done with
\idx{makeindex}, and with \idx{xindy} it requires a custom language
module, which isn't a trivial task.

With \bibgls, a different approach is used. The \ext{glstex} file
created isn't comparable to the \ext{gls} file created by
\idx{makeindex} or \idx{xindy}. There's nowhere for \bibgls\ to
write the \gls{glsgroupheading} line as it isn't creating the code
that typesets the glossary list. Instead it's creating the code that
defines the entries. The actual group heading is inserted by 
\idx{printunsrtglossary} and it's only able to do this by checking if
the entry has a \field{group} field and comparing it to the previous
entry's \field{group} field. 

The collators used by the locale and letter-based rules save the
following information for each entry based on the first significant letter of
the \field{sort} field (if the letter is recognised as alphabetical,
according to the rule):
\begin{itemize}
\item \meta{title} The group's title. This is typically title-cased.
For example, if the rule recognises the digraph \qt{dz}, then the
title is \qt{Dz}. Exceptions to this are included in the \langxml.
If the key \code{grouptitle.case.\meta{lc}} exists, where
\meta{lc} is the lower case version of \meta{title}, then the value
of that key is used instead. For example, the Dutch digraph \qt{ij}
should be converted to \qt{IJ}, so \file{bib2gls-en.xml} includes:
\begin{verbatim}
<entry key="grouptitle.case.ij">IJ</entry>
\end{verbatim}
(See the \longarg{group} switch for more details.)
\item \meta{letter} This is the actual letter at the start of the
given entry's \field{sort} field, which may be lower case or may
contain diacritics that don't appear in \meta{title}.
\item \meta{id} A numeric identifier. This may be the collation key
or the code point for the given letter, depending on the sort
method.
\item \meta{type} The entry's glossary type. If not known, this will
be empty. (\bibgls\ won't know if you've modified the associated 
\csfmt{bibglsnew...} command to set the \field{type}. It can only
know the type if it's in the original \ext{bib} definition or is set
using resource options such as \csopt{type}.)
\end{itemize}

The \field{group} field is then set using:
\begin{alltt}
group=\marg{\gls{bibglslettergroup}\margm{title}\margm{letter}\margm{id}\margm{type}}
\end{alltt}
This field needs to expand to a simple label, which \csref{bibglslettergroup}
is designed to do.  Note that non-letter groups are dealt with
separately (see below).

\cssection{bibglssetlettergrouptitle}

For each group that's detected, \bibgls\ will write the line:
\formatdef{bibglssetlettergrouptitle}
in the \ext{glstex} file, which sets the group's title using
\format{glsxtrsetgrouptitle}
where the \meta{group label} part matches the corresponding \field{group}
value.

Note that \gls{bibglssetlettergrouptitle} only has a single
argument, but that argument contains the four arguments needed by
\csref{bibglslettergroup} and \csref{bibglslettergrouptitle}.
These arguments are as described above.

If \gls{glsxtrsetgrouptitle} has been defined (\sty{glossaries-extra}
version 1.14 onwards), then \gls{bibglssetlettergrouptitle} will be
defined as
\begin{verbatim}
\providecommand{\bibglssetlettergrouptitle}[1]{%
  \glsxtrsetgrouptitle{\bibglslettergroup#1}{\bibglslettergrouptitle#1}}
\end{verbatim}
If an earlier version of \sty{glossaries-extra} is used, then this
function can't be supported and the command will be defined to
simply ignore its argument. This will fall back on the original
method of just using \meta{title} as the label.

Since \gls{bibglssetlettergrouptitle} is used in the \ext{glstex} file to
set the group titles, the associated commands need to be defined
before the resource file is loaded if their definitions require
modification. After the resource file has been loaded, you can
adjust the title of a specific group, but you'll need to check the
\ext{glstex} file for the appropriate arguments. For example, if the
\ext{glstex} file contains:
\begin{alltt}
\gls{bibglssetlettergrouptitle}\marg{\marg{\AE}\marg{\ae}\marg{7274496}\marg{}}
\end{alltt}
but you actually want the group title to appear as \qt{\AE\ (AE)}
instead of just \qt{\AE}, then after the resource file has been
loaded you can do:
\begin{alltt}
\gls{glsxtrsetgrouptitle}
 \marg{\gls{bibglslettergroup}\marg{\AE}\marg{\ae}\marg{7274496}\marg{}}\% label
 \marg{\AE\ (AE)}\% title
\end{alltt}

\cssection{bibglslettergroup}

\formatdef{bibglslettergroup}
This command is used to determine the letter group label. The
default definition is \meta{type}\meta{id}, which ensures that no
problematic characters occur in the label since \meta{type} can't
contains special characters and \meta{id} is numeric. The
\meta{type} is included in case there are multiple glossaries, since
the hyperlink name must be unique.

\cssection{bibglslettergrouptitle}

\formatdef{bibglslettergrouptitle}
This command is used to determine the letter group title.
The default definition is \idx{unexpanded}\margm{title}, which guards
against any expansion issues that may arise with characters outside
the basic Latin set.

For example:
\begin{verbatim}
@entry{angstrom,
  name={\AA ngstr\"om}
  description={a unit of length equal to one hundred-millionth 
of a centimetre}
}
\end{verbatim}
The \field{sort} value is \qtt{\AA ngstr\"om}. With \csopt[en]{sort}
the \meta{title} part will be \code{A} but with \csopt[sv]{sort}
the \meta{title} part will be \code{\AA}. In both cases the
\meta{letter} argument will be \code{\AA}.

Take care if you are using a script that needs encapsulating. For
example, with the \sty{CJKutf8} package the CJK characters need to
be placed within the \env{CJK} environment, so any letter group
titles that contain CJK characters will need special attention.

For example, suppose the \ext{bib} file contains entries in the
form:
\begin{alltt}
\atentry{dualentry}\marg{\meta{label},
  name = \marg{\idx{cjkname}\margm{CJK characters}},
  description = \margm{English description}
}
\end{alltt}
and the document contains:
\begin{verbatim}
\usepackage{CJKutf8}
\usepackage[record,style=indexgroup,nomain]{glossaries-extra}

\newglossary*{japanese}{Japanese to English}
\newglossary*{english}{English to Japanese}

\newrobustcmd{\cjkname}[1]{\begin{CJK}{UTF8}{min}#1\end{CJK}}
\glsnoexpandfields

\GlsXtrLoadResources[
  src=testcjk,% bib file
  sort={ja-JP},% locale used to sort primary entries
  dual-sort={en-GB},% locale used to sort secondary entries
  type=japanese,% put the primary entries in the 'japanese' glossary
  dual-type=english,% put the primary entries in the 'english' glossary
  dual-prefix={en.}
]
\end{verbatim}
then CJK characters will appear in the \meta{title} argument of 
\gls{bibglslettergrouptitle} which causes a problem because they need
to be encapsulated within the \env{CJK} environment. This can be more
conveniently done with the user supplied \csfmt{cjkname}, but the CJK
characters need to be protected from expansion so \idx{unexpanded} is
also needed. The new definition of \gls{bibglslettergrouptitle} needs
to be defined before \gls{GlsXtrLoadResources}. For example:
\begin{verbatim}
\newcommand{\bibglslettergrouptitle}[4]{\unexpanded{\cjkname{#1}}}
\end{verbatim}
There's a slight problem here in that the English letter group titles 
also end up encapsulated. An alternative approach is to use the
\meta{type} part to provide different forms. For example:
\begin{verbatim}
\newcommand*{\englishlettergroup}[1]{#1}
\newcommand*{\japaneselettergroup}[1]{\cjkname{#1}}
\newcommand{\bibglslettergrouptitle}[4]{%
 \unexpanded{\csuse{#4lettergroup}{#1}}}
\end{verbatim}
(\csfmt{csuse} is provided by \sty{etoolbox}, which is automatically
loaded by the \styfmt{glossaries} package.)

\cssection{bibglssetothergrouptitle}

The group label and title for non-alphabetic characters (symbols)
are dealt with in a similar way to the letter groups, but in this
case the title is set using
\formatdef{bibglssetothergrouptitle}
This is defined in an analogous manner:
\begin{verbatim}
\providecommand{\bibglssetothergrouptitle}[1]{%
 \glsxtrsetgrouptitle{\bibglsothergroup#1}{\bibglsothergrouptitle#1}}
\end{verbatim}
where the group label is obtained using \csref{bibglsothergroup} and
the group title is obtained from \csref{bibglsothergrouptitle}.
Note that since non-alphabetic characters don't have upper or lower
case versions, there are only three arguments. The other difference
between this and the letter group version is that the \meta{id} is
given in hexadecimal format (corresponding to the character code).

For example, suppose my \ext{bib} file contains:
\begin{verbatim}
@entry{sauthor,
  name={/Author},
  description = {author string}
}
\end{verbatim}
If a locale sort is used, the leading slash \code{/} will be
ignored and this entry will belong to the \qt{A} letter group using
the letter commands described above. If, instead, one of the
character code sort methods are used, such as
\csopt[letter-case]{sort}, then this entry will be identified as
belonging to a symbol (or \qt{other}) group and the title will be
set using:
\begin{verbatim}
\bibglssetothergrouptitle{{/}{2F}{}}
\end{verbatim}

\cssection{bibglsothergroup}

\formatdef{bibglsothergroup}
This expands to the group label for symbol groups. This just
defaults to \code{glssymbols} (ignoring all arguments), which
replicates the label used when \idx!{makeindex} or \idx!{xindy}
generate the glossary files.

\cssection{bibglsothergrouptitle}

\formatdef{bibglsothergrouptitle}
This expands to the group title for symbol groups. This just
expands to \idx{glssymbolsgroupname} by default.

\cssection{bibglssetnumbergrouptitle}

The numeric sort methods (\tableref{tab:sortoptionsnumerical}) 
all create number groups instead of letter
or symbol groups. These behave in an analogous way to the above.
\formatdef{bibglssetnumbergrouptitle}
In this case \meta{value} is the actual numeric sort value, and
\meta{id} is a decimal number obtained from converting \meta{value}
to an integer. This command is defined as
\begin{verbatim}
\providecommand{\bibglssetnumbergrouptitle}[1]{%
  \glsxtrsetgrouptitle{\bibglsnumbergroup#1}{\bibglsnumbergrouptitle#1}}
\end{verbatim}

\cssection{bibglsnumbergroup}

The number group label is obtained from:
\formatdef{bibglsnumbergroup}
This just defaults to \code{glsnumbers}.

\cssection{bibglsnumbergrouptitle}

The number group title is obtained from:
\formatdef{bibglsnumbergrouptitle}
This just defaults to \idx{glsnumbersgroupname}.

\cssection{bibglsdatetimegroup}

\formatdef{bibglsdatetimegroup}

This command is used for group labels with \optfmt{datetime} sorting
(\tableref{tab:sortoptionsdatetime}). This has ten arguments, which means a
little trickery is needed to deal with the tenth argument.
The default definition is
\begin{verbatim}
\providecommand{\bibglsdatetimegroup}[9]{#1#2#3\@firstofone}
\end{verbatim}
This forms the group label from the year, month, day and \meta{type}.

\cssection{bibglsdatetimegrouptitle}

\formatdef{bibglsdatetimegrouptitle}

This command is used for group titles with \optfmt{datetime} sorting
(\tableref{tab:sortoptionsdatetime}).
The default definition is
\begin{verbatim}
\providecommand{\bibglsdatetimegrouptitle}[9]{#1-#2-#3\@gobble}
\end{verbatim}
This sets the title to the numeric
\code{\meta{YYYY}-\meta{MM}-\meta{DD}}
but may be redefined as appropriate.

\cssection{bibglsdategroup}

\formatdef{bibglsdategroup}

This command is used for group labels with \optfmt{date} (no time) sorting 
(\tableref{tab:sortoptionsdatetime}). The default definition is
\begin{verbatim}
\providecommand{\bibglsdategroup}[7]{#1#2#4#7}
\end{verbatim}
This forms the group label from the year, month, era and type.
In this case, the era is a textual representation not the numeric
value used in calculating the sort value.

\cssection{bibglsdategrouptitle}

\formatdef{bibglsdategrouptitle}
This command is used for group titles with \optfmt{date} (no time) sorting
(\tableref{tab:sortoptionsdatetime}).  The default definition is
\begin{verbatim}
\providecommand{\bibglsdategrouptitle}[7]{#1-#2}
\end{verbatim}
This just sets the title to the numeric year-month form 
\code{\meta{YYYY}-\meta{MM}}.

\cssection{bibglstimegroup}

\formatdef{bibglstimegroup}
This command is used for group labels with \optfmt{time} (no date) sorting
(\tableref{tab:sortoptionsdatetime}).

\cssection{bibglstimegrouptitle}

\formatdef{bibglstimegrouptitle}

This command is used for group titles with \optfmt{time} (no date) sorting
(\tableref{tab:sortoptionsdatetime}).

\cssection{bibglshypergroup}

\formatdef{bibglshypergroup}

If the \ext{log} file indicates that \sty{hyperref} has been loaded
and the \longarg{group} switch is used, then this command will be
used to create the navigation information for glossary styles such
as \glostyle{indexhypergroup}.

\section{Flattened Entries}
\label{sec:flattendefs}

These commands relate to the way the \field{name} field is altered
when flattening lonely child entries with the \csopt{flatten-lonely}
option.

\cssection{bibglsflattenedhomograph}

\formatdef{bibglsflattenedhomograph}
The default definition simply does \meta{name}.

This command is used if the child and parent name's are identical.
For example, suppose the \ext{bib} file contains:
\begin{verbatim}
@index{super.glossary, name={glossary}}

@entry{glossarycol,
  parent={super.glossary},
  description={collection of glosses}
}

@entry{glossarylist,
  parent={super.glossary},
  description={list of technical words}
}
\end{verbatim}
The child entries don't have a \field{name} field, so the value is assumed
to be the same as the parent's \field{name} field. Here's an example 
document where both child entries are used:
\begin{verbatim}
\documentclass{article}

\usepackage[record,subentrycounter,style=treenoname]{glossaries-extra}

\GlsXtrLoadResources[src={entries}]

\begin{document}
\gls{glossarycol} (collection) vs \gls{glossarylist} (list).

\printunsrtglossary
\end{document}
\end{verbatim}
This uses one of the glossary styles designed for homographs and the
glossary has the structure:
\begin{flushleft}
\textbf{glossary}\par
\quad 1) collection of glosses 1\par
\quad 2) list of technical words 1
\end{flushleft}
If only one child entry is selected, then the result looks a little
odd. For example:
\begin{flushleft}
\textbf{glossary}\par
\quad 1) collection of glosses 1
\end{flushleft}
With the \csopt{flatten-lonely} option, the parent is removed and
the child is moved up a hierarchical level. With 
\csopt[postsort]{flatten-lonely} this would normally adjust the
name so that it appears as \meta{parent name}, \meta{child name}
but in this case it would look a little odd for the name to 
appear as \qt{glossary, glossary} so instead the name is
set to
\begin{verbatim}
\bibglsflattenedhomograph{glossary}{super.glossary}
\end{verbatim}
(where the first argument is the original name and the second argument is the
label of the parent entry).

This means that the name simply appears as \qt{glossary}, even if
the \csopt[postsort]{flatten-lonely} option is used. Note that if
the parent entry is removed, the parent label won't be of much use.
You can test for existence using \idx{ifglsentryexists} in case you
want to vary the way the name is displayed according to whether or
not the parent is still present.

\cssection{bibglsflattenedchildpresort}

\formatdef{bibglsflattenedchildpresort}

Used by the \csopt[presort]{flatten-lonely} option. This defaults
to just \meta{child name}. If you want to change this, remember that
you can let the interpreter know by adding the definition to
\atentry{preamble}. For example:
\begin{verbatim}
@preamble{"\providecommand{\bibglsflattenedchildpresort}[2]{#1 (#2)}"}
\end{verbatim}

\cssection{bibglsflattenedchildpostsort}

\formatdef{bibglsflattenedchildpostsort}

Used by the \csopt[postsort]{flatten-lonely} option. This defaults
to \code{\meta{parent name}, \meta{child name}}.

Note that the arguments are in the reverse order to those of the
previous command. This is done to assist the automated first letter
upper-casing. If either command is redefined to alter the ordering,
then this can confuse the case-changing mechanism, in which case you
may want to consider switching on the expansion of the \field{name}
field using:
\begin{verbatim}
\glssetexpandfield{name}
\end{verbatim}
(before \gls{GlsXtrLoadResources}).

\section{Other}

\cssection{bibglssetwidest}

\formatdef{bibglssetwidest}
This is used by \csopt{set-widest} to set the widest name for the
given hierarchical level where the glossary type can't be determined.
This is defined as:
\begin{verbatim}
\providecommand*{\bibglssetwidest}[2]{\glssetwidest[#1]{#2}}
\end{verbatim}

\cssection{bibglssetwidestfortype}

\formatdef{bibglssetwidestfortype}
This is used by \csopt{set-widest} to set the widest name for the
given hierarchical level where the glossary type is known. This
is defined as:
\begin{verbatim}
\providecommand*{\bibglssetwidestfortype}[3]{%
  \apptoglossarypreamble[#1]{\glssetwidest[#2]{#3}}%
}
\end{verbatim}


\chapter{Converting Existing \filefmt{.tex} to \filefmt{.bib}}
\label{sec:gls2bib}

If you have already been using the \styfmt{glossaries} or
\styfmt{glossaries-extra} package with a large file containing all your
definitions using commands like \gls{newglossaryentry}, then you can
use the supplementary tool \idx{convertgls2bib} to convert the definitions
to the \ext{bib} format required by \bibgls. The syntax is:
\begin{alltt}
convertgls2bib \oargm{options} \meta{tex file} \meta{bib file}
\end{alltt}
where \meta{tex file} is the \ext{tex} file and \meta{bib file} is
the \ext{bib} file. This application is less secure than \bibgls\ as
it doesn't use \idx{kpsewhich} to check \texmfcnf{openinany} and 
\texmfcnf{openoutany}. Take care not to accidentally overwrite
existing \ext{bib} files as there's no check to determine if
\meta{bib file} already exists.

The \meta{options} are:
\begin{description}
\item[\longargfmt{texenc} \meta{encoding}] The character encoding of the
\ext{tex} file. If omitted, the operating system's default encoding
is assumed (or the \idx{JVM}['s]).

\item[\longargfmt{bibenc} \meta{encoding}] The character encoding of the
\ext{bib} file. If omitted, the same encoding as the
\ext{tex} file is assumed.

\item[\longargfmt{space-sub} \meta{replacement}] The \ext{bib}
format doesn't allow spaces in labels. If your original
definitions in your \ext{tex} file have spaces, use this option to
replace spaces in labels. Each space will be substituted with
\meta{replacement}. The cross-referencing fields, \field{see},
\field{seealso} and \field{alias}, will also be adjusted, but any
references using \idx{gls} etc will have to be substituted manually 
(or use a global search and replace in your text editor).
If you want to strip the spaces, use an empty string for
\meta{replacement}. You'll need to delimit this according to your
operating system. For example:
\begin{verbatim}
gls2bib --space-sub '' entries.tex entries.bib
\end{verbatim}

\item[\longargfmt{ignore-sort}] Ignore the \field{sort} field.
This is the default since \bibgls\ can work out a more intuitive
sort value than either \idx!{makeindex} or \idx!{xindy}.

\item[\longargfmt{no-ignore-sort}] Don't ignore the \field{sort} field.

\item[\longargfmt{help} or \shortargfmt{h}] Display help message and
quit.
\item[\longargfmt{version} or \shortargfmt{v}] Display version
information and quit.
\end{description}

This application recognises the commands listed below. Avoid any
overly complicated code within the \ext{tex} file. The \TeX\ parser
library isn't a \TeX\ engine!
In all cases below, if \meta{\keyvallist} contains
\begin{alltt}
see=[\idx{seealsoname}]\margm{label(s)}
\end{alltt}
this will be substituted with 
\begin{alltt}
seealso=\margm{label(s)}
\end{alltt}
For example:
\begin{verbatim}
\newterm[see={[\seealsoname]goose}]{duck}
\end{verbatim}
will be written as
\begin{verbatim}
@index{duck,
  seealso = {goose}
}
\end{verbatim}
(The \field{seealso} key is provided by \sty{glossaries-extra}
v1.16+.)

Additionally, if \meta{\keyvallist} contains
\begin{alltt}
type=\marg{\idx{glsdefaulttype}}
\end{alltt}
then this field will be ignored. (This \field{type} value is
recommended in \meta{\keyvallist} when loading files with
\idx{loadglsentries}\oargm{type}\margm{file} to allow the optional
argument to set the \field{type}. With \bibgls\ you can use the
\csopt{type} option instead.)

\cssection[\section]{newglossaryentry}
The base \styfmt{glossaries} package provides:
\formatdef{newglossaryentry}

This is converted to:
\begin{alltt}
\atentry{entry}\marg{\meta{label},
  \meta{\keyvallist}
}
\end{alltt}

\idx{newentry} (provided by the \styfmt{glossaries-extra}
\styopt{shortcuts} option) is recognised as a synonym of \gls{newglossaryentry}.

\cssection[\section]{provideglossaryentry}
The base \styfmt{glossaries} package provides:
\formatdef{provideglossaryentry}
This is converted to:
\begin{alltt}
\atentry{entry}\marg{\meta{label},
  \meta{\keyvallist}
}
\end{alltt}
but only if \meta{label} hasn't already been defined.

\cssection[\section]{longnewglossaryentry}
The base \styfmt{glossaries} package provides:
\formatdef{longnewglossaryentry}
This is converted to:
\begin{alltt}
\atentry{entry}\marg{\meta{label},
 \meta{\keyvallist},
 description = \margm{description}
}
\end{alltt}

The starred version provided by the \styfmt{glossaries-extra} package
is also recognised. The unstarred version strips trailing spaces
from \meta{description}. (This doesn't add \idx{nopostdesc}, but
\styfmt{glossaries-extra} defaults to \styopt{nopostdot}.)

\cssection[\section]{longprovideglossaryentry}

The base \styfmt{glossaries} package provides:
\formatdef{longprovideglossaryentry}
As above, but only if \meta{label} hasn't already been defined.

\cssection[\section]{newterm}

The base \styfmt{glossaries} package provides:
\formatdef{newterm}
(when the \styopt{index} option is used).

This is converted to:
\begin{alltt}
\atentry{index}\marg{\meta{label},
 \meta{\keyvallist}
}
\end{alltt}
if the optional argument is present, otherwise it's just converted
to:
\begin{alltt}
\atentry{index}\marg{\meta{label}}
\end{alltt}

If \longargfmt{space-sub} is used and \meta{label} contains one or
more spaces, then \field{name} will be set if not included in
\meta{\keyvallist}. For example, if \filefmt{entries.bib}
contains
\begin{verbatim}
\newterm{sea lion}
\newterm[seealso={sea lion}]{seal}
\end{verbatim}
then
\begin{verbatim}
gls2bib --space-sub '-' entries.bib entries.tex
\end{verbatim}
will write the terms to \filefmt{entries.tex} as
\begin{verbatim}
@index{sea-lion,
  name = {sea lion}
}

@index{seal,
  seealso = {sea-lion}
}
\end{verbatim}
whereas just
\begin{verbatim}
gls2bib entries.bib entries.tex
\end{verbatim}
will write the terms to \filefmt{entries.tex} as
\begin{verbatim}
@index{sea lion}

@index{seal,
  seealso = {sea lion}
}
\end{verbatim}
which will cause a problem when the \ext{bib} file is parsed
by \bibgls\ (and will probably also cause a problem for 
bibliographic management systems).

\cssection[\section]{newabbreviation}
The \styfmt{glossaries-extra} package provides:
\formatdef{newabbreviation}
This is converted to:
\begin{alltt}
\atentry{abbreviation}\marg{\meta{label},
 short = \margm{short},
 long = \margm{long},
 \meta{\keyvallist}
}
\end{alltt}
if the optional argument is present, otherwise it's converted to:
\begin{alltt}
\atentry{abbreviation}\marg{\meta{label},
 short = \margm{short},
 long = \margm{long}
}
\end{alltt}

\cssection[\section]{newacronym}
The base \styfmt{glossaries} package provides:
\formatdef{newacronym}
(which is redefined by \styfmt{glossaries-extra} to use
\gls{newabbreviation}).

As above but uses \atentry{acronym} instead.

\cssection[\section]{glsxtrnewsymbol}
The \styfmt{glossaries-extra} package provides:
\formatdef{glsxtrnewsymbol}
(when the \styopt{symbols} option is used).
This is converted to:
\begin{alltt}
\atentry{symbol}\marg{\meta{label},
 name = \margm{symbol}
}
\end{alltt}
if the optional argument is missing, otherwise it's converted to:
\begin{alltt}
\atentry{symbol}\marg{\meta{label},
 name = \margm{symbol},
 \meta{\keyvallist}
}
\end{alltt}
unless \meta{\keyvallist} contains the \field{name} field,
in which case it's converted to:
\begin{alltt}
\atentry{symbol}\marg{\meta{label},
 \meta{\keyvallist}
}
\end{alltt}

\idx{newsym} (provided by the \styopt{shortcuts} option) is recognised 
as a synonym for \gls{glsxtrnewsymbol}.

\cssection[\section]{glsxtrnewnumber}

The \styfmt{glossaries-extra} package provides:
\formatdef{glsxtrnewnumber}
(when the \styopt{numbers} option is used).
This is converted to:
\begin{alltt}
\atentry{number}\marg{\meta{label},
 name = \margm{label}
}
\end{alltt}
if the optional argument is missing, otherwise it's converted to:
\begin{alltt}
\atentry{number}\marg{\meta{label},
 name = \margm{label},
 \meta{\keyvallist}
}
\end{alltt}
if \field{name} isn't listed in \meta{\keyvallist},
otherwise it's converted to:
\begin{alltt}
\atentry{number}\marg{\meta{label},
 \meta{\keyvallist}
}
\end{alltt}

\idx{newnum} (provided by the \styopt{shortcuts} option) is
recognised as a synonym for \gls{glsxtrnewnumber}.

\cssection[\section]{newdualentry}

\formatdef{newdualentry}
This command isn't provided by either \styfmt{glossaries} or
\styfmt{glossaries-extra} but is used as an example in the
\sty{glossaries} user manual and in the sample file
\file{sample-dual.tex} that accompanies the \sty{glossaries}
package. Since this command seems to be used quite a bit (given the
number of times it crops up on sites like
\href{https://tex.stackexchange.com/}{\TeX\ on StackExchange}), 
\idx{convertgls2bib} also supports it unless this command is
defined using \idx{newcommand} or \idx{renewcommand} in the 
input file. In which case the default definition will be overridden.

If the command definition isn't overridden, then it's converted to
\begin{alltt}
\atentry{dualabbreviationentry}\marg{\meta{label},
  short = \margm{short},
  long = \margm{long},
  description = \margm{description},
  \meta{\keyvallist}
}
\end{alltt}
if \meta{\keyvallist} is supplied, otherwise it's converted to:
\begin{alltt}
\atentry{dualabbreviationentry}\marg{\meta{label},
  short = \margm{short},
  long = \margm{long},
  description = \margm{description}
}
\end{alltt}

For example, if the original \filefmt{.tex} file contains
\begin{verbatim}
\newcommand*{\newdualentry}[5][]{%
  \newglossaryentry{main-#2}{name={#4},%
  text={#3\glsadd{#2}},%
  description={#5},%
  #1
  }%
  \newacronym{#2}{#3\glsadd{main-#2}}{#4}
}

\newdualentry{svm}% label
  {SVM}% abbreviation
  {support vector machine}% long form
  {Statistical pattern recognition technique}% description
\end{verbatim}
then the \filefmt{.bib} file will contain
\begin{verbatim}
@entry{main-svm,
  name = {support vector machine},
  description = {Statistical pattern recognition technique},
  text = {SVM\glsadd{svm}}
}

@acronym{svm,
  short = {SVM\glsadd{main-svm}},
  long = {support vector machine}
}
\end{verbatim}
since \gls{newdualentry} was defined with \idx{newcommand}. However,
if the original file uses \idx{providecommand} or omits the
definition of \gls{newdualentry}, then the \filefmt{.bib} file will
contain:
\begin{verbatim}
@dualabbreviationentry{svm,
  short = {SVM},
  description = {Statistical pattern recognition technique},
  long = {support vector machine}
}
\end{verbatim}

\resetsecnumdepth
\printunsrtglossary[type=index]
\end{document}
